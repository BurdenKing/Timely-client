(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{242:function(e,t,a){},315:function(e,t,a){},345:function(e,t,a){},357:function(e,t,a){e.exports=a.p+"static/media/logo.91005679.png"},432:function(e,t,a){},433:function(e,t){e.exports=[{value:0,label:"P6",name:"P-level 6"},{value:1,label:"P5",name:"P-level 5"},{value:2,label:"P4",name:"P-level 4"},{value:3,label:"P3",name:"P-level 3"},{value:4,label:"P2",name:"P-level 2"},{value:5,label:"P1",name:"P-level 1"},{value:6,label:"DS",name:"DS level"},{value:7,label:"JS",name:"JS level"}]},523:function(e,t,a){e.exports=a(930)},528:function(e,t,a){},561:function(e,t,a){},562:function(e,t,a){},576:function(e,t,a){var n={"./af-ZA.js":577,"./ar-AE.js":578,"./ar-BH.js":579,"./ar-DZ.js":580,"./ar-EG.js":581,"./ar-IQ.js":582,"./ar-JO.js":583,"./ar-KW.js":584,"./ar-LB.js":585,"./ar-LY.js":586,"./ar-MA.js":587,"./ar-OM.js":588,"./ar-QA.js":589,"./ar-SA.js":590,"./ar-SY.js":591,"./ar-TN.js":592,"./ar-YE.js":593,"./az-Cyrl-AZ.js":594,"./az-Latn-AZ.js":595,"./be-BY.js":596,"./bg-BG.js":597,"./bs-Latn-BA.js":598,"./ca-ES.js":599,"./cs-CZ.js":600,"./cy-GB.js":601,"./da-DK.js":602,"./de-AT.js":603,"./de-CH.js":604,"./de-DE.js":605,"./de-LI.js":606,"./de-LU.js":607,"./dv-MV.js":608,"./el-GR.js":609,"./en-029.js":610,"./en-AU.js":611,"./en-BZ.js":612,"./en-CA.js":613,"./en-GB.js":614,"./en-IE.js":615,"./en-JM.js":616,"./en-NZ.js":617,"./en-PH.js":618,"./en-TT.js":619,"./en-ZA.js":620,"./en-ZW.js":621,"./es-AR.js":622,"./es-BO.js":623,"./es-CL.js":624,"./es-CO.js":625,"./es-CR.js":626,"./es-DO.js":627,"./es-EC.js":628,"./es-ES.js":629,"./es-GT.js":630,"./es-HN.js":631,"./es-MX.js":632,"./es-NI.js":633,"./es-PA.js":634,"./es-PE.js":635,"./es-PR.js":636,"./es-PY.js":637,"./es-SV.js":638,"./es-UY.js":639,"./es-VE.js":640,"./et-EE.js":641,"./eu-ES.js":642,"./fa-IR.js":643,"./fi-FI.js":644,"./fo-FO.js":645,"./fr-BE.js":646,"./fr-CA.js":647,"./fr-CH.js":648,"./fr-FR.js":649,"./fr-LU.js":650,"./fr-MC.js":651,"./gl-ES.js":652,"./gu-IN.js":653,"./he-IL.js":654,"./hi-IN.js":655,"./hr-BA.js":656,"./hr-HR.js":657,"./hu-HU.js":658,"./hy-AM.js":659,"./id-ID.js":660,"./is-IS.js":661,"./it-CH.js":662,"./it-IT.js":663,"./ja-JP.js":664,"./ka-GE.js":665,"./kk-KZ.js":666,"./kn-IN.js":667,"./ko-KR.js":668,"./kok-IN.js":669,"./ky-KG.js":670,"./lt-LT.js":671,"./lv-LV.js":672,"./mi-NZ.js":673,"./mk-MK.js":674,"./mn-MN.js":675,"./mr-IN.js":676,"./ms-BN.js":677,"./ms-MY.js":678,"./mt-MT.js":679,"./nb-NO.js":680,"./nl-BE.js":681,"./nl-NL.js":682,"./nn-NO.js":683,"./ns-ZA.js":684,"./pa-IN.js":685,"./pl-PL.js":686,"./pt-BR.js":687,"./pt-PT.js":688,"./quz-BO.js":689,"./quz-EC.js":690,"./quz-PE.js":691,"./ro-RO.js":692,"./ru-RU.js":693,"./sa-IN.js":694,"./se-FI.js":695,"./se-NO.js":696,"./se-SE.js":697,"./sk-SK.js":698,"./sl-SI.js":699,"./sma-NO.js":700,"./sma-SE.js":701,"./smj-NO.js":702,"./smj-SE.js":703,"./smn-FI.js":704,"./sms-FI.js":705,"./sq-AL.js":706,"./sr-Cyrl-BA.js":707,"./sr-Cyrl-CS.js":708,"./sr-Latn-BA.js":709,"./sr-Latn-CS.js":710,"./sv-FI.js":711,"./sv-SE.js":712,"./sw-KE.js":713,"./syr-SY.js":714,"./ta-IN.js":715,"./te-IN.js":716,"./th-TH.js":717,"./tn-ZA.js":718,"./tr-TR.js":719,"./tt-RU.js":720,"./uk-UA.js":721,"./ur-PK.js":722,"./uz-Cyrl-UZ.js":723,"./uz-Latn-UZ.js":724,"./vi-VN.js":725,"./xh-ZA.js":726,"./zh-CN.js":727,"./zh-HK.js":728,"./zh-MO.js":729,"./zh-SG.js":730,"./zh-TW.js":731,"./zu-ZA.js":732};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=576},744:function(e,t,a){},745:function(e,t,a){},746:function(e,t,a){},748:function(e,t,a){},749:function(e,t,a){},754:function(e,t){},756:function(e,t){},796:function(e,t){},797:function(e,t){},930:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(32),o=a.n(s),i=(a(528),a(11)),l=a.n(i),c=a(23),u=a(12),m=a(13),p=a(8),h=a(14),d=a(15),f=a(142),g=a.n(f);g.a.defaults.baseURL="http://localhost:8080/timely/api/",g.a.defaults.baseURL="http://timely-server-timely-wildfly.apps.shift.infoteach.ca/api/";var b=function(e){return e.data},v=function(e){return{headers:{Authorization:"Bearer "+e}}},E=function(e,t){return g.a.get(e,v(t)).then(b)},j=function(e,t,a){return g.a.post(e,a,v(t)).then(b)},y=function(e,t,a){return g.a.put(e,a,v(t)).then(b)},k=function(e,t){return g.a.post(e,t).then(b)},w={getEmployeeById:function(e,t){return E("/emps/".concat(e),t)},getAllEmployees:function(e){return E("/emps",e)},createEmployee:function(e,t){return j("/emps/",e,t)},updateEmployee:function(e,t,a){return y("/emps/".concat(e),t,a)},getCurrentUser:function(e,t){return E("/emps/".concat(e),t)},getEmployeesBySupervisor:function(e,t){return E("/emps/supervisor/".concat(e),t)}},O={login:function(e){return k("/tokens",e)}},_={getAllProjects:function(e){return E("/projects",e)},getProjectsForUser:function(e,t){return E("/projects/emp/".concat(e),t)},getProjectsForSupervisor:function(e,t){return E("projects/supervisor/".concat(e),t)},createProject:function(e,t){return j("/projects/createProject",t,e)},updateProject:function(e,t){return j("/projects/updateProject/",t,e)},getDetailsById:function(e,t){return E("/projects/projectDetails/".concat(e),t)},getById:function(e,t){return E("/projects/".concat(e),t)}},N={getAllTimesheetsByEmp:function(e,t){return E("/emps/".concat(e,"/timesheets/"),t)},getAllCloseTimesheetsByEmp:function(e,t){return E("/emps/".concat(e,"/close_timesheets"),t)},getTimesheetById:function(e,t,a){return E("/emps/".concat(e,"/timesheets/").concat(a),t)},createCurrentWeekTimesheet:function(e,t,a){return j("emps/".concat(e,"/timesheets/"),t,a)},getTimesheetsByEmps:function(e,t){return E("/timesheets/getForEmps/".concat(e),t)},updateTimesheetById:function(e,t,a,n){return y("/emps/".concat(e,"/timesheets/").concat(a),t,n)}},S={getYearlyRate:function(e){return E("/yearlyRate",e)}},C={createWorkpackage:function(e,t){return j("/workpackages/createWP",t,e)},getAllWorkpackageFromRE:function(e,t){return E("/workpackages/RE/".concat(e),t)}},x={createNewPlan:function(e,t){return j("/workpackageplans",t,e)}},D=a(51),I=a(139),T=a(60),P=a.n(T),L=a(421),A=a(7),H=a(349),F=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleClick=function(){if(0==n.props.states.timesheets.length)n.createCurrentTimesheet();else if(n.hasCurrentTimesheet()){var e=n.props.states.timesheets[0][0],t=n.props.states.timesheets[0][1],a=n.props.states.timesheets[0][2];n.props.history.push("/dashboard/timesheet/".concat(e)),localStorage.setItem("timesheetId",e),localStorage.setItem("weekNumber",t),localStorage.setItem("weekEnding",a)}else n.createCurrentTimesheet()},n.createCurrentTimesheet=n.createCurrentTimesheet.bind(Object(p.a)(n)),n.hasCurrentTimesheet=n.hasCurrentTimesheet.bind(Object(p.a)(n)),n.currentDate=n.currentDate.bind(Object(p.a)(n)),n.handleClick=n.handleClick.bind(Object(p.a)(n)),n.currentWeekNumber=n.currentWeekNumber.bind(Object(p.a)(n)),n.getFridayOfCurrentWeek=n.getFridayOfCurrentWeek.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"currentDate",value:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"getFridayOfCurrentWeek",value:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1),a=t.getDate()-t.getDay()-1+6;return new Date(e.setDate(a))}},{key:"currentWeekNumber",value:function(){var e=new Date,t=new Date(e.getFullYear(),0,1),a=(e.getTime()-t.getTime())/864e5;return Math.ceil((a+t.getDay()+1.1)/7)}},{key:"hasCurrentTimesheet",value:function(){var e=this.props.states.timesheets;return!(this.currentWeekNumber()-e[0][1]>0)}},{key:"createCurrentTimesheet",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i,c,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),a=localStorage.getItem("token"),n=t.employee_id,e.next=5,w.getCurrentUser(n,a);case 5:return r=e.sent,s=r.labor_grade_id.labor_grade_id,o=(new Date).getFullYear(),i=this.currentWeekNumber(),c=this.getFridayOfCurrentWeek(),u={labor_grade_id:s,year:o,week:i,week_ending:c,status:"OPEN",approver_id:3,approve_date:null,attribute1:null,details:[{project_code:" ",work_package_id:" ",saturday:0,sunday:0,monday:0,tuesday:0,wednesday:0,thursday:0,friday:0,notes:"",project_wp:"PJT38001_1L"}]},e.next=13,N.createCurrentWeekTimesheet(n,a,u);case 13:e.sent,this.props.fetchTimesheets();case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{title:"Create Current Timesheet"},r.a.createElement(H.a,{className:e.iconButton,onClick:this.handleClick,color:"primary",variant:"contained"},"Current Timesheet")))}}]),a}(r.a.Component),M=Object(A.a)({iconButton:{marginLeft:30}},{name:"CurrentTimesheetToolBar"})(F),R=(a(561),[{name:"timesheetid",label:"Timesheet ID",className:"column",options:{filter:!1}},{name:"weeknumber",label:"Week Number",className:"column",options:{filter:!1}},{name:"weekending",label:"Week Ending",className:"column",options:{sort:!0,filter:!1}},{name:"status",label:"Status",className:"column",options:{filter:!0}}]),W=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={timesheets:[],loadedUserID:{}},n.fetchTimesheets=n.fetchTimesheets.bind(Object(p.a)(n)),n.formatWeekEnding=n.formatWeekEnding.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchTimesheets(),this.formatWeekEnding()}},{key:"fetchTimesheets",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i,c,u,m,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),a=localStorage.getItem("token"),n=t.employee_id,e.next=5,N.getAllTimesheetsByEmp(n,a);case 5:if(0!=(r=e.sent).length){for(s=[],o=0;o<r.length;o++)i=r[o].timesheet_id,c=r[o].week,u=this.formatWeekEnding(r[o].week_ending),m=r[o].status,(p=[]).push(i),p.push(c),p.push(u),p.push(m),s.push(p);s.sort((function(e,t){return t[1]-e[1]})),this.setState({timesheets:s,loadedUserID:n})}else console.log("no timesheets");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formatWeekEnding",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:"datatable",title:r.a.createElement("h1",null,"Timesheet"),options:(e=this.props,t=this.state,a=this.fetchTimesheets,{selectableRows:!1,search:!0,print:!1,download:!1,rowHover:!0,onRowClick:function(t){console.log(t),e.history.push("/dashboard/timesheet/".concat(t[0])),localStorage.setItem("timesheetId",t[0])},customToolbar:function(){return r.a.createElement(M,Object.assign({},e,{fetchTimesheets:a,states:t}))}}),columns:R,data:this.state.timesheets}));var e,t,a}}]),a}(n.Component),B=a(416),U=a(417),V=a(418),z=a(978),G=a(420),K=a(419),J=(a(562),a(356)),Y=a.n(J),Z=a(492),q=a.n(Z),X=a(140),Q=a(104),$=a.n(Q),ee=a(423),te=a(430),ae=a(365);function ne(e){var t=Object(ae.useSnackbar)().enqueueSnackbar,a=e.config,n=t(a.message,{variant:a.variant,autoHideDuration:2500});return r.a.createElement(r.a.Fragment,null,n)}function re(e){return r.a.createElement(ae.SnackbarProvider,{preventDuplicate:!0},r.a.createElement(ne,e))}var se=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).addRow=function(){var e=n.state.timesheetrows,t=[];t.push(""),t.push(""),t.push(""),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(""),t.push("PJT19257_2"),e.push(t),n.setState({timesheetrows:e})},n.deleteRow=function(e){var t=n.state.timesheetrows.filter((function(t,a){return a!==e})),a=n.totalHourWeek(t),r=[n.totalSat(t),n.totalSun(t),n.totalMon(t),n.totalTue(n.state.timesheetrows),n.totalWed(t),n.totalThu(t),n.totalFri(t)];n.setState({timesheetrows:t,totalWeek:a,totalDay:r})},n.gotoTimesheetDetail=function(){if(1==n.props.dashboardTimesheet&&0!=n.state.timesheetrows.length){var e=n.state.loadedTimesheet.timesheet_id;localStorage.setItem("timesheetId",e),n.props.history.push("/dashboard/timesheet/".concat(e))}},n.timesheetRow=function(e,t){return r.a.createElement(K.a,{key:t},r.a.createElement(V.a,{scope:"row"},n.state.isEditable?n.state.projectCodes.length>0?r.a.createElement(te.a,{select:!0,className:"projCode",id:"projCode"+t,value:e[1],onChange:function(a){return n.onProjCodeSelect(a,e,1,t)}},n.state.projectCodes.map((function(e,t){return r.a.createElement(ee.a,{key:e,value:e},e)}))):"No Project":e[1]),r.a.createElement(V.a,{align:"right"},n.state.isEditable?n.state.projectCodes.length>0?r.a.createElement(te.a,{select:!0,className:"wpId",id:"wpId"+t,value:e[2],onChange:function(a){return n.onWpIdSelect(a,e,2,t)}},n.state.wpIds.map((function(e,t){return r.a.createElement(ee.a,{key:e,value:e},e)}))):"No WorkPackages":e[2]),r.a.createElement(V.a,{align:"right"},n.ccyFormat(e[3])),r.a.createElement(V.a,{align:"right"},n.state.isEditable?r.a.createElement($.a,{html:n.ccyFormat(e[4]),"data-column":"item",className:"content-editable",onKeyDown:n.checkKey,onChange:function(a){return n.handleContentChange(a,e,t,4)}}):n.ccyFormat(e[4])),r.a.createElement(V.a,{align:"right"},n.state.isEditable?r.a.createElement($.a,{html:n.ccyFormat(e[5]),"data-column":"item",className:"content-editable",onKeyDown:n.checkKey,onChange:function(a){return n.handleContentChange(a,e,t,5)}}):n.ccyFormat(e[5])),r.a.createElement(V.a,{align:"right"},n.state.isEditable?r.a.createElement($.a,{html:n.ccyFormat(e[6]),"data-column":"item",className:"content-editable",onKeyDown:n.checkKey,onChange:function(a){return n.handleContentChange(a,e,t,6)}}):n.ccyFormat(e[6])),r.a.createElement(V.a,{align:"right"},n.state.isEditable?r.a.createElement($.a,{html:n.ccyFormat(e[7]),"data-column":"item",className:"content-editable",onKeyDown:n.checkKey,onChange:function(a){return n.handleContentChange(a,e,t,7)}}):n.ccyFormat(e[7])),r.a.createElement(V.a,{align:"right"},n.state.isEditable?r.a.createElement($.a,{html:n.ccyFormat(e[8]),"data-column":"item",className:"content-editable",onKeyDown:n.checkKey,onChange:function(a){return n.handleContentChange(a,e,t,8)}}):n.ccyFormat(e[8])),r.a.createElement(V.a,{align:"right"},n.state.isEditable?r.a.createElement($.a,{html:n.ccyFormat(e[9]),"data-column":"item",className:"content-editable",onKeyDown:n.checkKey,onChange:function(a){return n.handleContentChange(a,e,t,9)}}):n.ccyFormat(e[9])),r.a.createElement(V.a,{align:"right"},n.state.isEditable?r.a.createElement($.a,{html:n.ccyFormat(e[10]),"data-column":"item",className:"content-editable",onKeyDown:n.checkKey,onChange:function(a){return n.handleContentChange(a,e,t,10)}}):n.ccyFormat(e[10])),r.a.createElement(V.a,{align:"right"},n.state.isEditable?r.a.createElement($.a,{html:e[11],"data-column":"item",className:"content-editable",onKeyDown:n.checkKey,onChange:function(a){return n.handleContentChange(a,e,t,11)}}):e[11]),n.state.isEditable?r.a.createElement(V.a,{align:"right"},r.a.createElement(Y.a,{onClick:function(){n.deleteRow(t)}})):null)},n.state={timesheetrows:[],loadUser:{},totalWeek:{},totalDay:[],totalOver:{},totalOverDays:[],loadedTimesheet:{},isEditable:{},overtime:0,flextime:0,projectCodes:[],wpIds:[],errorAlert:!1,successAlert:!1},n.fetchTimesheetRows=n.fetchTimesheetRows.bind(Object(p.a)(n)),n.addRow=n.addRow.bind(Object(p.a)(n)),n.totalHourRow=n.totalHourRow.bind(Object(p.a)(n)),n.totalSat=n.totalSat.bind(Object(p.a)(n)),n.totalSun=n.totalSun.bind(Object(p.a)(n)),n.totalMon=n.totalMon.bind(Object(p.a)(n)),n.totalTue=n.totalTue.bind(Object(p.a)(n)),n.totalWed=n.totalWed.bind(Object(p.a)(n)),n.totalThu=n.totalThu.bind(Object(p.a)(n)),n.totalFri=n.totalFri.bind(Object(p.a)(n)),n.totalHourWeek=n.totalHourWeek.bind(Object(p.a)(n)),n.ccyFormat=n.ccyFormat.bind(Object(p.a)(n)),n.formatWeekEnding=n.formatWeekEnding.bind(Object(p.a)(n)),n.gotoTimesheetDetail=n.gotoTimesheetDetail.bind(Object(p.a)(n)),n.isEditable=n.isEditable.bind(Object(p.a)(n)),n.deleteRow=n.deleteRow.bind(Object(p.a)(n)),n.updateTS=n.updateTS.bind(Object(p.a)(n)),n.submitTS=n.submitTS.bind(Object(p.a)(n)),n.handleContentChange=n.handleContentChange.bind(Object(p.a)(n)),n.handleOverFlexTime=n.handleOverFlexTime.bind(Object(p.a)(n)),n.checkKey=n.checkKey.bind(Object(p.a)(n)),n.hasProject=n.hasProject.bind(Object(p.a)(n)),n.onProjCodeSelect=n.onProjCodeSelect.bind(Object(p.a)(n)),n.onWpIdSelect=n.onWpIdSelect.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchTimesheetRows()}},{key:"isEditable",value:function(){var e=!1;"OPEN"==this.state.loadedTimesheet.status&&void 0==this.props.dashboardTimesheet&&(e=!0),this.setState({isEditable:e})}},{key:"fetchTimesheetRows",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i,c,u,m,p,h,d,f,g,b,v,E,j,y,k,O,S,C,x,D,I,T,P,L,A,H,F,M,R,W,B,U,V,z,G,K,J,Y,Z,q,X;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=this.props.dashboardTimesheet){e.next=9;break}r=JSON.parse(sessionStorage.getItem("user")),t=r.employee_id,a=localStorage.getItem("token"),n=localStorage.getItem("timesheetId"),this.setState({loadUser:r}),e.next=23;break;case 9:if(null==this.props.token){e.next=23;break}return t=this.props.userId,a=this.props.token,e.next=14,_.getProjectsForUser(t,a);case 14:return s=e.sent,e.next=17,w.getCurrentUser(this.props.userId,this.props.token);case 17:return o=e.sent,this.setState({loadUser:o}),e.next=21,N.getAllTimesheetsByEmp(t,a);case 21:if(0!=(i=e.sent).length){for(c=[],u=0;u<i.length;u++)m=i[u].timesheet_id,p=i[u].week,h=this.formatWeekEnding(i[u].week_ending),d=i[u].status,f=null==i[u].attribute1?"0|0":i[u].attribute1,(g=[]).push(m),g.push(p),g.push(h),g.push(d),g.push(f),c.push(g);c.sort((function(e,t){return t[1]-e[1]})),n=c[0][0],this.props.fetchProject(s,o,c[0][4])}else this.props.fetchProject(s,o,"0|0"),console.log("no timesheets");case 23:if(null==t||null==a||null==n){e.next=56;break}return e.next=26,N.getTimesheetById(t,a,n);case 26:if(b=e.sent,v=null==b.attribute1?"0|0":b.attribute1,E=v.split("|"),j=parseFloat(E[0]),y=parseFloat(E[1]),this.setState({loadedTimesheet:b,overtime:j,flextime:y}),this.isEditable(),0!=b.details.length){for(k=b.details,O=[],S=0;S<k.length;S++)C=k[S].timesheet_row_id,x=k[S].project_code,D=k[S].work_package_id,I=k[S].saturday,T=k[S].sunday,P=k[S].monday,L=k[S].tuesday,A=k[S].wednesday,H=k[S].thursday,F=k[S].friday,M=k[S].notes,R=k[S].project_wp,W=this.totalHourRow(I,T,P,L,A,H,F),(B=[]).push(C),B.push(x),B.push(D),B.push(W),B.push(I),B.push(T),B.push(P),B.push(L),B.push(A),B.push(H),B.push(F),B.push(M),B.push(R),O.push(B);this.setState({timesheetrows:O}),U=this.totalHourWeek(this.state.timesheetrows),V=[this.totalSat(this.state.timesheetrows),this.totalSun(this.state.timesheetrows),this.totalMon(this.state.timesheetrows),this.totalTue(this.state.timesheetrows),this.totalWed(this.state.timesheetrows),this.totalThu(this.state.timesheetrows),this.totalFri(this.state.timesheetrows)],this.setState({totalWeek:U,totalDay:V})}if(!this.state.isEditable){e.next=54;break}return e.next=37,_.getProjectsForUser(t,a);case 37:for(z=e.sent,G=[],K=0;K<z.length;K++)"OPEN"==z[K].status&&G.push(z[K].project_code);if(!(G.length>0)){e.next=54;break}this.setState({projectCodes:G}),J=[],Y=[],Z=0;case 44:if(!(Z<G.length)){e.next=53;break}return e.next=47,_.getDetailsById(G[Z],a);case 47:for(q=e.sent,X=0;X<q.wpList.length;X++)1==q.wpList[X].is_open&&"L"==q.wpList[X].work_package_id.substring(q.wpList[X].work_package_id.length-1)&&Y.push(q.wpList[X].work_package_id);Y.length>0&&(J=Y);case 50:Z++,e.next=44;break;case 53:this.setState({wpIds:J});case 54:e.next=57;break;case 56:document.getElementById("timesheetDetailContainer").innerHTML="Sorry, you don't have any timesheet records in the database!";case 57:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ccyFormat",value:function(e){return(Math.round(10*e)/10).toFixed(1)}},{key:"totalHourRow",value:function(e,t,a,n,r,s,o){return e+t+a+n+r+s+o}},{key:"totalSat",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][4];return t}},{key:"totalSun",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][5];return t}},{key:"totalMon",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][6];return t}},{key:"totalTue",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][7];return t}},{key:"totalWed",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][8];return t}},{key:"totalThu",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][9];return t}},{key:"totalFri",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][10];return t}},{key:"totalHourWeek",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][3];return t}},{key:"formatWeekEnding",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"updateTS",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i,c,u,m,p,h,d,f,g,b,v,E,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("Updating Timesheet"),t=[],n=0;n<this.state.timesheetrows.length;n++)r=this.state.timesheetrows[n][0],s=this.state.timesheetrows[n][1],o=this.state.timesheetrows[n][2],i=this.state.timesheetrows[n][4],c=this.state.timesheetrows[n][5],u=this.state.timesheetrows[n][6],m=this.state.timesheetrows[n][7],p=this.state.timesheetrows[n][8],h=this.state.timesheetrows[n][9],d=this.state.timesheetrows[n][10],f=this.state.timesheetrows[n][11],a=""!=r?{timesheet_row_id:r,project_code:s,work_package_id:o,saturday:i,sunday:c,monday:u,tuesday:m,wednesday:p,thursday:h,friday:d,notes:f,project_wp:s+"_"+o}:{project_code:s,work_package_id:o,saturday:i,sunday:c,monday:u,tuesday:m,wednesday:p,thursday:h,friday:d,notes:f,project_wp:s+"_"+o},t.push(a);return g=this.state.overtime+"|"+this.state.flextime,b={timesheet_id:this.state.loadedTimesheet.timesheet_id,labor_grade_id:this.state.loadedTimesheet.labor_grade_id,year:this.state.loadedTimesheet.year,week:this.state.loadedTimesheet.week,week_ending:this.state.loadedTimesheet.week_ending,status:"OPEN",approver_id:this.state.loadedTimesheet.approver_id,approve_date:this.state.loadedTimesheet.approve_date,attribute1:g,details:t},v=this.state.loadUser.employee_id,E=localStorage.getItem("token"),j=this.state.loadedTimesheet.timesheet_id,console.log(b),e.next=11,N.updateTimesheetById(v,E,j,b);case 11:"exception throw"==e.sent&&alert("Porjct and Wp don't match, please check again");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"submitTS",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i,c,u,m,p,h,d,f,g,b,v,E,j,y=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("Submitting Timesheet"),t=[],n=0;n<this.state.timesheetrows.length;n++)r=this.state.timesheetrows[n][0],s=this.state.timesheetrows[n][1],o=this.state.timesheetrows[n][2],i=this.state.timesheetrows[n][4],c=this.state.timesheetrows[n][5],u=this.state.timesheetrows[n][6],m=this.state.timesheetrows[n][7],p=this.state.timesheetrows[n][8],h=this.state.timesheetrows[n][9],d=this.state.timesheetrows[n][10],f=this.state.timesheetrows[n][11],a=""!=r?{timesheet_row_id:r,project_code:s,work_package_id:o,saturday:i,sunday:c,monday:u,tuesday:m,wednesday:p,thursday:h,friday:d,notes:f,project_wp:s+"_"+o}:{project_code:s,work_package_id:o,saturday:i,sunday:c,monday:u,tuesday:m,wednesday:p,thursday:h,friday:d,notes:f,project_wp:s+"_"+o},t.push(a);return g=this.state.overtime+"|"+this.state.flextime,b={timesheet_id:this.state.loadedTimesheet.timesheet_id,labor_grade_id:this.state.loadedTimesheet.labor_grade_id,year:this.state.loadedTimesheet.year,week:this.state.loadedTimesheet.week,week_ending:this.state.loadedTimesheet.week_ending,status:"CLOSE",approver_id:this.state.loadedTimesheet.approver_id,approve_date:this.state.loadedTimesheet.approve_date,attribute1:g,details:t},v=this.state.loadUser.employee_id,E=localStorage.getItem("token"),j=this.state.loadedTimesheet.timesheet_id,console.log(b),e.prev=9,e.next=12,N.updateTimesheetById(v,E,j,b);case 12:e.sent||this.fetchTimesheetRows(),this.setState({successAlert:!0}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),this.setState({errorAlert:!0});case 20:setTimeout((function(){y.setState({successAlert:!1,errorAlert:!1}),y.props.history.push("/dashboard/timesheet/")}),1e3);case 21:case"end":return e.stop()}}),e,this,[[9,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleContentChange",value:function(e,t,a,n){if(n>3&&n<11){t[n]=parseFloat(this.ccyFormat(e.target.value)),t[3]=t[4]+t[5]+t[6]+t[7]+t[8]+t[9]+t[10];var r=this.totalHourWeek(this.state.timesheetrows),s=[this.totalSat(this.state.timesheetrows),this.totalSun(this.state.timesheetrows),this.totalMon(this.state.timesheetrows),this.totalTue(this.state.timesheetrows),this.totalWed(this.state.timesheetrows),this.totalThu(this.state.timesheetrows),this.totalFri(this.state.timesheetrows)];this.setState({totalWeek:r,totalDay:s})}else t[n]=e.target.value}},{key:"checkKey",value:function(e){13===e.keyCode&&e.preventDefault()}},{key:"hasProject",value:function(){return this.state.projectCodes.length>0}},{key:"onProjCodeSelect",value:function(e,t,a,n){t[a]=e.target.value,this.setState({})}},{key:"onWpIdSelect",value:function(e,t,a,n){t[a]=e.target.value,this.setState({})}},{key:"handleOverFlexTime",value:function(e,t){"over"==t&&this.setState({overtime:e.target.value}),"flex"==t&&this.setState({flextime:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(X.a,{elevation:2,className:"container",onClick:function(){e.gotoTimesheetDetail()}},this.state.errorAlert?r.a.createElement(re,{config:{message:"Timesheet Submission Failed",variant:"error"}}):null,this.state.successAlert?r.a.createElement(re,{config:{message:"Timesheet Submission Successful!",variant:"success"}}):null,r.a.createElement("div",{className:"timesheetTitle"},r.a.createElement("div",{className:"attributeRow"},r.a.createElement("div",{className:"empNumContainer"},r.a.createElement("div",{className:"empNumTitle"},"Employee Number:"),r.a.createElement("div",{className:"empNum"},this.state.loadUser.employee_id)),r.a.createElement("div",{className:"weekNumContainer"},r.a.createElement("div",{className:"weekNumTitle"},"Week Number:"),r.a.createElement("div",{className:"weekNum"},this.state.loadedTimesheet.week)),r.a.createElement("div",{className:"weekEndContainer"},r.a.createElement("div",{className:"weekEndTitle"},"Week Ending:"),r.a.createElement("div",{className:"weekEnd"},this.formatWeekEnding(this.state.loadedTimesheet.week_ending))),this.state.isEditable?r.a.createElement(q.a,{fontSize:"large",onClick:this.addRow,color:"primary",variant:"contained"}):null),this.props.dashboardTimesheet?null:r.a.createElement("div",{className:"empNameAttribute"},r.a.createElement("div",{className:"empNameTitle"},"Name:"),r.a.createElement("div",{className:"empName"},this.state.loadUser.first_name," ",this.state.loadUser.last_name))),r.a.createElement(z.a,{className:t.timesheetTable},r.a.createElement(B.a,{className:t.table,"aria-label":"simple table"},r.a.createElement(G.a,null,r.a.createElement(K.a,null,r.a.createElement(V.a,{id:"proj",className:t.tableTitle},"Project"),r.a.createElement(V.a,{id:"wp",align:"right",className:t.tableTitle},"WP"),r.a.createElement(V.a,{id:"tol",align:"right",className:t.tableTitle},"Total"),r.a.createElement(V.a,{id:"sat",align:"right",className:t.tableTitle},"Sat"),r.a.createElement(V.a,{id:"sun",align:"right",className:t.tableTitle},"Sun"),r.a.createElement(V.a,{id:"mon",align:"right",className:t.tableTitle},"Mon"),r.a.createElement(V.a,{id:"tue",align:"right",className:t.tableTitle},"Tue"),r.a.createElement(V.a,{id:"wed",align:"right",className:t.tableTitle},"Wed"),r.a.createElement(V.a,{id:"thu",align:"right",className:t.tableTitle},"Thu"),r.a.createElement(V.a,{id:"fri",align:"right",className:t.tableTitle},"Fri"),r.a.createElement(V.a,{id:"notes",align:"right",className:t.tableTitle},"Notes"))),r.a.createElement(U.a,null,this.state.timesheetrows.map((function(t,a){return e.timesheetRow(t,a)})),r.a.createElement(K.a,null,r.a.createElement(V.a,{className:t.tableTitle},"Total"),r.a.createElement(V.a,{colSpan:2,align:"right"},this.ccyFormat(this.state.totalWeek)),r.a.createElement(V.a,{align:"right"},this.ccyFormat(this.state.totalDay[0])),r.a.createElement(V.a,{align:"right"},this.ccyFormat(this.state.totalDay[1])),r.a.createElement(V.a,{align:"right"},this.ccyFormat(this.state.totalDay[2])),r.a.createElement(V.a,{align:"right"},this.ccyFormat(this.state.totalDay[3])),r.a.createElement(V.a,{align:"right"},this.ccyFormat(this.state.totalDay[4])),r.a.createElement(V.a,{align:"right"},this.ccyFormat(this.state.totalDay[5])),r.a.createElement(V.a,{align:"right"},this.ccyFormat(this.state.totalDay[6]))),r.a.createElement(K.a,null,r.a.createElement(V.a,{colSpan:2,className:t.tableTitle},"Overtime"),r.a.createElement(V.a,{align:"right"},this.state.isEditable?r.a.createElement($.a,{html:this.ccyFormat(this.state.overtime),"data-column":"item",className:"content-editable",onKeyDown:this.checkKey,onChange:function(t){return e.handleOverFlexTime(t,"over")}}):this.ccyFormat(this.state.overtime))),r.a.createElement(K.a,null,r.a.createElement(V.a,{colSpan:2,className:t.tableTitle},"Flextime"),r.a.createElement(V.a,{align:"right"},this.state.isEditable?r.a.createElement($.a,{html:this.ccyFormat(this.state.flextime),"data-column":"item",className:"content-editable",onKeyDown:this.checkKey,onChange:function(t){return e.handleOverFlexTime(t,"flex")}}):this.ccyFormat(this.state.flextime)))))),this.state.isEditable&&this.hasProject()?r.a.createElement("div",{className:t.updateSubmitButton},r.a.createElement(H.a,{onClick:this.updateTS,color:"primary",variant:"contained"},"Update"),r.a.createElement(H.a,{className:t.submitButton,onClick:this.submitTS,color:"secondary",variant:"contained"},"Submit")):null)}}]),a}(n.Component),oe=Object(A.a)((function(e){return{table:{width:"93%"},timesheetTable:{width:"100%",maxHeight:"420px",display:"flex",justifyContent:"center"},tableTitle:{fontWeight:"bold",fontSize:"10pt !important"},updateSubmitButton:{position:"absolute",margin:"0 0 0 780px"},submitButton:{marginLeft:25}}}),{withTheme:!0})(se),ie=a(39),le=a(491),ce=a(493),ue=a.n(ce);function me(e){var t=r.a.useState(null),a=Object(ie.a)(t,2),n=a[0],s=a[1],o=function(){s(null)};return r.a.createElement("div",null,r.a.createElement(ue.a,{onClick:function(e){s(e.currentTarget)},"aria-controls":"simple-menu","aria-haspopup":"true"}),r.a.createElement(le.a,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:o},r.a.createElement(D.b,{to:e.link,style:{textDecoration:"none",color:"black"}},r.a.createElement(ee.a,null," Edit ")," "),null==e.employee.end_date?r.a.createElement(ee.a,{onClick:function(){e.handleArchive(e.id,e.employee),o()}},"Archive"):r.a.createElement(ee.a,{onClick:function(){e.handleOpen(e.id,e.employee),o()}},"Open")))}var pe=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{title:"Add an Employee"},r.a.createElement(H.a,{className:e.iconButton,onClick:this.props.handleCreate,color:"primary",variant:"contained"},"Create")))}}]),a}(r.a.Component),he=Object(A.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(pe),de=a(962),fe=a(69),ge=a.n(fe),be=a(984),ve=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"face",value:function(e){return r.a.createElement("div",null,r.a.createElement(be.a,{className:e.avatar,alt:"employee photo"},r.a.createElement(ge.a,{onClick:this.props.handleClick,className:e.faceIcon})))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.avatar;return this.face(t,a)}}]),a}(n.Component),Ee=Object(A.a)((function(){return{faceIcon:{width:"100%",height:"100%"}}}),{withTheme:!0})(ve);a(431);var je=[{name:"photo",label:"Photo",className:"column"},{name:"employeeId",label:"ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"},{name:"startDate",label:"Start Date",className:"column"},{name:"endDate",label:"End Date",className:"column"},{name:"laborGrade",label:"Labor Grade",className:"column"},{name:"vacation",label:"Vacation Days",className:"column"},{name:"supervisor",label:"Supervisor",className:"column"},{name:"edit",label:"Edit",className:"column"}],ye=function(e,t){var a=e.history;return{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,customToolbar:function(){return r.a.createElement(he,{history:a,handleCreate:t})},textLabels:{body:{noMatch:r.a.createElement(de.a,null)}}}},ke=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleCreate=function(){n.props.history.push("/dashboard/hr/create")},n.handleArchive=function(){var e=Object(c.a)(l.a.mark((function e(t,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(new Date).getTime(),a.end_date=r,e.next=4,w.updateEmployee(t,n.state.token,a);case 4:n.fetchData(n.state.token);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.handleOpen=function(){var e=Object(c.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.end_date=null,e.next=3,w.updateEmployee(t,n.state.token,a);case 3:n.fetchData(n.state.token);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={data:[],token:null},n.fetchData=n.fetchData.bind(Object(p.a)(n)),n.handleCreate=n.handleCreate.bind(Object(p.a)(n)),n.handleArchive=n.handleArchive.bind(Object(p.a)(n)),n.handleOpen=n.handleOpen.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.setState({token:e}),this.fetchData(e)}},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,w.getAllEmployees(t);case 3:a=e.sent,n=[],a.forEach(function(){var e=Object(c.a)(l.a.mark((function e(t){var a,o,i,c,u,m,p,h,d,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.employee_id,o=t.first_name,i=t.last_name,c=new Date(t.start_date).toString("MMM dd"),u=t.end_date,m=t.labor_grade_id.labor_grade_id,p=t.vacation,h=t.supervisor_id,d=null==u?r.a.createElement("p",{style:{color:"green"}}," Currently Employed "):r.a.createElement("p",{style:{color:"red"}}," Archived "),(f=[]).push(r.a.createElement(Ee,{avatar:{width:25,height:25,margin:"0 auto"}})),f.push(a),f.push(o),f.push(i),f.push(c),f.push(d),f.push(m),f.push(p),f.push(h),f.push(r.a.createElement(me,{link:"/dashboard/hr/".concat(a),id:a,employee:t,handleArchive:s.handleArchive,handleOpen:s.handleOpen})),n.push(f);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({data:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:"datatable",title:r.a.createElement("h1",null," Manage Employees"),options:ye(this.props,this.handleCreate),columns:je,data:this.state.data}))}}]),a}(n.Component),we=Object(A.a)((function(){return{pictureUrl:{width:50}}}),{withTheme:!0})(ke),Oe=a(29),_e=(a(744),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={employee_id:null,password:""},n.updateInputValue=n.updateInputValue.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"updateInputValue",value:function(e){e.preventDefault(),this.setState(Object(Oe.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement(X.a,{className:"loginWrapper",elevation:2},r.a.createElement("p",{className:"prjMng"},"Timely"),r.a.createElement("div",{className:"loginContainer"},r.a.createElement("div",{className:"loginHint"},"Login"),r.a.createElement("form",{className:"loginForm",onSubmit:function(t){return e.props.loginHandler(t,{id:e.state.employee_id,password:e.state.password})}},r.a.createElement("div",{className:"loginEmail"},r.a.createElement("input",{className:"loginInputs",name:"employee_id",placeholder:"Employee Id",required:!0,autoFocus:!0,onChange:this.updateInputValue})),r.a.createElement("div",{className:"loginPwd"},r.a.createElement("input",{className:"loginInputs",type:"password",name:"password",placeholder:"Password",required:!0,onChange:this.updateInputValue})),r.a.createElement("div",{className:"loginBsection"},r.a.createElement("button",{className:"loginBtn",type:"submit"}," Login ")))))}}]),a}(n.Component)),Ne=a(960),Se=a(424),Ce=a(271),xe=a(103),De=a(495),Ie=a.n(De),Te=a(968);function Pe(e){var t=r.a.useState(null),a=Object(ie.a)(t,2),n=a[0],s=a[1],o=function(){s(null)};return r.a.createElement("div",null,r.a.createElement(Ee,{handleClick:function(e){s(e.currentTarget)},avatar:{width:30,height:30,margin:"0 auto"}}),r.a.createElement(le.a,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:o},r.a.createElement(D.b,{to:"/dashboard/profile/".concat(e.loadedUser.employee_id),style:{textDecoration:"none",color:"black"}},r.a.createElement(ee.a,{onClick:o}," Profile ")),r.a.createElement(D.b,{to:"/",style:{textDecoration:"none",color:"black"}},r.a.createElement(ee.a,{onClick:e.logoutHandler}," Logout ")," ")))}var Le=a(3),Ae=a(355),He=a.n(Ae),Fe=a(20),Me=a(513),Re=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},r.a.createElement(He.a,null)),r.a.createElement(Me.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}}))}}]),a}(n.Component),We=Object(A.a)((function(e){return{search:Object(Oe.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Fe.d)(e.palette.common.black,.15),"&:hover":{backgroundColor:Object(Fe.d)(e.palette.common.black,.15)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"black"},inputRoot:{color:"black"},inputInput:Object(Oe.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}),{withTheme:!0})(Re),Be=a(496),Ue=a.n(Be),Ve=a(983),ze=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.location,a=e.loadedUser,n=t.pathname.split("/"),s=[],o="";return n.splice(0,1),n.forEach((function(e,t){o+="/"+e,s.push(o)})),r.a.createElement("div",null,r.a.createElement(Ve.a,null,s.map((function(e,t){return r.a.createElement("div",{key:t},s.length-1===t?r.a.createElement(D.b,{style:{textDecoration:"none"},key:t,to:e},r.a.createElement(xe.a,{color:"textPrimary"}," ",e.split("/")[t+1]," ")):r.a.createElement(D.b,{key:t,to:"".concat(e,"/").concat(a.employee_id)}," ",e.split("/")[t+1]," "))}))))}}]),a}(n.Component),Ge=Object(I.g)(ze),Ke={NAVBAR_EXPANDED_WIDTH:230,NAVBAR_SHRINKED_WIDTH:100,DRAWER_EXPANDED_WIDTH:230,DRAWER_SHRINKED_WIDTH:100},Je=Ke.NAVBAR_EXPANDED_WIDTH,Ye=Ke.NAVBAR_SHRINKED_WIDTH,Ze=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"resizeNavbar",value:function(e){return r.a.createElement("div",{className:e.root},r.a.createElement(Ne.a,{position:"fixed",elevation:0,className:Object(Le.a)(e.appBar,Object(Oe.a)({},e.appBarShift,this.props.resize))},r.a.createElement(Se.a,null,r.a.createElement(Ce.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"open drawer",onClick:this.props.resizeDashboard},this.props.resize?r.a.createElement(Ie.a,null):r.a.createElement(Ue.a,null)),r.a.createElement(xe.a,{className:e.title,variant:"h6",noWrap:!0},r.a.createElement(Ge,this.props)),r.a.createElement(We,null),r.a.createElement(Te.a,{className:e.divider,orientation:"vertical",flexItem:!0}),r.a.createElement("h4",{className:e.userName}," ",this.props.loadedUser.first_name," ",this.props.loadedUser.last_name),r.a.createElement(Pe,{logoutHandler:this.props.logoutHandler,loadedUser:this.props.loadedUser}))))}},{key:"render",value:function(){console.log(this.props);var e=this.props.classes;return this.resizeNavbar(e)}}]),a}(n.Component),qe=Object(A.a)((function(e){var t;return{root:{},menuButton:{marginRight:e.spacing(2),color:"black"},title:(t={flexGrow:1,display:"none"},Object(Oe.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(Oe.a)(t,"color","black"),t),userName:{color:"black",paddingRight:e.spacing(3)},divider:{marginRight:e.spacing(3),marginLeft:e.spacing(3)},appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"#fafafa",position:"fixed",width:"calc(100% - ".concat(Ye,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:Je,backgroundColor:"#fafafa",width:"calc(100% - ".concat(Je,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}}}),{withTheme:!0})(Ze),Xe=a(963),Qe=a(95),$e=a(971),et=a(357),tt=a.n(et),at=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(D.b,{className:e.link,to:this.props.link},r.a.createElement($e.a,{container:!0,direction:"row",alignItems:"center",className:e.menuItem},r.a.createElement($e.a,{item:!0},this.props.isMenuLogo?r.a.createElement(be.a,{variant:"circle",className:e.avatar,src:tt.a}):r.a.createElement(be.a,{variant:"square",className:e.avatar})),r.a.createElement($e.a,{item:!0,onClick:this.props.handleClick},this.props.text&&this.props.resize?r.a.createElement("p",{className:e.text}," ",this.props.text," "):null)))}}]),a}(n.Component),nt=Object(A.a)((function(e){return{menuItem:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(1)},text:{marginLeft:30,color:"black"},link:{textDecoration:"none"}}}),{withTheme:!0})(at),rt=a(985),st=a(969),ot=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(D.b,{className:e.link,to:this.props.link},r.a.createElement(st.a,{className:e.expansionPanelDetails},r.a.createElement($e.a,{container:!0,direction:"row",alignItems:"center"},r.a.createElement($e.a,{item:!0},r.a.createElement(be.a,{variant:"circle",className:e.avatar})),r.a.createElement($e.a,{item:!0},this.props.resize?r.a.createElement("p",{className:e.text},this.props.text):null))))}}]),a}(n.Component),it=Object(A.a)((function(){return{expansionPanelDetails:{},text:{marginLeft:30,color:"black"},link:{textDecoration:"none"}}}),{withTheme:!0})(ot),lt=a(970),ct=a(278),ut=a.n(ct),mt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(lt.a,{expandIcon:this.props.resize?r.a.createElement(ut.a,{className:e.materialIconLight}):null,"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement($e.a,{container:!0,direction:"row",alignItems:"center"},r.a.createElement($e.a,{item:!0},r.a.createElement(Ee,{avatar:{width:30,height:30,margin:"0 auto"}})),r.a.createElement($e.a,{item:!0},this.props.resize?r.a.createElement("h4",{className:e.text}," ",this.props.loadedUser.first_name+" "+this.props.loadedUser.last_name," "):null)))}}]),a}(n.Component),pt=Object(A.a)((function(){return{text:{marginLeft:30,color:"black"}}}),{withTheme:!0})(mt),ht=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(rt.a,{elevation:0},r.a.createElement(pt,{loadedUser:this.props.loadedUser,resize:this.props.resize}),r.a.createElement(it,{text:"Lead Engineer",resize:this.props.resize,link:"/dashboard/lead"}),r.a.createElement(it,{text:"Supervisor",resize:this.props.resize,link:"/dashboard/supervisor"}),r.a.createElement(it,{text:"Timesheet Approver",resize:this.props.resize,link:"/dashboard/tsapprover"}),r.a.createElement(it,{text:"HR",resize:this.props.resize,link:"/dashboard/hr"}))}}]),a}(n.Component),dt=Object(A.a)((function(e){return{}}),{withTheme:!0})(ht),ft=Ke.DRAWER_EXPANDED_WIDTH,gt=Ke.DRAWER_SHRINKED_WIDTH,bt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e,t,a=this.props,n=a.classes,s=a.loadedUser;return r.a.createElement("div",{className:n.root},r.a.createElement(Xe.a,null),r.a.createElement(Qe.a,{variant:"permanent",open:!0,className:Object(Le.a)(n.drawer,(e={},Object(Oe.a)(e,n.drawerOpen,this.props.resize),Object(Oe.a)(e,n.drawerClose,!this.props.resize),e)),classes:{paper:Object(Le.a)((t={},Object(Oe.a)(t,n.drawerOpen,this.props.resize),Object(Oe.a)(t,n.drawerClose,!this.props.resize),t))}},r.a.createElement(nt,{isMenuLogo:!0,link:"/dashboard/".concat(s.employee_id)}),r.a.createElement(Te.a,{className:n.divider}),r.a.createElement(dt,{loadedUser:this.props.loadedUser,resize:this.props.resize}),r.a.createElement(Te.a,{className:n.divider}),r.a.createElement("div",null,r.a.createElement(nt,{text:"Dashboard",resize:this.props.resize,link:"/dashboard/".concat(s.employee_id)}),r.a.createElement(nt,{text:"Timesheet",resize:this.props.resize,link:"/dashboard/timesheet"}),r.a.createElement(nt,{text:"Projects",resize:this.props.resize,link:"/dashboard/projects"}))))}}]),a}(n.Component),vt=Object(A.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar,paper:{width:ft,height:"100%"},divider:{backgroundColor:"light gray",width:"90%",margin:"0 auto"},drawerOpen:{width:ft,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{width:gt,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})}}}),{withTheme:!0})(bt),Et=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.toolbar}),this.props.routes)}}]),a}(n.Component),jt=Object(A.a)((function(e){return{root:{display:"flex"},content:{flexGrow:10,padding:e.spacing(5)},toolbar:e.mixins.toolbar}}),{withTheme:!0})(Et),yt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={loaded_user:{},resize:!0,breadCrumbs:n.props.location},n.resizeDashboard=n.resizeDashboard.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"resizeDashboard",value:function(){this.setState({resize:!this.state.resize})}},{key:"render",value:function(){var e=this;console.log(this.props);var t,a=this.props.classes,n=r.a.createElement(yn,Object.assign({},this.props,{config:(t="dashboard",{option:t,loadedUser:e.props.loadedUser,logoutHandler:e.props.logoutHandler,sessionLogoutHandler:e.props.sessionLogoutHandler}),logoutHandler:this.props.logoutHandler,sessionLogoutHandler:this.props.sessionLogoutHandler,token:this.props.token}));return r.a.createElement(D.a,null,r.a.createElement("div",{className:a.root},r.a.createElement(qe,Object.assign({},this.props.location,{loadedUser:this.props.loadedUser,resizeDashboard:this.resizeDashboard,resize:this.state.resize,logoutHandler:this.props.logoutHandler})),r.a.createElement(vt,{loadedUser:this.props.loadedUser,resizeDashboard:this.resizeDashboard,resize:this.state.resize}),r.a.createElement(jt,{routes:n})))}}]),a}(n.Component),kt=Object(A.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar}}),{withTheme:!0})(yt),wt=a(961),Ot=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleClick=function(){console.log("click!",n.props.selectedRows)},n.state={type:e.type},n.handleClick=n.handleClick.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,"Mine"===this.state.type&&r.a.createElement(wt.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},r.a.createElement(H.a,{onClick:this.handleClick},"Archive"),r.a.createElement(H.a,null,"Close")),"Archived"===this.state.type&&r.a.createElement(wt.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},r.a.createElement(H.a,null,"Open"),r.a.createElement(H.a,null,"Close")),"Closed"===this.state.type&&r.a.createElement(wt.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},r.a.createElement(H.a,null,"Archive"),r.a.createElement(H.a,null,"Open")))}}]),a}(r.a.Component),_t=(a(745),["ID","Name","Manager"]),Nt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={data:[],type:""},n.options={print:!1,responsive:"scroll",selectableRows:!0,customToolbarSelect:function(e){return r.a.createElement(Ot,{selectedRows:e,type:n.state.type})},onRowClick:function(e,t){n.props.history.push({pathname:"/projectDetails",state:{projectID:e[0]}})}},n}return Object(m.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data,type:e.type})}},{key:"render",value:function(){return r.a.createElement(P.a,{className:"projects",title:"Projects",columns:_t,options:this.options,data:this.state.data})}}]),a}(r.a.Component),St=(a(746),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={data:[],allProj:[],mineProj:[],archivedProj:[],closedProj:[],type:"All"},n.setData=n.setData.bind(Object(p.a)(n)),n.allProjects=n.allProjects.bind(Object(p.a)(n)),n.mineProjects=n.mineProjects.bind(Object(p.a)(n)),n.archivedProjects=n.archivedProjects.bind(Object(p.a)(n)),n.closedProjects=n.closedProjects.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setData();case 2:this.allProjects();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"allProjects",value:function(){this.setState({data:this.state.allProj,type:"All"})}},{key:"mineProjects",value:function(){this.setState({data:this.state.mineProj,type:"Mine"})}},{key:"archivedProjects",value:function(){this.setState({data:this.state.archivedProj,type:"Archived"})}},{key:"closedProjects",value:function(){this.setState({data:this.state.closedProj,type:"Closed"})}},{key:"setData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i,c,u,m,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),a=localStorage.getItem("token"),n=t.employee_id,console.log(t),e.next=6,_.getProjectsForUser(n,a);case 6:for(r=e.sent,console.log(r),s=[],o=[],i=[],c=[],u=[],m=0;m<r.length;m++)s=[],console.log(r[m]),s.push(r[m].project_code),s.push(r[m].project_name),p=r[m].project_manager_id.first_name+" "+r[m].project_manager_id.last_name,s.push(p),r[m].project_manager_id.employee_id===parseInt(n)&&i.push(s),"COMPLETE"===r[m].status&&u.push(s),"ARCHIVED"===r[m].status&&c.push(s),o.push(s);this.setState({allProj:o,mineProj:i,closedProj:u,archivedProj:c});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{justify:"space-between",container:!0,spacing:1,className:"btnProjects"},r.a.createElement($e.a,{item:!0},r.a.createElement(wt.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},r.a.createElement(H.a,{onClick:this.allProjects},"All"),r.a.createElement(H.a,{onClick:this.mineProjects},"Mine"),r.a.createElement(H.a,{onClick:this.archivedProjects},"Archived"),r.a.createElement(H.a,{onClick:this.closedProjects},"Closed"))),r.a.createElement($e.a,{item:!0},r.a.createElement(H.a,{variant:"contained",color:"secondary",component:D.b,to:"/createProject"},"+ Create"))),r.a.createElement(Nt,{data:this.state.data,type:this.state.type,history:this.props.history}))}}]),a}(r.a.Component)),Ct=a(52),xt=a(415),Dt=a(976),It=a(974),Tt=a(975),Pt=(a(432),Object(xt.a)((function(e){return{projInfo:{width:"280px"}}}))),Lt=function(e){var t=Pt();return r.a.createElement("form",{autoComplete:"off"},r.a.createElement(te.a,Object(Oe.a)({component:"span",className:"margin",label:"Project ID",name:"projectID",value:e.projectID,onChange:e.handleChange},"className",t.projInfo)),r.a.createElement("br",null),r.a.createElement(te.a,Object(Oe.a)({component:"span",className:"margin",label:"Project Name",name:"projectName",value:e.projectName,onChange:e.handleChange},"className",t.projInfo)),r.a.createElement("br",null),r.a.createElement(te.a,Object(Oe.a)({component:"span",className:"margin",label:"Project Manager",name:"projectManager",value:e.projectManager,onChange:e.handleChange},"className",t.projInfo)))},At=(a(315),function(e){var t={projDesc:{width:"310px"}};return r.a.createElement("form",{autoComplete:"off"},r.a.createElement(te.a,{className:t.projDesc,id:"outlined-multiline-static",label:"Project Description",multiline:!0,rows:"8",variant:"outlined",name:"Desc",value:e.Desc,onChange:e.handleChange}))}),Ht=function(e){var t={budgetInfo:{width:"280px"}};return r.a.createElement("form",{autoComplete:"off"},r.a.createElement(te.a,Object(Oe.a)({component:"span",className:"margin",id:"standard-basic",label:"Cost",value:e.cost,name:"cost",onChange:e.handleChange,disabled:e.isDisabled},"className",t.budgetInfo)))},Ft=a(510),Mt=a(74),Rt=a(981),Wt=Object(xt.a)((function(e){return{scheduleInfo:{width:"280px"}}})),Bt=function(e){var t=Wt(),a=Object(n.useState)({}),s=Object(ie.a)(a,2),o=(s[0],s[1],Object(n.useState)({})),i=Object(ie.a)(o,2);i[0],i[1];return r.a.createElement("form",{autoComplete:"off"},r.a.createElement(Mt.a,{utils:Ft.a},r.a.createElement(Rt.a,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",margin:"normal",label:"Start Date",name:"startDate",value:e.startDate,onChange:e.handleStartChange,className:t.scheduleInfo,disabled:e.isDisabled}),r.a.createElement("br",null),r.a.createElement(Rt.a,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",margin:"normal",label:"End Date",name:"endDate",value:e.endDate,onChange:e.handleEndChange,className:t.scheduleInfo,disabled:e.isDisabled})))},Ut=Object(xt.a)((function(e){return{root:{width:"1100px"},stepper:{padding:"40px 0",border:"1px solid lightgray"},backButton:{margin:"0 7px 0 0"},nextButton:{margin:"0 0 0 7px"},instructionsContainer:{display:"flex",justifyContent:"center",padding:"25px 0"},instructions:{backgroundColor:"white",width:"400px",display:"flex",justifyContent:"center",alignItems:"center",height:"280px",padding:"0 0 10px 0",borderTop:"3px solid lightgray"},backNextButtonContainer:{display:"flex",justifyContent:"center",margin:"20px 0 0 0"},endMessage:{display:"flex",flexDirection:"column"},createProjAgain:{margin:"15px 0",padding:"15px"}}}));function Vt(){var e=Ut(),t=JSON.parse(sessionStorage.getItem("user")),a=Object(n.useState)({projectID:"",projectName:"",projectManager:t.first_name+" "+t.last_name,Desc:"",startDate:new Date,endDate:new Date,cost:""}),s=Object(ie.a)(a,2),o=s[0],i=s[1],u=Object(n.useState)(!1),m=Object(ie.a)(u,2),p=m[0],h=m[1],d=Object(n.useState)(!1),f=Object(ie.a)(d,2),g=f[0],b=f[1],v=function(){var e=Object(c.a)(l.a.mark((function e(){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),console.log(a),n={project_code:o.projectID,project_manager_id:{employee_id:t.employee_id},project_name:o.projectName,status:"OPEN",start_date:o.startDate.toISOString().split("T",1)[0],end_date:o.endDate.toISOString().split("T",1)[0],description:o.Desc,budget_dollar:o.cost,employees:[{employee_id:t.employee_id}]},e.prev=3,e.next=6,_.createProject(n,a);case 6:h(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),b(!0);case 12:setTimeout((function(){b(!1),h(!1)}),1e3);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),E=r.a.useState(0),j=Object(ie.a)(E,2),y=j[0],k=j[1],w=["Project Information","Project Description","Budget","Schedule"];return r.a.createElement("div",{className:e.root},g?r.a.createElement(re,{config:{message:"Failed to Create Project",variant:"error"}}):null,p?r.a.createElement(re,{config:{message:"Project Created!",variant:"success"}}):null,r.a.createElement(Dt.a,{activeStep:y,alternativeLabel:!0,className:e.stepper},w.map((function(e){return r.a.createElement(It.a,{key:e},r.a.createElement(Tt.a,null,e))}))),r.a.createElement("div",{className:e.instructionsContainer},y===w.length?r.a.createElement("div",{className:e.endMessage},r.a.createElement(xe.a,{component:"span",className:e.instructions},"Project Created."),r.a.createElement(H.a,{onClick:function(){k(0)}},"Create another project")):r.a.createElement("div",null,r.a.createElement(xe.a,{component:"span",className:e.instructions},function(e,t,a,n,s){switch(e){case 0:return r.a.createElement(Lt,{projectID:t.projectID,projectName:t.projectName,projectManager:t.projectManager,handleChange:a});case 1:return r.a.createElement(At,{Desc:t.projectDesc,handleChange:a});case 2:return r.a.createElement(Ht,{cost:t.cost,handleChange:a});case 3:return r.a.createElement(Bt,{startDate:t.startDate,endDate:t.endDate,handleStartChange:n,handleEndChange:s});default:return r.a.createElement(r.a.Fragment,null)}}(y,o,(function(e){var t=e.target,a=t.name,n=t.value;i(Object(Ct.a)({},o,Object(Oe.a)({},a,n)))}),(function(e){i(Object(Ct.a)({},o,{startDate:e}))}),(function(e){i(Object(Ct.a)({},o,{endDate:e}))}))),r.a.createElement("div",{className:e.backNextButtonContainer},r.a.createElement(H.a,{disabled:0===y,onClick:function(){k((function(e){return e-1}))},className:e.backButton},"Back"),y===w.length-1&&r.a.createElement(H.a,{variant:"contained",color:"primary",onClick:v,className:e.nextButton},"Finish"),y!=w.length-1&&r.a.createElement(H.a,{variant:"contained",color:"primary",onClick:function(){k((function(e){return e+1}))}},"Next")))))}a(747);var zt=a(425),Gt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).gotoProjectDetail=n.gotoProjectDetail.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"gotoProjectDetail",value:function(){this.props.history.push({pathname:"/projectDetails",state:{projectID:this.props.projName}})}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(X.a,{className:t.projDetail,elevation:2,onClick:function(){return e.gotoProjectDetail()}},r.a.createElement("div",{className:t.projName},this.props.projName),r.a.createElement("div",{className:t.dueDateRow},r.a.createElement("div",{className:t.dueDate},"Due Date:"),r.a.createElement("div",{className:t.dueDateVal},"\xa0\xa0\xa0",this.props.dueDate)),r.a.createElement("div",{className:t.projManagerRow},r.a.createElement(ge.a,{className:t.circleStyle}),r.a.createElement("div",{className:t.projManagerName},this.props.projManagerName)))}}]),a}(n.Component),Kt=Object(A.a)((function(){return{root:{backgroundColor:zt.a},projDetail:{width:"90%",height:"105px",margin:"25px auto"},projName:{fontWeight:"bold",margin:"2px 0 0 5px"},dueDateRow:{margin:"8px 0 0 10px"},dueDate:{color:"grey",float:"left"},dueDateVal:{marginLeft:"5px"},projManagerRow:{margin:"10px 0 0 20px",color:"darkGrey"},circleStyle:{display:"inline-block",borderRadius:"50%",width:35,height:35,float:"left"},projManagerName:{margin:"10px 0 0 15px",float:"left"}}}),{withTheme:!0})(Gt),Jt=(a(748),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={loadedUser:{},projects:[],overTime:0,flexTime:0},n.getProject=n.getProject.bind(Object(p.a)(n)),n.formatWeekEnding=n.formatWeekEnding.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"formatWeekEnding",value:function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth(),r=("0"+t.getDate()).slice(-2);return["January","February","March","April","May","June","July","August","September","October","November","December"][n]+" "+r+", "+a}},{key:"getProject",value:function(e,t,a){for(var n=[],r=0;r<e.length;r++)"OPEN"==e[r].status&&n.push(e[r]);(e=n).sort((function(e,t){return e.end_date-t.end_date}));var s=a.split("|"),o=parseFloat(s[0]),i=parseFloat(s[1]);this.setState({projects:e,loadedUser:t,overTime:o,flexTime:i}),0==this.state.projects.length&&(document.getElementById("recentNewProjTitle").innerHTML="You don't have any projects")}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.topContainer},r.a.createElement(X.a,{className:t.leftPaper,elevation:2},r.a.createElement("div",{className:t.projTitle,id:"recentNewProjTitle"},"Recent / New Projects"),0==this.state.projects.length?"":this.state.projects.map((function(a,n){return r.a.createElement("div",{className:t.projInfo,key:n},r.a.createElement(Kt,{key:a.project_code,history:e.props.history,projName:a.project_code,dueDate:e.formatWeekEnding(a.end_date),projManagerName:a.project_manager_id.first_name+" "+a.project_manager_id.last_name}))}))),r.a.createElement("div",null,r.a.createElement("div",{id:"timesheetDetailContainer",className:t.timesheetDetailContainer},r.a.createElement(oe,{fetchProject:this.getProject,history:this.props.history,dashboardTimesheet:!0,userId:this.props.match.params.id,token:this.props.token})),r.a.createElement("div",{className:t.flexVancationContainer},r.a.createElement(X.a,{className:t.bottomLeftPaper,elevation:2},r.a.createElement("div",{className:t.title},"Overtime"),r.a.createElement("hr",{className:t.seperator}),r.a.createElement("div",{className:t.vacDays},this.state.overTime)),r.a.createElement(X.a,{className:t.bottomMidPaper,elevation:2},r.a.createElement("div",{className:t.title},"Vacation Days"),r.a.createElement("hr",{className:t.seperator}),r.a.createElement("div",{className:t.vacDays},this.state.loadedUser.vacation)),r.a.createElement(X.a,{className:t.bottomRightPaper,elevation:2},r.a.createElement("div",{className:t.title},"Flextime"),r.a.createElement("hr",{className:t.seperator}),r.a.createElement("div",{className:t.vacDays},this.state.flexTime))))))}}]),a}(n.Component)),Yt=Object(A.a)((function(){var e;return{root:{flexGrow:1},leftPanelContainer:{width:"360px"},leftPaper:(e={overflow:"scroll",maxHeight:"800px"},Object(Oe.a)(e,"overflow","auto"),Object(Oe.a)(e,"width","310px"),Object(Oe.a)(e,"margin","0 20px 0 0"),Object(Oe.a)(e,"boxShadow","none"),Object(Oe.a)(e,"border","solid 1px lightgray"),Object(Oe.a)(e,"borderRadius","5px"),e),rightTopPaper:{height:500},bottomLeftPaper:{height:200,width:302,textAlign:"center",boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px"},bottomMidPaper:{height:200,width:302,textAlign:"center",boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px",marginLeft:45},bottomRightPaper:{height:200,width:302,textAlign:"center",boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px",marginLeft:45},title:{display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",margin:"10px 0 0 0"},seperator:{borderTop:"1px solid lightgray"},projTitle:{margin:"20px 0 0 20px",fontWeight:700},CircularProgressbar:{width:"40%",marginTop:"18px"},topContainer:{display:"flex"},flexVancationContainer:{display:"flex",margin:"22px 0 0 4px"},timesheetDetailContainer:{border:"solid 1px lightgray",minWidth:"1000px",textAlign:"center",height:"500px",fontSize:"18pt",borderRadius:"5px",cursor:"pointer"},projInfo:{cursor:"pointer"},vacDays:{fontSize:"80pt",color:"lightgray"}}}),{withTheme:!0})(Jt),Zt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).clickRemove=function(){e.props.history.push("/dashboard/supervisor/remove"),console.log("remove an employee!")},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{title:"Assign an employee to a project"},r.a.createElement(H.a,{className:e.iconButton,onClick:this.clickRemove,color:"primary",variant:"contained"},"Remove")))}}]),a}(r.a.Component),qt=Object(A.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(Zt),Xt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).clickAssign=function(){e.props.history.push("/dashboard/supervisor/assign"),console.log("assign an employee!")},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{title:"Assign an employee to a project"},r.a.createElement(H.a,{className:e.iconButton,onClick:this.clickAssign,color:"primary",variant:"contained"},"Assign")))}}]),a}(r.a.Component),Qt=Object(A.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(Xt),$t=[{name:"employeeId",label:"Employee ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"}],ea=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={data:[]},n.fetchData=n.fetchData.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getEmployees",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),n=w.getEmployeesBySupervisor(a.employee_id,t),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,this.getEmployees();case 3:for(t=e.sent,a=[],n=0;n<t.length;n++)r=t[n].employee_id,s=t[n].first_name,o=t[n].last_name,(i=[]).push(r),i.push(s),i.push(o),a.push(i);this.setState({data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.props.classes;return r.a.createElement("div",null,r.a.createElement(P.a,{className:"datatable",title:r.a.createElement("h1",null,"Employees"),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,customToolbar:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(qt,{history:e.props.history}),r.a.createElement(Qt,{history:e.props.history}))},onRowClick:function(t,a){localStorage.setItem("name",t[1]+" "+t[2]),e.props.history.push("/dashboard/supervisor/".concat(t[0]))}}),columns:$t,data:this.state.data}))}}]),a}(n.Component),ta=a(982),aa=Object(xt.a)((function(e){return{root:{flexGrow:1},supervisorMargin:{margin:10},supervisorPaper:{height:750,padding:50},supervisorButton:{width:"fit-content"}}})),na=function(e){var t=aa(),a=localStorage.getItem("token"),s=JSON.parse(sessionStorage.getItem("user")),o=r.a.useState(),i=Object(ie.a)(o,2),u=i[0],m=i[1],p=r.a.useState(),h=Object(ie.a)(p,2),d=h[0],f=h[1],g=r.a.useState(),b=Object(ie.a)(g,2),v=b[0],E=b[1],j=r.a.useState(!1),y=Object(ie.a)(j,2),k=y[0],w=y[1],O=r.a.useState(!1),N=Object(ie.a)(O,2),S=N[0],C=N[1],x=[],D=function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getProjectsForSupervisor(s.employee_id,a);case 2:return t=e.sent,E(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=u){e.next=2;break}return e.abrupt("return");case 2:for(t=0;t<u.employees.length;t++)u.employees[t].supervisor_id==s.employee_id&&x.push(u.employees[t]);return e.abrupt("return",x);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){I()}),[u]);var T=function(){var t=Object(c.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),null!=u&&null!=d){t.next=3;break}return t.abrupt("return",null);case 3:return u.employees=u.employees.filter((function(e){return d.indexOf(e)<0})),t.prev=4,t.next=7,_.updateProject(u,a);case 7:w(!0),C(!1),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),C(!0),w(!1);case 15:setTimeout((function(){C(!1),w(!1),e.history.push("/dashboard/supervisor")}),1e3);case 16:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:t.root},S?r.a.createElement(re,{config:{message:"Login Failed",variant:"error"}}):null,k?r.a.createElement(re,{config:{message:"Login Success!",variant:"success"}}):null,r.a.createElement(X.a,{className:t.supervisorPaper,elevation:2},r.a.createElement($e.a,{container:!0,direction:"column"},r.a.createElement(xe.a,{variant:"h4"},"Remove From Project"),r.a.createElement(Te.a,{className:"supervisorMargin"}),r.a.createElement(ta.a,{className:t.supervisorMargin,options:v,getOptionLabel:function(e){return e.project_code},style:{width:700},onChange:function(e,t){return m(t)},renderInput:function(e){return r.a.createElement(te.a,Object.assign({},e,{variant:"standard",label:"Project ID"}))}}),r.a.createElement(ta.a,{multiple:!0,className:t.supervisorMargin,options:x,getOptionLabel:function(e){return e.first_name+" "+e.last_name},style:{width:700},onChange:function(e,t){return f(t)},renderInput:function(e){return r.a.createElement(te.a,Object.assign({},e,{variant:"standard",label:"Add employees",placeholder:"Search for an employee"}))}}),r.a.createElement(H.a,{variant:"contained",color:"primary",onClick:function(){return T()},style:{width:700}},"Remove"))))},ra=Object(xt.a)((function(e){return{root:{flexGrow:1},supervisorMargin:{margin:10},supervisorPaper:{height:750,padding:50},supervisorButton:{width:"fit-content"}}})),sa=function(e){var t=ra(),a=localStorage.getItem("token"),s=r.a.useState(),o=Object(ie.a)(s,2),i=o[0],u=o[1],m=r.a.useState(),p=Object(ie.a)(m,2),h=p[0],d=p[1],f=r.a.useState([]),g=Object(ie.a)(f,2),b=g[0],v=g[1],E=r.a.useState([]),j=Object(ie.a)(E,2),y=j[0],k=j[1],O=r.a.useState(!1),N=Object(ie.a)(O,2),S=N[0],C=N[1],x=r.a.useState(!1),D=Object(ie.a)(x,2),I=D[0],T=D[1],P=function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getAllProjects(a);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(c.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),e.next=3,w.getEmployeesBySupervisor(t.employee_id,a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,P();case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=k,e.next=8,L();case 8:e.t3=e.sent,(0,e.t2)(e.t3);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var A=function(){var t=Object(c.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),console.log(a),null!=i){t.next=4;break}return t.abrupt("return",null);case 4:for(n=0;n<h.length;n++)i.employees.push(h[n]);return t.prev=5,t.next=8,_.updateProject(i,a);case 8:C(!0),T(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),T(!0),C(!1);case 16:setTimeout((function(){T(!1),C(!1),e.history.push("/dashboard/supervisor")}),1e3);case 17:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:t.root},I?r.a.createElement(re,{config:{message:"Login Failed",variant:"error"}}):null,S?r.a.createElement(re,{config:{message:"Login Success!",variant:"success"}}):null,r.a.createElement(X.a,{className:t.supervisorPaper,elevation:2},r.a.createElement($e.a,{container:!0,direction:"column"},r.a.createElement(xe.a,{variant:"h4"},"Assign To Project"),r.a.createElement(Te.a,{className:"supervisorMargin"}),r.a.createElement(ta.a,{className:t.supervisorMargin,options:b,getOptionLabel:function(e){return e.project_code},style:{width:700},onChange:function(e,t){return u(t)},renderInput:function(e){return r.a.createElement(te.a,Object.assign({},e,{variant:"standard",label:"Project ID"}))}}),r.a.createElement(ta.a,{multiple:!0,className:t.supervisorMargin,options:y,getOptionLabel:function(e){return e.first_name+" "+e.last_name},style:{width:700},onChange:function(e,t){return d(t)},renderInput:function(e){return r.a.createElement(te.a,Object.assign({},e,{variant:"standard",label:"Add employees",placeholder:"Search for an employee"}))}}),r.a.createElement(H.a,{variant:"contained",color:"primary",onClick:A,style:{width:700}},"Assign"))))},oa=[{name:"projectId",label:"Project ID",className:"column"},{name:"projectName",label:"Project Name",className:"column"},{name:"projectManager",label:"Project Manager",className:"column"}],ia=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={data:[]},n.fetchData=n.fetchData.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getProjects",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=_.getProjectsForUser(this.props.match.params.id,t),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,this.getProjects();case 3:for(t=e.sent,a=[],n=0;n<t.length;n++)r=t[n].project_code,s=t[n].project_name,o=t[n].project_manager_id.first_name+" "+t[n].project_manager_id.last_name,(i=[]).push(r),i.push(s),i.push(o),a.push(i);this.setState({data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:"datatable",title:r.a.createElement("h1",null,"Projects Assigned To ",localStorage.name),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1}),columns:oa,data:this.state.data}))}}]),a}(n.Component),la=a(486),ca=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.loadedUser;return r.a.createElement(r.a.Fragment,null,n?r.a.createElement($e.a,{item:!0,xs:2,className:a.container},r.a.createElement(be.a,{className:a.avatar,alt:"employee photo"},r.a.createElement(ge.a,{className:a.faceIcon})),r.a.createElement("div",{className:a.textContainer},r.a.createElement(xe.a,{className:a.textHeader},"Employee ID"),r.a.createElement(te.a,{className:a.text,name:"employeeId",onChange:function(t){return e.props.formHandler(t)},disabled:!this.props.hr,defaultValue:n.employee_id,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement("div",{className:a.textContainerChips},this.props.isHr?r.a.createElement(la.a,{className:a.chip,icon:r.a.createElement(ge.a,null),label:"HR"}):null,this.props.isAdmin?r.a.createElement(la.a,{className:a.chip,icon:r.a.createElement(ge.a,null),label:"Admin"}):null,this.props.isSuperTimesheetApprover?r.a.createElement(la.a,{className:a.chip,icon:r.a.createElement(ge.a,null),label:"Super Timesheet Approver"}):null)):null)}}]),a}(n.Component),ua=Object(A.a)((function(){var e;return e={container:{marginTop:20},avatar:{marginTop:30,marginBottom:20,width:100,height:100,margin:"0 auto"},textContainer:{margin:"0 auto",width:120,padding:10},textHeader:{color:"gray"},text:{borderBottom:"1px solid lightgray"},chip:{margin:5},textContainerChips:{margin:"0 auto",width:135,height:100,marginTop:15}},Object(Oe.a)(e,"avatar",{width:100,height:100,margin:"0 auto"}),Object(Oe.a)(e,"faceIcon",{width:"100%",height:"100%"}),e}),{withTheme:!0})(ca),ma=a(964),pa=a(965),ha=a(966),da=a(967),fa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleClickOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.state={open:!1,employees:[],searchList:[]},n.handleClickOpen=n.handleClickOpen.bind(Object(p.a)(n)),n.handleClose=n.handleClose.bind(Object(p.a)(n)),n.createData=n.createData.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"createData",value:function(e,t,a,n){return{image:e,id:t,name:a,select:n}}},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,w.getAllEmployees(t);case 3:a=e.sent,this.setState({searchList:a}),a.forEach((function(e){n.state.employees.push(n.createData(r.a.createElement(ge.a,null),e.employee_id,e.first_name+" "+e.last_name,r.a.createElement(H.a,{style:{marginLeft:"20px"},variant:"outlined",color:"primary",onClick:function(){n.props.selectSupervisor(e.employee_id,e.first_name,e.last_name),n.handleClose()}}," Select")))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(H.a,{disabled:!this.props.hr,variant:"outlined",color:"primary",className:e.button,onClick:this.handleClickOpen},"Choose Supervisor"),r.a.createElement(ma.a,{className:e.container,disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.state.open,onClose:this.handleClose},r.a.createElement(da.a,null,"Select a Supervisor"),r.a.createElement(ha.a,null,r.a.createElement(ta.a,{disableClearable:!0,options:this.state.searchList.map((function(e){return e.first_name+" "+e.last_name})),renderInput:function(e){return r.a.createElement(te.a,Object.assign({},e,{label:"Search for a Supervisor",margin:"normal",variant:"outlined",name:"name",InputProps:Object(Ct.a)({},e.InputProps,{type:"search"})}))}}),r.a.createElement(B.a,{className:e.table},r.a.createElement(G.a,null,r.a.createElement(K.a,null,r.a.createElement(V.a,null," Photo "),r.a.createElement(V.a,null," ID "),r.a.createElement(V.a,null," Name "),r.a.createElement(V.a,null," Select "))),r.a.createElement(U.a,null,this.state.employees.map((function(e,t){return r.a.createElement(K.a,{key:t},r.a.createElement(V.a,{align:"left"},e.image),r.a.createElement(V.a,{align:"left"},e.id),r.a.createElement(V.a,{align:"left"},"".concat(e.name)),r.a.createElement(V.a,{align:"left"},e.select))}))))),r.a.createElement(pa.a,null,r.a.createElement(H.a,{onClick:this.handleClose,color:"primary"},"Cancel"),r.a.createElement(H.a,{onClick:this.handleClose,color:"primary"},"Ok"))))}}]),a}(n.Component),ga=Object(A.a)((function(e){return{container:{height:700,minWidth:350,minHeight:400},button:{marginBottom:10,display:"inline-block",width:210}}}),{withTheme:!0})(fa),ba=a(986),va=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:t.field},r.a.createElement("div",null,r.a.createElement(xe.a,{className:t.title,variant:"h6"}," Labor Grade "),this.props.marksValue||void 0==this.props.marksValue?r.a.createElement(ba.a,{defaultValue:this.props.hr?0:parseInt(this.props.marksValue),valueLabelFormat:function(t){return e.props.valueLabelFormat(t)},onChange:function(t,a){return e.props.getSliderValue(a)},"aria-labelledby":"discrete-slider-restrict",className:t.slider,step:null,valueLabelDisplay:"auto",marks:this.props.marks,disabled:!this.props.hr,max:7}):r.a.createElement(de.a,null)))}}]),a}(n.Component),Ea=Object(A.a)((function(){return{title:{marginBottom:5},field:{marginTop:50},slider:{width:"90%"}}}),{withTheme:!0})(va),ja=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.supervisor;return r.a.createElement(r.a.Fragment,null,n?r.a.createElement($e.a,{item:!0,xs:4,className:a.container},r.a.createElement("div",{className:a.field},r.a.createElement(xe.a,{className:a.title,variant:"h6"}," Basic Information "),r.a.createElement(te.a,{className:a.input,disabled:!this.props.hr,defaultValue:this.props.loadedUser.first_name,helperText:"First Name",onChange:function(t){return e.props.formHandler(t)},name:"firstName",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(te.a,{className:a.input,disabled:!this.props.hr,defaultValue:this.props.loadedUser.last_name,helperText:"Last Name",name:"lastName",onChange:function(t){return e.props.formHandler(t)},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement("div",{className:a.field},r.a.createElement(Ea,{valueLabelFormat:this.props.valueLabelFormat,getSliderValue:this.props.getSliderValue,marks:this.props.marks,hr:this.props.hr,marksValue:this.props.marksValue})),r.a.createElement("div",{className:a.field},r.a.createElement($e.a,{container:!0,spacing:1,className:a.container},r.a.createElement($e.a,{item:!0,xs:6},r.a.createElement(ga,{hr:this.props.hr,selectSupervisor:this.props.selectSupervisor})),r.a.createElement($e.a,{item:!0,xs:6},r.a.createElement(la.a,{className:a.chip,icon:r.a.createElement(ge.a,null),label:this.props.supervisorName})))),r.a.createElement("div",{className:a.field},r.a.createElement(xe.a,{className:a.title,variant:"h6"}," Vacation Days "),r.a.createElement(te.a,{className:a.input,disabled:!this.props.hr,defaultValue:this.props.loadedUser.vacation,helperText:"Vacation Days",onChange:function(t){return e.props.formHandler(t)},name:"vacation",type:"number",margin:"normal",InputLabelProps:{shrink:!0}}))):null)}}]),a}(n.Component),ya=Object(A.a)((function(){return{title:{marginBottom:5},paper:{height:600},input:{display:"inline-block",width:"90%"},field:{marginTop:50},avatar:{display:"inline-block",marginRight:"5%"},inputSupervisor:{width:"77%"}}}),{withTheme:!0})(ja),ka=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{item:!0,xs:4,className:t.container},r.a.createElement("div",{className:t.field},r.a.createElement(xe.a,{className:t.title,variant:"h6"}," Change Password "),r.a.createElement(te.a,{className:t.input,name:"oldPassword",type:"password",helperText:"Old Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(te.a,{className:t.input,name:"newPassword",type:"password",helperText:"New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(te.a,{className:t.input,name:"confirmPassword",type:"password",helperText:"Confirm New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(H.a,{variant:"contained",color:"primary",className:t.button,onClick:this.props.handleSubmit},"Submit")))}}]),a}(n.Component),wa=Object(A.a)((function(){return{container:{marginTop:20},title:{marginBottom:5},input:{display:"block",width:"90%"},field:{marginTop:30},button:{width:"90%",marginTop:20}}}),{withTheme:!0})(ka),Oa=a(433),_a=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={loadedUser:null,supervisor:null,isAdmin:!1,isHr:!1,isSuperTimesheetApprover:!1,marks:Oa,laborGradeId:"",laborGradeName:"",vacation:"",supervisorSelected:!1,supervisorFirstName:"",supervisorLastName:"",marksValue:0},n.fetchData=n.fetchData.bind(Object(p.a)(n)),n.formHandler=n.formHandler.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n.selectSupervisor=n.selectSupervisor.bind(Object(p.a)(n)),n.valueLabelFormat=n.valueLabelFormat.bind(Object(p.a)(n)),n.getSliderValue=n.getSliderValue.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.fetchData(e),this.setState({errorAlert:!1,successAlert:!1})}},{key:"valueLabelFormat",value:function(e){return this.state.marks[e].label}},{key:"getSliderValue",value:function(e){this.setState({laborGradeId:this.state.marks[e].label,laborGradeName:this.state.marks[e].name})}},{key:"selectSupervisor",value:function(e,t,a){this.setState({supervisorId:e,supervisorFirstName:t,supervisorLastName:a})}},{key:"formHandler",value:function(e){this.setState(Object(Oe.a)({},e.target.name,e.target.value)),this.state.newPassword.length>0&&this.state.confirmPassword.length>0&&this.setState({passwordChange:!0})}},{key:"handleSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i,c,u,m,p,h,d=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token"),a=this.state.loadedUser,n=this.state,r=n.firstName,s=n.lastName,o=n.laborGradeId,i=n.laborGradeName,c=n.supervisorId,u=n.vacation,m=n.oldPassword,p=n.newPassword,h=n.confirmPassword,e.prev=3,m==a.password&&p==h){e.next=8;break}this.setState({errorAlert:!0}),e.next=19;break;case 8:return a.first_name=r,a.last_name=s,a.labor_grade_id.labor_grade_id=o,a.labor_grade_id.labor_grade_name=i,a.vacation=u,a.supervisor_id=c,a.password=p,console.log(a),e.next=18,w.updateEmployee(this.props.loadedUser.employee_id,t,a);case 18:this.setState({successAlert:!0});case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),this.setState({errorAlert:!0});case 24:setTimeout((function(){d.setState({successAlert:!1,errorAlert:!1})}),1e3);case 25:case"end":return e.stop()}}),e,this,[[3,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getEmployeeById(this.props.match.params.id,t);case 3:return a=e.sent,e.next=6,w.getEmployeeById(a.supervisor_id,t);case 6:for(r in n=e.sent,this.setState({loadedUser:a,firstName:a.first_name,lastName:a.last_name,laborGradeId:a.labor_grade_id.labor_grade_id,laborGradeName:a.labor_grade_id.labor_grade_name,supervisorId:a.supervisor_id,isAdmin:a.is_admin,isHr:a.is_hr_staff,vacation:a.vacation,isSuperTimesheetApprover:a.is_super_timesheet_approver,oldPassword:"",newPassword:"",confirmPassword:"",supervisor:n,supervisorFirstName:n.first_name,supervisorLastName:n.last_name}),this.state.marks)this.state.marks[r].label==this.state.laborGradeId&&this.setState({marksValue:r});e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),this.props.sessionLogoutHandler();case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.hr,n=this.state,s=n.loadedUser,o=n.supervisor;return r.a.createElement("div",{className:t.root},this.state.errorAlert?r.a.createElement(re,{config:{message:"error",variant:"error"}}):null,this.state.successAlert?r.a.createElement(re,{config:{message:"success",variant:"success"}}):null,s&&o?r.a.createElement(X.a,{className:t.paper,elevation:2},r.a.createElement($e.a,{container:!0,spacing:1},r.a.createElement(ua,{loadedUser:s,isHr:this.state.isHr,isAdmin:this.state.isAdmin,isSuperTimesheetApprover:this.state.isSuperTimesheetApprover}),r.a.createElement(Te.a,{orientation:"vertical",flexItem:!0,className:t.divider}),r.a.createElement(ya,{loadedUser:s,supervisor:o,hr:a,formHandler:this.formHandler,value:this.state.value,selectSupervisor:this.selectSupervisor,supervisorName:"".concat(this.state.supervisorFirstName," ").concat(this.state.supervisorLastName),valueLabelFormat:this.valueLabelFormat,getSliderValue:this.getSliderValue,marks:this.state.marks,marksValue:this.state.marksValue}),r.a.createElement(Te.a,{orientation:"vertical",flexItem:!0,className:t.divider}),r.a.createElement(wa,{loadedUser:s,hr:a,formHandler:this.formHandler,handleSubmit:this.handleSubmit}))):r.a.createElement(de.a,null))}}]),a}(n.Component),Na=Object(A.a)((function(){return{root:{flexGrow:1},paper:{height:750},divider:{margin:45,height:690}}}),{withTheme:!0})(_a),Sa=a(977),Ca=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{item:!0,xs:2,className:t.container},r.a.createElement(be.a,{className:t.avatar,alt:"employee photo"},r.a.createElement(ge.a,{className:t.faceIcon})),r.a.createElement("div",{className:t.textContainer},r.a.createElement(xe.a,{className:t.textHeader},"Employee ID"),r.a.createElement(te.a,{className:t.text,name:"employeeId",onChange:function(t){return e.props.formHandler(t)},disabled:!0,fullWidth:!0,InputLabelProps:{shrink:!0}})),r.a.createElement("div",{className:t.textContainer},r.a.createElement(xe.a,{className:t.textHeaderRole},"Role"),r.a.createElement($e.a,{container:!0,spacing:1},r.a.createElement($e.a,{item:!0,xs:6},r.a.createElement("p",null,"HR")),r.a.createElement($e.a,{item:!0,xs:6},r.a.createElement(Sa.a,{checked:this.props.isHr,name:"isHr",color:"primary",onClick:this.props.isHrSwitch})),r.a.createElement($e.a,{item:!0,xs:6},r.a.createElement("p",null,"Admin")),r.a.createElement($e.a,{item:!0,xs:6},r.a.createElement(Sa.a,{checked:this.props.isAdmin,name:"isHr",color:"primary",onClick:this.props.isAdminSwitch})),r.a.createElement($e.a,{item:!0,xs:6},r.a.createElement("p",null,"Super Timesheet Approver")),r.a.createElement($e.a,{item:!0,xs:6},r.a.createElement(Sa.a,{checked:this.props.isSuperTimesheetApprover,name:"isHr",color:"primary",onClick:this.props.isSuperTimesheetApproverSwitch}))))))}}]),a}(n.Component),xa=Object(A.a)((function(){return{container:{marginTop:20},avatar:{width:100,height:100,margin:"0 auto"},textContainer:{margin:"0 auto",width:135},textHeader:{color:"black",marginBottom:10,marginTop:10},textHeaderRole:{marginTop:50,marginBottom:25},text:{borderBottom:"1px solid lightgray"},faceIcon:{width:"100%",height:"100%"},switch:{color:"green",marginLeft:100}}}),{withTheme:!0})(Ca),Da=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{item:!0,xs:4,className:t.container},r.a.createElement("div",{className:t.field},r.a.createElement(xe.a,{className:t.title,variant:"h6"}," Basic Information "),r.a.createElement(te.a,{className:t.input,disabled:!this.props.hr,helperText:"First Name",onChange:function(t){return e.props.formHandler(t)},name:"firstName",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(te.a,{className:t.input,disabled:!this.props.hr,helperText:"Middle Name",onChange:function(t){return e.props.formHandler(t)},name:"middleName",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(te.a,{className:t.input,disabled:!this.props.hr,helperText:"Last Name",name:"lastName",onChange:function(t){return e.props.formHandler(t)},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement("div",{className:t.field},r.a.createElement(Ea,{marks:this.props.marks,getSliderValue:this.props.getSliderValue,valueLabelFormat:this.props.valueLabelFormat,hr:this.props.hr})),r.a.createElement("div",{className:t.field},r.a.createElement($e.a,{container:!0,spacing:1,className:t.container},r.a.createElement($e.a,{item:!0,xs:6},r.a.createElement(ga,{hr:this.props.hr,selectSupervisor:this.props.selectSupervisor})),r.a.createElement($e.a,{item:!0,xs:6},this.props.supervisorSelected?r.a.createElement(la.a,{className:t.chip,icon:r.a.createElement(ge.a,null),label:this.props.supervisorName}):null),r.a.createElement($e.a,{item:!0,xs:6},r.a.createElement("div",{className:t.fieldVacation},r.a.createElement(xe.a,{className:t.title,variant:"h6"},"Vacation Days"),r.a.createElement(te.a,{className:t.input,helperText:"Vacation Days",type:"number",name:"vacation",onChange:function(t){return e.props.formHandler(t)},disabled:!this.props.hr,margin:"normal",InputLabelProps:{shrink:!0}})))))))}}]),a}(n.Component),Ia=Object(A.a)((function(){return{title:{marginBottom:5},paper:{height:600},input:{display:"inline-block",width:"90%"},field:{marginTop:50},fieldVacation:{marginTop:25},slider:{width:"90%"},supervisorField:{marginTop:20,marginBottom:20},supervisorName:{display:"inline"},formControl:{width:"50%",marginTop:10}}}),{withTheme:!0})(Da),Ta=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{item:!0,xs:4,className:t.container},r.a.createElement("div",{className:t.field},r.a.createElement(xe.a,{className:t.title,variant:"h6"}," Password "),r.a.createElement(te.a,{className:t.input,name:"newPassword",type:"password",helperText:"New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(te.a,{className:t.input,name:"confirmPassword",type:"password",helperText:"Confirm New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(H.a,{variant:"contained",color:"primary",className:t.button,onClick:this.props.handleSubmit},"Submit")))}}]),a}(n.Component),Pa=Object(A.a)((function(){return{container:{marginTop:20},title:{marginBottom:5},input:{display:"block",width:"90%"},field:{marginTop:30},button:{width:"90%",marginTop:20}}}),{withTheme:!0})(Ta);a(431);var La=a(433),Aa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={isHr:!1,isAdmin:!1,isSuperTimesheetApprover:!1,vacation:0,supervisorId:"",labelGradeId:"",labelGradeName:"",supervisorFirstName:"",supervisorLastName:"",supervisorSelected:!1,marks:La},n.valueLabelFormat=n.valueLabelFormat.bind(Object(p.a)(n)),n.getSliderValue=n.getSliderValue.bind(Object(p.a)(n)),n.formHandler=n.formHandler.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n.isHrSwitch=n.isHrSwitch.bind(Object(p.a)(n)),n.isAdminSwitch=n.isAdminSwitch.bind(Object(p.a)(n)),n.isSuperTimesheetApproverSwitch=n.isSuperTimesheetApproverSwitch.bind(Object(p.a)(n)),n.selectSupervisor=n.selectSupervisor.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setState({firstName:"",middleName:"",lastName:"",supervisorId:"",newPassword:"",confirmPassword:"",isHr:!1,isAdmin:!1,isSuperTimesheetApprover:!1,vacation:0,laborGradeId:La[0].label,laborGradeName:"",errorAlert:!1,successAlert:!1,marks:La,supervisorSelected:!1,supervisorFirstName:"",supervisorLastName:""})}},{key:"valueLabelFormat",value:function(e){return this.state.marks[e].label}},{key:"getSliderValue",value:function(e){this.setState({laborGradeId:this.state.marks[e].label,laborGradeName:this.state.marks[e].name})}},{key:"formHandler",value:function(e){e.preventDefault(),this.setState(Object(Oe.a)({},e.target.name,e.target.value))}},{key:"isHrSwitch",value:function(){this.setState({isHr:!this.state.isHr})}},{key:"isAdminSwitch",value:function(){this.setState({isAdmin:!this.state.isAdmin})}},{key:"isSuperTimesheetApproverSwitch",value:function(){this.setState({isSuperTimesheetApprover:!this.state.isSuperTimesheetApprover})}},{key:"selectSupervisor",value:function(e,t,a){this.setState({supervisorId:e,supervisorFirstName:t,supervisorLastName:a,supervisorSelected:!0})}},{key:"handleSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i,c,u,m,p,h,d,f,g=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=this.state,n=a.firstName,r=a.middleName,s=a.lastName,o=a.supervisorId,i=a.laborGradeId,c=a.laborGradeName,u=a.confirmPassword,m=a.isHr,p=a.isAdmin,h=a.isSuperTimesheetApprover,d=a.vacation,f={supervisor_id:o,labor_grade_id:{labor_grade_id:i,labor_grade_name:c},password:u,first_name:n,middle_name:r,last_name:s,start_date:(new Date).getTime(),end_date:null,is_admin:p,is_hr_staff:m,is_super_timesheet_approver:h,is_secondary_approver:!1,vacation:d},e.next=5,w.createEmployee(t,f);case 5:this.setState({successAlert:!0,errorAlert:!1}),setTimeout((function(){g.setState({successAlert:!1,errorAlert:!1})}),1e3);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.hr;return r.a.createElement("div",{className:t.root},this.state.errorAlert?r.a.createElement(re,{config:{message:"Submission Failed",variant:"error"}}):null,this.state.successAlert?r.a.createElement(re,{config:{message:"Submission Success!",variant:"success"}}):null,r.a.createElement(X.a,{className:t.paper,elevation:2},r.a.createElement($e.a,{container:!0,spacing:1},r.a.createElement(xa,{hr:a,formHandler:this.formHandler,isHrSwitch:this.isHrSwitch,isHr:this.state.isHr,isAdminSwitch:this.isAdminSwitch,isAdmin:this.state.isAdmin,isSuperTimesheetApproverSwitch:this.isSuperTimesheetApproverSwitch,isSuperTimesheetApprover:this.state.isSuperTimesheetApprover}),r.a.createElement(Te.a,{orientation:"vertical",flexItem:!0,className:t.divider}),r.a.createElement(Ia,{hr:a,formHandler:this.formHandler,valueLabelFormat:this.valueLabelFormat,marks:this.state.marks,laborGradeId:this.state.laborGradeId,selectSupervisor:this.selectSupervisor,supervisorName:"".concat(this.state.supervisorFirstName," ").concat(this.state.supervisorLastName),supervisorSelected:this.state.supervisorSelected,getSliderValue:this.getSliderValue}),r.a.createElement(Te.a,{orientation:"vertical",flexItem:!0,className:t.divider}),r.a.createElement(Pa,{hr:a,formHandler:this.formHandler,handleSubmit:this.handleSubmit}))))}}]),a}(n.Component),Ha=Object(A.a)((function(){return{root:{flexGrow:1},paper:{height:750},divider:{margin:45,height:690}}}),{withTheme:!0})(Aa),Fa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={data:n.props.data,wp:n.props.wp},n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"handleSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(this.state.data),t=[],a=[],n=[],this.state.data.forEach((function(e){var r=t.indexOf(e[2]);-1===r?(t.push(e[2]),a.push(parseInt(e[3])),n.push(1)):(a[r]+=parseInt(e[3]),n[r]+=1)})),r=[],s=this.state.wp.workPackagePlanCollection[0],t.forEach((function(e,t){var o={};o.project_code=s.project_code,o.work_package_id=s.work_package_id,o.type="ESTIMATE",o.start_date=(new Date).toISOString().split("T",1)[0],o.end_date=s.end_date,o.revision=i.props.revision,o.labor_grade_id=e,o.quantity=n[t],o.plan_hour=a[t],o.project_wp=s.project_wp,r.push(o)})),console.log(r),o=localStorage.getItem("token"),r.forEach(function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.createNewPlan(t,o);case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log(n),console.log(t),console.log(a);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{title:"Submit the plan"},r.a.createElement(H.a,{className:e.iconButton,color:"primary",variant:"contained",onClick:this.handleSubmit},"Submit")))}}]),a}(r.a.Component),Ma=Object(A.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(Fa),Ra=function(e,t){var a=e.history;return{selectableRows:!1,search:!1,print:!1,download:!1,filter:!1,customToolbar:function(){if(t.data.length>0)return r.a.createElement(Ma,{history:a,data:t.data,wp:t.wp,revision:t.revision})}}},Wa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={data:[],wp:n.props.location.wp,revision:0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){console.log(this.state.wp);var e=[],t=0;this.state.wp.employees.forEach((function(t){var a=[];a.push(t.employee_id),a.push(t.first_name+" "+t.last_name),a.push(t.labor_grade_id.labor_grade_id),e.push(a)}));var a=!1,n=0;if(this.state.wp.workPackagePlanCollection.forEach((function(t){console.log("WP!"),"ESTIMATE"===t.type&&(a=!0,t.revision>n&&(n=t.revision,e.forEach((function(e){console.log("in here"),e[2]===t.labor_grade_id&&(e[3]=t.plan_hour/t.quantity)}))))})),t=n+1,!a){t=1,console.log("BUDGET");var r=0;this.state.wp.workPackagePlanCollection.forEach((function(t){t.revision>r&&(console.log("Found Revision"),r=t.revision,e.forEach((function(e){console.log("Data"),console.log(e[2]),console.log(t.labor_grade_id),e[2]===t.labor_grade_id&&(console.log(t.plan_hour),e[3]=t.plan_hour/t.quantity)})))}))}this.setState({data:e,revision:t}),console.log(e)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:"datatable",title:r.a.createElement("h1",null," Iteration Progress"),options:Ra(this.props,this.state),columns:(e=this,[{name:"empId",label:"Employee ID",className:"column"},{name:"empName",label:"Employee Name",className:"column"},{name:"LG",label:"Labor Grade",className:"column"},{name:"Hours",label:"Hours",className:"column",options:{customBodyRender:function(t,a,n){return r.a.createElement("div",null,r.a.createElement("input",{type:"number",value:e.state.data[a.rowIndex][a.columnIndex],onChange:function(t){var r=e.state.data;r[a.rowIndex][a.columnIndex]=t.target.value,n(t.target.value),e.setState({data:r})}}))}}}]),data:this.state.data}));var e}}]),a}(r.a.Component),Ba=(a(749),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleClickOpen=function(){n.setState({setOpen:!0})},n.handleClickClose=function(){n.setState({setOpen:!1})},n.state={setOpen:!1,open:!1,members:[]},n.handleClickOpen=n.handleClickOpen.bind(Object(p.a)(n)),n.handleClickClose=n.handleClickClose.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({members:e.members,setOpen:e.open})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ma.a,{open:this.state.setOpen,keepMounted:!0,onClose:this.handleClickClose},r.a.createElement(ha.a,{className:"modal-container"},r.a.createElement("div",null,r.a.createElement("p",{className:"modal-title"},"Team Members")),this.state.members.map((function(e){return r.a.createElement($e.a,{container:!0,direction:"row",alignItems:"center"},r.a.createElement($e.a,{item:!0,className:"projectDetailsMargin2"},r.a.createElement(be.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},e.first_name.slice(0,1).toUpperCase(),e.last_name.slice(0,1).toUpperCase())),r.a.createElement($e.a,{item:!0},r.a.createElement(xe.a,null,e.first_name+" "+e.last_name)))})))))}}]),a}(n.Component)),Ua=(a(242),["ID","Name","Supervisor","Team"]),Va=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={wpList:e.wpList,data:[]},n.options={print:!1,responsive:"scroll",selectableRows:!1,onRowClick:function(e,t){console.log(e);var a=null;n.state.wpList.forEach((function(t){t.work_package_id===e[0]&&(a=t)})),n.props.history.push({pathname:"/workpackageDetail",state:{wp:a}})}},n.setData=n.setData.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setData(this.state.wpList)}},{key:"setData",value:function(e){var t,a=[];e.map((function(e){(t=[]).push(e.work_package_id),t.push(e.description),t.push(e.responsible_person_id.first_name+" "+e.responsible_person_id.last_name),t.push(e.employees.length),a.push(t)})),this.setState({data:a})}},{key:"render",value:function(){return r.a.createElement(P.a,{className:"WorkpackageListDT",title:"Work Packages",columns:Ua,options:this.options,data:this.state.data})}}]),a}(r.a.Component),za=a(979),Ga=a(980),Ka=a(497),Ja=a.n(Ka),Ya=a(346),Za=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={wpList:[],data:[]},n.setData=n.setData.bind(Object(p.a)(n)),n.addChildren=n.addChildren.bind(Object(p.a)(n)),n.renderTree=n.renderTree.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this;console.log("Received props"),this.setState({wpList:e.wpList},(function(){return t.setData(t.state.wpList)}))}},{key:"setData",value:function(e){var t=this,a=[],n="",r="",s=[],o={};e.sort((function(e,t){return parseInt(e.higher_work_package_id)-parseInt(t.higher_work_package_id)})),console.log(e),e.map((function(e){o={},s=[],n=e.work_package_id,r=e.description,o.id=n,o.name=r,o.children=s,"0"===e.higher_work_package_id?a.push(o):t.addChildren(a,e.higher_work_package_id,o)})),this.setState({data:a})}},{key:"addChildren",value:function(e,t,a){for(var n in e){var r=!1;e[n].id===t&&(e[n].children.push(a),r=!0),r||this.addChildren(e[n].children,t,a)}}},{key:"renderLabel",value:function(e){var t=this;return r.a.createElement(Ya.a,{display:"flex",onClick:function(a){var n=null;t.state.wpList.forEach((function(t){t.work_package_id===e.id&&(n=t)})),t.props.history.push({pathname:"/workpackageDetail",state:{wp:n,isPM:!0}}),a.stopPropagation(),a.preventDefault()}},r.a.createElement(xe.a,null,"WP"+e.id+": "+e.name))}},{key:"renderTree",value:function(e){var t=this;return console.log(e),r.a.createElement(za.a,{key:e.id,nodeId:e.id,label:this.renderLabel(e)},r.a.createElement(xe.a,{variant:"h5"},Array.isArray(e.children)?e.children.map((function(e){return t.renderTree(e)})):null))}},{key:"handleToggle",value:function(e,t){e.preventDefault(),console.log(t)}},{key:"render",value:function(){var e=this;return r.a.createElement(Ga.a,{className:"PDWPTreeView",defaultCollapseIcon:r.a.createElement(ut.a,null),defaultExpandIcon:r.a.createElement(Ja.a,null)},this.state.data.map((function(t){return e.renderTree(t)})))}}]),a}(r.a.Component),qa=a(58),Xa=(a(203),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={wpList:n.props.wpList,data:[]},n.setData=n.setData.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.props.wpList),t=[],a=[],n=[],this.props.wpList.forEach((function(e){e.work_package_id.includes("L")&&(a.push(e),e.employees.forEach((function(e){-1===t.indexOf(e.employee_id)&&t.push(e.employee_id)})))})),r=localStorage.getItem("token"),e.next=8,N.getTimesheetsByEmps(t.toString(),r);case 8:s=e.sent,o={},a.forEach((function(e){(o={}).wp=e.work_package_id,o.employees=[];var t={};e.employees.forEach((function(a){(t={}).id=a.employee_id,t.name=a.first_name+" "+a.last_name,t.hours=0,s.forEach((function(n){n.employee.employee_id===a.employee_id&&n.details.forEach((function(a){a.project_wp===e.project.project_code+"_"+e.work_package_id&&(t.hours+=a.saturday+a.sunday+a.monday+a.tuesday+a.wednesday+a.thursday+a.friday)}))})),o.employees.push(t)})),n.push(o)})),this.setState({data:n}),console.log(s),console.log(a),console.log(t),console.log(n);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=qa.e.create({container:{display:"flex",flexDirection:"row",padding:5},image:{height:30,width:30},title:{alignSelf:"center",marginLeft:5,fontSize:18},report:{marginLeft:100},date:{marginLeft:100},dataContainer:{display:"flex",alignItems:"center",flexDirection:"column",padding:20},employeesRow:{display:"flex",flexDirection:"row"},margin:{marginTop:10,marginLeft:20,marginRight:20},marginB:{marginLeft:50,marginRight:50}});return r.a.createElement(qa.a,null,r.a.createElement(qa.d,null,r.a.createElement(qa.g,{style:e.container},r.a.createElement(qa.b,{style:e.image,src:"https://cors-anywhere.herokuapp.com/https://i.imgur.com/zzNGGGB.jpg"}),r.a.createElement(qa.f,{style:e.title},"Timely"),r.a.createElement(qa.f,{style:e.report},"Report for ",this.state.wpList[0].project.project_code),r.a.createElement(qa.f,{style:e.date},(new Date).toISOString().split("T",1)[0])),this.state.data?this.state.data.map((function(t){return r.a.createElement(qa.g,{style:e.dataContainer},r.a.createElement(qa.f,null,"Work Package: ",t.wp),r.a.createElement(qa.g,{style:e.employeesRow},r.a.createElement(qa.f,{style:e.margin},"Employee ID"),r.a.createElement(qa.f,{style:e.margin},"Employee Name"),r.a.createElement(qa.f,{style:e.margin},"Hours")),t.employees?t.employees.map((function(t){return r.a.createElement(qa.g,{style:e.employeesRow},r.a.createElement(qa.f,{style:e.marginB},t.id),r.a.createElement(qa.f,{style:e.marginB},t.name),r.a.createElement(qa.f,{style:e.marginB},t.hours))})):"")})):""))}}]),a}(r.a.Component)),Qa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={projectID:n.props.location.state.projectID,project:{},wpList:[],isProjManager:null,openModal:!1},n.openModal=n.openModal.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"openModal",value:function(){this.setState({openModal:!0})}},{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,_.getDetailsById(this.state.projectID,t);case 3:a=e.sent,console.log(a),this.setState({project:a.project,wpList:a.wpList,isProjManager:a.projManager}),console.log(this.state.project.project_manager_id.first_name);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement($e.a,{container:!0,spacing:3},r.a.createElement($e.a,{item:!0,xs:12,sm:6,className:"gridBorder"},r.a.createElement(xe.a,{variant:"h4"},this.state.project.project_name),r.a.createElement(xe.a,{variant:"h6"},this.state.project.description)),this.state.project.hasOwnProperty("project_manager_id")&&r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{item:!0,xs:12,sm:3},r.a.createElement(xe.a,{variant:"h6"},"Project Manager:"),r.a.createElement($e.a,{container:!0,direction:"row",alignItems:"center"},r.a.createElement($e.a,{item:!0,className:"projectDetailsMargin"},r.a.createElement(be.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},this.state.project.project_manager_id.first_name.slice(0,1).toUpperCase(),this.state.project.project_manager_id.last_name.slice(0,1).toUpperCase())),r.a.createElement($e.a,{item:!0},r.a.createElement(xe.a,null,this.state.project.project_manager_id.first_name+" "+this.state.project.project_manager_id.last_name)))),r.a.createElement($e.a,{item:!0,xs:6,sm:3},r.a.createElement(xe.a,{variant:"h6"},"Team:"),r.a.createElement($e.a,{container:!0,direction:"row",alignItems:"center"},this.state.project.employees.slice(0,5).map((function(e){return r.a.createElement($e.a,{item:!0,className:"projectDetailsMargin"},r.a.createElement(L.a,{title:e.first_name+" "+e.last_name},r.a.createElement(be.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},e.first_name.slice(0,1).toUpperCase(),e.last_name.slice(0,1).toUpperCase())))})),this.state.project.employees.length>5&&r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{onClick:this.openModal},"Show More"),r.a.createElement(Ba,{open:this.state.openModal,members:this.state.project.employees})))))),this.state.isProjManager&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement($e.a,{justify:"space-between",container:!0,spacing:1},r.a.createElement($e.a,{item:!0},r.a.createElement(xe.a,{variant:"h6"},r.a.createElement("b",null,"Budget:")," $",this.state.project.budget_dollar),r.a.createElement(xe.a,{variant:"h6"},r.a.createElement("b",null,"Start Date:")," ",new Date(this.state.project.start_date).toDateString().split(" ").slice(1).join(" ")," ","\xa0 \xa0",r.a.createElement("b",null,"End Date:")," ",new Date(this.state.project.end_date).toDateString().split(" ").slice(1).join(" "))),r.a.createElement($e.a,{item:!0},r.a.createElement(H.a,{variant:"contained",color:"primary",component:D.b,to:{pathname:"/createWorkpackage",project:this.state.project,wpList:this.state.wpList},style:{marginRight:"5%"}},r.a.createElement("b",null,"+ Create Work Package"))))),!1===this.state.isProjManager?r.a.createElement(Va,{history:this.props.history,type:this.state.isProjManager?"PM":"Emp",wpList:this.state.wpList}):r.a.createElement($e.a,{container:!0,justify:"center",className:"PDWorkpackageTree",direction:"column"},r.a.createElement($e.a,{item:!0},r.a.createElement(Za,{wpList:this.state.wpList,history:this.props.history})),r.a.createElement("br",null),this.state.wpList.length>0&&r.a.createElement($e.a,{item:!0},r.a.createElement(qa.c,{document:r.a.createElement(Xa,{wpList:this.state.wpList}),fileName:this.state.projectID+"_report.pdf",style:{textDecoration:"none",padding:"10px",color:"#4a4a4a",backgroundColor:"#f2f2f2",border:"1px solid #4a4a4a"}},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Loading document...":"Get Report"})))))}}]),a}(r.a.Component),$a=[{name:"WpId",label:"WorkPackage ID",className:"column"},{name:"PM",label:"Project Manager",className:"column"},{name:"Members",label:"Members",className:"column"}],en=function(e,t){e.history;return{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,onRowClick:function(a,n){console.log(a);var r=null;t.forEach((function(e){e.work_package_id===a[0]&&(r=e)})),e.history.push({pathname:"/workpackageDetail",state:{wp:r,isPM:!1,isRE:!0}})},textLabels:{body:{noMatch:r.a.createElement("p",null,"Sorry, you are not responsible for any work pacakges.")}}}},tn=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={data:[],token:null,wpList:[]},n.fetchData=n.fetchData.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.setState({token:e}),this.fetchData(e)}},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,a=JSON.parse(sessionStorage.getItem("user")),n=a.employee_id,e.next=5,C.getAllWorkpackageFromRE(n,t);case 5:null!=(r=e.sent)&&this.setState({wpList:r}),console.log(r),s=[],r.forEach(function(){var e=Object(c.a)(l.a.mark((function e(t){var a,n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.work_package_id,n=t.project.project_manager_id.first_name+" "+t.project.project_manager_id.last_name,r=t.employees.length,o=[],a.endsWith("L")&&(o.push(a),o.push(n),o.push(r),s.push(o));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({data:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:"datatable",title:r.a.createElement("h1",null," WorkPackage Reports"),options:en(this.props,this.state.wpList),columns:$a,data:this.state.data}))}}]),a}(n.Component),an=a(484),nn=a(426),rn=(a(345),function(e){var t=[];e.project.employees.map((function(e){var a={};a.value=e.employee_id,a.label=e.first_name+" "+e.last_name,t.push(a)}));var a=[];return a.push({value:"",label:"Project Level"}),e.wpList.map((function(e){if("L"!==e.work_package_id.substring(e.work_package_id.length-1)){var t={};t.value=e.work_package_id,t.label="WP"+e.work_package_id+": "+e.description,a.push(t)}})),r.a.createElement("form",{autoComplete:"off"},r.a.createElement($e.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement($e.a,{item:!0},r.a.createElement(te.a,{component:"span",className:"WPInfowidth",label:"Work Package ID",name:"wpID",value:"WP"+e.wpID,onChange:e.handleChange,disabled:!0})),r.a.createElement($e.a,{item:!0},r.a.createElement(nn.a,{control:r.a.createElement(an.a,{checked:e.checkedLower,onChange:e.handleCheckboxChange,name:"checkedLower"}),label:"Lowest Work Package"})),r.a.createElement("br",null),r.a.createElement($e.a,{item:!0},r.a.createElement(te.a,{component:"span",className:"WPInfowidth",label:"Work Package Name",name:"wpName",value:e.wpName,onChange:e.handleChange})),r.a.createElement("br",null),r.a.createElement($e.a,{item:!0},r.a.createElement(te.a,{select:!0,label:"Responsible Engineer",className:"WPInfowidth",name:"wpRE",value:e.wpRE,onChange:e.handleChange},t.map((function(e){return r.a.createElement(ee.a,{key:e.value,value:e.value},e.label)})))),r.a.createElement("br",null),r.a.createElement($e.a,{item:!0},r.a.createElement(te.a,{component:"span",className:"WPInfowidth",label:"Parent Project",value:e.project.project_code+": "+e.project.project_name,onChange:e.handleChange,disabled:!0})),r.a.createElement("br",null),r.a.createElement($e.a,{item:!0},r.a.createElement(te.a,{select:!0,label:"Parent Work Package",className:"WPInfowidth",name:"wpParent",value:e.wpParent,onChange:e.handleChange},a.map((function(e){return r.a.createElement(ee.a,{key:e.value,value:e.value},e.label)}))))))}),sn=function(e){return r.a.createElement(ta.a,{multiple:!0,options:e.project.employees,onChange:function(t,a){return e.handleTagsChange(a)},getOptionLabel:function(e){return e.first_name+" "+e.last_name+" ("+e.labor_grade_id.labor_grade_id+")"},disabled:e.isDisabled,renderInput:function(e){return r.a.createElement(te.a,Object.assign({},e,{variant:"standard",label:"Select Employees"}))}})},on=Object(xt.a)((function(e){return{root:{width:"100%"},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));function ln(e){var t=on(),a=(JSON.parse(sessionStorage.getItem("user")),Object(n.useState)({wpID:"",wpName:"",wpRE:"",wpParent:"",Desc:"",cost:"",startDate:new Date,endDate:new Date,checkedLower:!1,wpList:e.location.wpList,project:e.location.project,wpEmps:[]})),s=Object(ie.a)(a,2),o=s[0],i=s[1],u=r.a.useState(!1),m=Object(ie.a)(u,2),p=m[0],h=m[1],d=r.a.useState(!1),f=Object(ie.a)(d,2),g=f[0],b=f[1],v=function(){var t=Object(c.a)(l.a.mark((function t(){var a,n,r,s,i,c,u,m,p,d,f,g,v;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),console.log(a),!o.checkedLower){t.next=20;break}return t.next=5,S.getYearlyRate(a);case 5:for(m in r=t.sent,console.log(r),s=o.cost,i=[],c={},o.wpEmps)c={},p=o.wpEmps[m].labor_grade_id.labor_grade_id,u=!1,i.forEach((function(e){e.id===p&&(e.count++,u=!0)})),u||(c.id=p,c.count=1,r.forEach((function(e){e.labor_grade_id.labor_grade_id===p&&(c.rate=e.charge_rate)})),i.push(c));d=E(s,i),f={},g=[],i.forEach((function(e){(f={}).project_code=o.project.project_code,f.work_package_id=o.wpID,f.type="BUDGET",f.start_date=o.startDate.toISOString().split("T",1)[0],f.end_date=o.endDate.toISOString().split("T",1)[0],f.revision=1,f.labor_grade_id=e.id,f.quantity=e.count,f.plan_hour=d,f.project_wp=o.project.project_code+"_"+o.wpID,g.push(f)})),v=[],o.wpEmps.forEach((function(e){v.push(e)})),n={project:o.project,work_package_id:o.wpID,higher_work_package_id:o.wpParent,responsible_person_id:{employee_id:o.wpRE},is_open:1,description:o.wpName+": "+o.Desc,project_wp:o.project.project_code+"_"+o.wpID,workPackagePlanCollection:g,employees:v},t.next=21;break;case 20:n={project:o.project,work_package_id:o.wpID,higher_work_package_id:o.wpParent,responsible_person_id:{employee_id:o.wpRE},is_open:1,description:o.wpName+": "+o.Desc,project_wp:o.project.project_code+"_"+o.wpID,employees:[]};case 21:return console.log(JSON.stringify(n)),t.prev=22,t.next=25,C.createWorkpackage(n,a);case 25:h(!0),b(!1),t.next=33;break;case 29:t.prev=29,t.t0=t.catch(22),h(!1),b(!1);case 33:setTimeout((function(){b(!1),h(!1),e.history.push("/dashboard/projectDetails")}),1e3);case 34:case"end":return t.stop()}}),t,null,[[22,29]])})));return function(){return t.apply(this,arguments)}}(),E=function(e,t){var a=0,n=0;return t.forEach((function(e){a+=e.rate*e.count,n+=e.count})),a/=n,(parseInt(e)/a/n).toFixed(2)},j=r.a.useState(0),y=Object(ie.a)(j,2),k=y[0],w=y[1],O=["Work-Package Information","Work-Package Description","Budget","Schedule","Employees"];return r.a.createElement("div",{className:t.root},g?r.a.createElement(re,{config:{message:"Work Package Submission Failed",variant:"error"}}):null,p?r.a.createElement(re,{config:{message:"Work Package Submission Successful!",variant:"success"}}):null,r.a.createElement(Dt.a,{activeStep:k,alternativeLabel:!0},O.map((function(e){return r.a.createElement(It.a,{key:e},r.a.createElement(Tt.a,null,e))}))),r.a.createElement("div",null,k===O.length?r.a.createElement("div",null,r.a.createElement(xe.a,{component:"span",className:t.instructions},"All steps completed"),r.a.createElement(H.a,{onClick:function(){w(0)}},"Reset")):r.a.createElement("div",null,r.a.createElement(xe.a,{component:"span",className:t.instructions},function(e,t,a,n,s,o,i){switch(e){case 0:return r.a.createElement(rn,{wpList:t.wpList,project:t.project,wpID:t.wpID,wpName:t.wpName,wpRE:t.wpRE,wpParent:t.wpParent,checkedLower:t.checkedLower,handleChange:a,handleCheckboxChange:o});case 1:return r.a.createElement(At,{Desc:t.Desc,handleChange:a});case 2:return r.a.createElement(Ht,{cost:t.cost,handleChange:a,isDisabled:!t.checkedLower});case 3:return r.a.createElement(Bt,{startDate:t.startDate,endDate:t.endDate,handleStartChange:n,handleEndChange:s,isDisabled:!t.checkedLower});case 4:return r.a.createElement(sn,{handleTagsChange:i,project:t.project,wpEmps:t.wpEmps,isDisabled:!t.checkedLower})}}(k,o,(function(e){var t=e.target,a=t.name,n=t.value;if(i(Object(Ct.a)({},o,Object(Oe.a)({},a,n))),"wpParent"===a){var r=-1,s=o.wpList;for(var l in s.sort(),s)s[l].work_package_id.startsWith(n)&&parseInt(s[l].work_package_id).toString().length===n.length+1&&(r=parseInt(s[l].work_package_id)+1);-1===r&&(r=10*parseInt(n)+1),console.log(r);var c=r;c+=o.checkedLower?"L":"",console.log(c),i(Object(Ct.a)({},o,{wpID:c,wpParent:""===n?"0":n}))}}),(function(e){i(Object(Ct.a)({},o,{startDate:e}))}),(function(e){i(Object(Ct.a)({},o,{endDate:e}))}),(function(e){var t;i(Object(Ct.a)({},o,(t={},Object(Oe.a)(t,e.target.name,e.target.checked),Object(Oe.a)(t,"wpID",e.target.checked?o.wpID+"L":o.wpID.replace("L","")),t)))}),(function(e){console.log(e),i(Object(Ct.a)({},o,{wpEmps:e}))}))),r.a.createElement("div",null,r.a.createElement(H.a,{disabled:0===k,onClick:function(){w((function(e){return e-1}))},className:t.backButton},"Back"),k===O.length-1&&r.a.createElement(H.a,{variant:"contained",color:"primary",onClick:v},"Finish"),k!=O.length-1&&r.a.createElement(H.a,{variant:"contained",color:"primary",onClick:function(){w((function(e){return e+1}))}},"Next")))))}var cn=a(190),un=a.n(cn),mn=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={options:{chart:{id:"basic-bar"},title:{text:"Employee hours spent",align:"center",margin:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"20px",color:"#263238"}},tooltip:{enabled:!0,x:{show:!0,formatter:function(e,t){return n.state.emps[t.dataPointIndex]}}},xaxis:{categories:[],axisBorder:{show:!0,color:"#78909C",height:1,width:"100%",offsetX:0,offsetY:0},title:{text:"Employees",style:{fontSize:"16px",color:"#263238"}}},yaxis:{axisBorder:{show:!0,color:"#78909C",height:1,offsetX:0,offsetY:0},title:{text:"Hours",style:{fontSize:"16px",color:"#263238"}}}},series:[{name:"Hours",data:[]}],emps:[],week:n.props.week},n.handleWeekChange=n.handleWeekChange.bind(Object(p.a)(n)),n.getWeeksMap=n.getWeeksMap.bind(Object(p.a)(n)),n.setGraphValues=n.setGraphValues.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setGraphValues()}},{key:"setGraphValues",value:function(){var e=this,t=[],a=[];this.props.EmpsX.forEach((function(e){t.push(e.employee_id),a.push(e.first_name+" "+e.last_name+" ("+e.labor_grade_id.labor_grade_id+")")}));var n=this.props.wp.project.project_code,r=this.props.wp.work_package_id,s=[];console.log(this.state.week),t.forEach((function(t){var a=0;e.props.EmpsY.forEach((function(s){s.employee.employee_id===t&&s.week===e.state.week&&s.details.forEach((function(e){e.project_code===n&&e.work_package_id===r&&(a+=e.saturday+e.sunday+e.monday+e.tuesday+e.wednesday+e.thursday+e.friday)}))})),s.push(a)})),console.log(s),this.setState((function(e){return{options:Object(Ct.a)({},e.options,{xaxis:Object(Ct.a)({},e.options.xaxis,{categories:t})}),series:[Object(Ct.a)({},e.series,{data:s})],emps:a}}))}},{key:"handleWeekChange",value:function(e){var t=this;console.log(e.target.value),this.setState({week:e.target.value},(function(){return t.setGraphValues()}))}},{key:"getWeeksMap",value:function(){var e=[],t=new Date(this.props.wp.workPackagePlanCollection[0].start_date),a=new Date(this.props.wp.workPackagePlanCollection[0].end_date);console.log(t),console.log(a);var n=t.getDay();n>-1&&n<6&&t.setDate(t.getDate()+(6-n)),a.getDay()<6&&a.setDate(a.getDate()+(6-a.getDay())),console.log(t),console.log(a);for(var r=t;r<=a;)e.push({label:r.toISOString().split("T",1)[0],value:r.getWeek()}),r.setDate(r.getDate()+7);return e}},{key:"render",value:function(){var e=[];return this.props.wp.workPackagePlanCollection.length>0&&(e=this.getWeeksMap()),r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"mixed-chart"},r.a.createElement(te.a,{select:!0,label:"Week Ending",className:"WPInfowidth",name:"week",value:this.state.week,onChange:this.handleWeekChange},e.map((function(e){return r.a.createElement(ee.a,{key:e.value,value:e.value},e.label)}))),r.a.createElement(un.a,{options:this.state.options,series:this.state.series,type:"bar",width:"500"}))))}}]),a}(r.a.Component),pn=a(283),hn=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={series:[],options:{chart:{height:350,type:"line",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},colors:["#fc0303","#035efc","#17b309"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},title:{text:"Budget vs Actual hours spent per labor grade",align:"center"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}},markers:{size:1},xaxis:{categories:[],title:{text:"Labor Grades"}},yaxis:{title:{text:"Hours"}},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}},wp:n.props.wp,tsheets:n.props.tsheets,startDate:"",endDate:""},n.calcValues=n.calcValues.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.calcValues()}},{key:"calcValues",value:function(){var e=this;console.log(this.state.wp);var t=[],a=[],n=[],r=[];this.state.wp.workPackagePlanCollection.forEach((function(e){var n=0;"BUDGET"===e.type?(t.push(e.labor_grade_id),a.push(parseInt(e.plan_hour))):e.revision>n&&(n=e.revision,r[t.indexOf(e.labor_grade_id)]=parseInt(e.plan_hour))}));for(var s=0;s<t.length;s++)n.push(0);console.log(this.state.tsheets),this.state.tsheets.forEach((function(a){a.details.forEach((function(r){console.log(r.project_wp),console.log(e.state.wp.project_wp),r.project_wp===e.state.wp.project_wp&&(n[t.indexOf(a.employee.labor_grade_id.labor_grade_id)]+=parseInt(r.saturday+r.sunday+r.monday+r.tuesday+r.wednesday+r.thursday+r.friday))}))})),console.log(t),console.log(a),console.log(n),console.log(r);var o=new Date(this.state.wp.workPackagePlanCollection[0].start_date).toISOString().split("T",1)[0],i=new Date(this.state.wp.workPackagePlanCollection[0].end_date).toISOString().split("T",1)[0];this.setState((function(e){return{series:[].concat(Object(pn.a)(e.series),[{name:"Budgeted",data:a},{name:"Done",data:n},{name:"Remaining RE estimate",data:r}]),options:Object(Ct.a)({},e.options,{xaxis:Object(Ct.a)({},e.options.xaxis,{categories:t})}),startDate:o,endDate:i}}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(un.a,{options:this.state.options,series:this.state.series,type:"line",height:"500",width:"800"}),r.a.createElement(xe.a,{variant:"h6"},this.state.startDate," - ",this.state.endDate))}}]),a}(r.a.Component),dn=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={series:[],options:{chart:{height:350,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight"},title:{text:"RE estimations",align:"left"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{categories:[],title:{text:"Date"}},yaxis:{title:{text:"Hours"}},tooltip:{enabled:!0,y:{show:!0,formatter:function(e,t){return e+" hrs "+n.state.graphValueObj[t.dataPointIndex]}}}},wp:n.props.wp,graphValueObj:[]},n.calcGraphValus=n.calcGraphValus.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.calcGraphValus()}},{key:"calcGraphValus",value:function(){var e=[],t=[],a=[],n={};this.state.wp.workPackagePlanCollection.forEach((function(r){if("ESTIMATE"===r.type){n={};var s=new Date(r.start_date).toISOString().split("T",1)[0];-1===e.indexOf(s)&&(e.push(s),t[e.indexOf(s)]=0,a.push([])),t[e.indexOf(s)]+=r.plan_hour,n.id=r.labor_grade_id,n.hours=r.plan_hour,a[e.indexOf(s)].push(n)}}));var r=[];a.forEach((function(e){var t="";e.forEach((function(e){t+=e.id+": "+e.hours})),r.push(t)})),this.setState((function(a){return{series:[].concat(Object(pn.a)(a.series),[{name:"RE estimate",data:t}]),options:Object(Ct.a)({},a.options,{xaxis:Object(Ct.a)({},a.options.xaxis,{categories:e})}),graphValueObj:r}})),console.log(e),console.log(t),console.log(a)}},{key:"render",value:function(){return r.a.createElement(un.a,{options:this.state.options,series:this.state.series,type:"line",height:"500",width:"800"})}}]),a}(r.a.Component),fn=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={wp:n.props.location.state.wp,isProjManager:n.props.location.state.isPM,isRE:!!n.props.location.state.isRE&&n.props.location.state.isRE,emps:[],timesheets:[],week:0,openModal:!1},n.openModal=n.openModal.bind(Object(p.a)(n)),n.calcValuesEmpHours=n.calcValuesEmpHours.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"openModal",value:function(){this.setState({openModal:!0})}},{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.calcValuesEmpHours();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calcValuesEmpHours",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=[],this.state.wp.employees.forEach((function(e){a.push(e.employee_id)})),e.next=5,N.getTimesheetsByEmps(a.toString(),t);case 5:n=e.sent,r=new Date,s=r.getWeek(),r.getDay()>0&&r.getDay()<6&&s--,this.setState({emps:this.state.wp.employees,week:s,timesheets:n}),console.log(n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement($e.a,{container:!0,spacing:3},r.a.createElement($e.a,{item:!0,xs:12,sm:6,className:"gridBorder"},r.a.createElement(xe.a,{variant:"h4"},this.state.wp.description),r.a.createElement(xe.a,{variant:"h6"},this.state.wp.description)),r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{item:!0,xs:12,sm:3},r.a.createElement(xe.a,{variant:"h6"},"Responsible Engineer:"),r.a.createElement($e.a,{container:!0,direction:"row",alignItems:"center"},r.a.createElement($e.a,{item:!0,className:"projectDetailsMargin"},r.a.createElement(be.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},this.state.wp.responsible_person_id.first_name.slice(0,1).toUpperCase(),this.state.wp.responsible_person_id.last_name.slice(0,1).toUpperCase())),r.a.createElement($e.a,{item:!0},r.a.createElement(xe.a,null,this.state.wp.responsible_person_id.first_name+" "+this.state.wp.responsible_person_id.last_name)))),r.a.createElement($e.a,{item:!0,xs:6,sm:3},r.a.createElement(xe.a,{variant:"h6"},"Team:"),r.a.createElement($e.a,{container:!0,direction:"row",alignItems:"center"},this.state.wp.employees.slice(0,5).map((function(e){return r.a.createElement($e.a,{item:!0,className:"projectDetailsMargin"},r.a.createElement(L.a,{title:e.first_name+" "+e.last_name},r.a.createElement(be.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},e.first_name.slice(0,1).toUpperCase(),e.last_name.slice(0,1).toUpperCase())))})),this.state.wp.employees.length>5&&r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{onClick:this.openModal},"Show More"),r.a.createElement(Ba,{open:this.state.openModal,members:this.state.wp.employees})))))),this.state.isProjManager&&this.state.emps.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(mn,{EmpsX:this.state.emps,week:50,EmpsY:this.state.timesheets,wp:this.state.wp}),r.a.createElement("br",null),r.a.createElement(hn,{tsheets:this.state.timesheets,wp:this.state.wp}),r.a.createElement("br",null)),this.state.isRE&&r.a.createElement(r.a.Fragment,null,r.a.createElement(hn,{tsheets:this.state.timesheets,wp:this.state.wp}),r.a.createElement("br",null),r.a.createElement(dn,{wp:this.state.wp}),r.a.createElement("br",null),r.a.createElement(H.a,{color:"primary",component:D.b,to:{pathname:"/newIterationPlan",wp:this.state.wp}},"New Plan")))}}]),a}(r.a.Component),gn=[{name:"employeeId",label:"Employee ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"}],bn=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={data:[]},n.fetchData=n.fetchData.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getEmployees",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),n=w.getEmployeesBySupervisor(a.employee_id,t),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,console.log(this.props),e.next=4,this.getEmployees();case 4:for(t=e.sent,a=[],n=0;n<t.length;n++)r=t[n].employee_id,s=t[n].first_name,o=t[n].last_name,(i=[]).push(r),i.push(s),i.push(o),a.push(i);this.setState({data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.props.classes;return r.a.createElement("div",null,r.a.createElement(P.a,{className:"datatable",title:r.a.createElement("h1",null,"Employees"),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,onRowClick:function(t,a){localStorage.setItem("name",t[1]+" "+t[2]),e.props.history.push("/dashboard/tsapprover/".concat(t[0]))}}),columns:gn,data:this.state.data}))}}]),a}(n.Component),vn=[{name:"timesheetid",label:"Timesheet ID",className:"column",options:{filter:!1}},{name:"weeknumber",label:"Week Number",className:"column",options:{filter:!1}},{name:"weekending",label:"Week Ending",className:"column",options:{sort:!0,filter:!1}}],En=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={timesheets:[],loadedUserID:{}},n.fetchTimesheets=n.fetchTimesheets.bind(Object(p.a)(n)),n.formatWeekEnding=n.formatWeekEnding.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchTimesheets(),this.formatWeekEnding()}},{key:"fetchTimesheets",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s,o,i,c,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=this.props.match.params.id,e.next=4,N.getAllCloseTimesheetsByEmp(a,t);case 4:if(0!=(n=e.sent).length){for(r=[],s=0;s<n.length;s++)o=n[s].timesheet_id,i=n[s].week,c=this.formatWeekEnding(n[s].week_ending),(u=[]).push(o),u.push(i),u.push(c),r.push(u);r.sort((function(e,t){return t[1]-e[1]})),this.setState({timesheets:r,loadedUserID:a})}else console.log("no timesheets");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formatWeekEnding",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:"datatable",title:r.a.createElement("h1",null,"Timesheets To Approve For ",localStorage.name),options:(e=this.props,this.state,this.fetchTimesheets,{selectableRows:!1,search:!0,print:!1,download:!1,rowHover:!0,onRowClick:function(t){e.history.push("/dashboard/tsapprover/".concat(e.match.params.id,"/").concat(t[0])),localStorage.setItem("timesheetId",t[0])}}),columns:vn,data:this.state.timesheets}));var e}}]),a}(n.Component),jn=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getCurrentDate=n.getCurrentDate.bind(Object(p.a)(n)),n.approveTimesheet=n.approveTimesheet.bind(Object(p.a)(n)),n.rejectTimesheet=n.rejectTimesheet.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"getCurrentDate",value:function(){return(new Date).getTime()}},{key:"approveTimesheet",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),n=this.props.match.params,e.next=5,N.getTimesheetById(n.id,t,n.tsid);case 5:return(r=e.sent).status="APPROVED",r.approver_id=a.employee_id,r.approve_date=this.getCurrentDate(),e.next=11,N.updateTimesheetById(n.id,t,n.tsid,r);case 11:s=e.sent,console.log(s),this.props.history.push("/dashboard/tsapprover/".concat(n.id));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rejectTimesheet",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),n=this.props.match.params,e.next=5,N.getTimesheetById(n.id,t,n.tsid);case 5:return(r=e.sent).status="OPEN",r.approver_id=a.employee_id,r.approve_date=this.getCurrentDate(),e.next=11,N.updateTimesheetById(n.id,t,n.tsid,r);case 11:s=e.sent,console.log(s),this.props.history.push("/dashboard/tsapprover/".concat(n.id));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,Object.assign({loadedUser:this.props.match.params.tsid},this.props)),r.a.createElement(H.a,{variant:"contained",color:"primary",onClick:this.approveTimesheet},"Approve"),r.a.createElement(H.a,{variant:"contained",color:"secondary",onClick:this.rejectTimesheet},"Reject"))}}]),a}(n.Component),yn=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e,t=this;switch(this.props.config.option){case"dashboard":e=r.a.createElement(I.d,null,r.a.createElement(I.b,{path:"/dashboard/timesheet",exact:!0,render:function(e){return r.a.createElement(W,e)}}),r.a.createElement(I.b,{path:"/dashboard/timesheet/:id",exact:!0,render:function(e){return r.a.createElement(oe,Object.assign({loadedUser:t.props.config.loadedUser,logoutHandler:t.props.logoutHandler},e))}}),r.a.createElement(I.b,{path:"/dashboard/hr",exact:!0,render:function(e){return r.a.createElement(we,Object.assign({loadedUser:t.props.config.loadedUser},e))}}),r.a.createElement(I.b,{path:"/dashboard/profile/:id",exact:!0,render:function(e){return r.a.createElement(Na,Object.assign({hr:!1,sessionLogoutHandler:t.props.config.sessionLogoutHandler,loadedUser:t.props.config.loadedUser},e))}}),r.a.createElement(I.b,{exact:!0,path:"/dashboard/hr/create",render:function(e){return r.a.createElement(Ha,Object.assign({hr:!0,createEmployee:!0,loadedUser:t.props.config.loadedUser},e))}}),r.a.createElement(I.b,{path:"/dashboard/hr/:id",exact:!0,render:function(e){return r.a.createElement(Na,Object.assign({hr:!0,createEmployee:!1,loadedUser:t.props.config.loadedUser},e))}}),r.a.createElement(I.b,{path:"/dashboard/supervisor",exact:!0,render:function(e){return r.a.createElement(ea,e)}}),r.a.createElement(I.b,{path:"/dashboard/supervisor/remove",exact:!0,render:function(e){return r.a.createElement(na,e)}}),r.a.createElement(I.b,{path:"/dashboard/supervisor/assign",exact:!0,render:function(e){return r.a.createElement(sa,e)}}),r.a.createElement(I.b,{path:"/dashboard/supervisor/:id",exact:!0,render:function(e){return r.a.createElement(ia,e)}}),r.a.createElement(I.b,{path:"/dashboard/tsapprover",exact:!0,render:function(e){return r.a.createElement(bn,e)}}),r.a.createElement(I.b,{path:"/dashboard/tsapprover/:id",exact:!0,render:function(e){return r.a.createElement(En,e)}}),r.a.createElement(I.b,{path:"/dashboard/tsapprover/:id/:tsid",exact:!0,render:function(e){return r.a.createElement(jn,e)}}),r.a.createElement(I.b,{path:"/dashboard/projects",exact:!0,render:function(e){return r.a.createElement(St,e)}}),r.a.createElement(I.b,{path:"/createProject",exact:!0,render:function(e){return r.a.createElement(Vt,e)}}),r.a.createElement(I.b,{path:"/projectDetails",exact:!0,render:function(e){return r.a.createElement(Qa,e)}}),r.a.createElement(I.b,{path:"/createWorkpackage",exact:!0,render:function(e){return r.a.createElement(ln,e)}}),r.a.createElement(I.b,{path:"/workpackageDetail",exact:!0,render:function(e){return r.a.createElement(fn,e)}}),r.a.createElement(I.b,{path:"/newIterationPlan",exact:!0,render:function(e){return r.a.createElement(Wa,e)}}),r.a.createElement(I.b,{path:"/dashboard/lead",exact:!0,render:function(e){return r.a.createElement(tn,e)}}),r.a.createElement(I.b,{path:"/dashboard/:id",exact:!0,render:function(e){return r.a.createElement(Yt,Object.assign({token:t.props.token},e))}}));break;case"login":e=r.a.createElement(I.d,null,r.a.createElement(I.b,{path:"/",exact:!0,render:function(e){return r.a.createElement(_e,Object.assign({},e,{loginHandler:t.props.config.loginHandler}))}}));break;case"authentication":e=r.a.createElement(I.d,null,r.a.createElement(I.b,{path:"/dashboard",render:function(e){return r.a.createElement(kt,Object.assign({token:t.props.token},e,{sessionLogoutHandler:t.props.config.sessionLogoutHandler,logoutHandler:t.props.config.logoutHandler,loadedUser:t.props.config.loadedUser,breadCrumbs:t.props.config.breadCrumbs}))}}));break;default:e=r.a.createElement(I.d,null,r.a.createElement(I.b,{path:"/",exact:!0,render:function(e){return r.a.createElement(_e,Object.assign({},e,{loginHandler:t.props.config.loginHandler}))}}))}return r.a.createElement("div",null,e)}}]),a}(n.Component),kn=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={isAuth:!1,loadedUser:null,token:null,errorAlert:!1,successAlert:!1,sessionAlert:!1},n.loginHandler=n.loginHandler.bind(Object(p.a)(n)),n.logoutHandler=n.logoutHandler.bind(Object(p.a)(n)),n.setAutoLogout=n.setAutoLogout.bind(Object(p.a)(n)),n.sessionHandler=n.sessionHandler.bind(Object(p.a)(n)),n.sessionLogoutHandler=n.sessionLogoutHandler.bind(Object(p.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.sessionHandler()}},{key:"sessionHandler",value:function(){var e=sessionStorage.getItem("logged"),t=localStorage.getItem("token"),a=localStorage.getItem("expiryDate");if(e){if(!t||!a)return this.setState({isAuth:!1}),void this.sessionLogoutHandler();var n=new Date(a).getTime()-(new Date).getTime();this.setAutoLogout(n),this.setState({isAuth:!0,loadedUser:JSON.parse(sessionStorage.getItem("user"))})}else this.logoutHandler()}},{key:"loginHandler",value:function(){var e=Object(c.a)(l.a.mark((function e(t,a){var n,r,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.login(a);case 4:n=e.sent,this.setState({isAuth:!0,loadedUser:n.loadedUser,token:n.token,errorAlert:!1,successAlert:!0}),36e5,r=new Date((new Date).getTime()+36e5),localStorage.setItem("expiryDate",r.toISOString()),localStorage.setItem("token",n.token),sessionStorage.setItem("user",JSON.stringify(n.loadedUser)),sessionStorage.setItem("logged",!0),this.setAutoLogout(36e5),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),this.setState({errorAlert:!0,successAlert:!1});case 18:setTimeout((function(){s.setState({successAlert:!1,errorAlert:!1})}),1e3);case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"sessionLogoutHandler",value:function(){var e=this;this.setState({isAuth:!1,loadedUser:null,sessionAlert:!0}),localStorage.removeItem("expiryDate"),localStorage.removeItem("token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("logged"),setTimeout((function(){e.setState({sessionAlert:!1})}),1e3)}},{key:"logoutHandler",value:function(){this.setState({isAuth:!1,loadedUser:null}),localStorage.removeItem("expiryDate"),localStorage.removeItem("token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("logged")}},{key:"setAutoLogout",value:function(e){var t=this;setTimeout((function(){t.logoutHandler()}),e)}},{key:"render",value:function(){var e,t=this,a=function(e){return{option:e,loginHandler:t.loginHandler,logoutHandler:t.logoutHandler,loadedUser:t.state.loadedUser,sessionLogoutHandler:t.sessionLogoutHandler}};if(this.state.isAuth){var n=null;n=null==localStorage.getItem("token")?this.state.token:localStorage.getItem("token"),e=r.a.createElement(yn,Object.assign({},this.props,{config:a("authentication"),token:n}))}else e=r.a.createElement(yn,Object.assign({},this.props,{config:a("login")}));return r.a.createElement("div",{className:"App"},this.state.sessionAlert?r.a.createElement(re,{config:{message:"Session Expired",variant:"error"}}):null,this.state.errorAlert?r.a.createElement(re,{config:{message:"Login Failed",variant:"error"}}):null,this.state.successAlert?r.a.createElement(re,{config:{message:"Login Success!",variant:"success"}}):null,r.a.createElement(D.a,null,this.state.isAuth?r.a.createElement(I.a,{to:"/dashboard/".concat(this.state.loadedUser.employee_id)}):r.a.createElement(I.a,{to:"/"}),e))}}]),a}(n.Component);o.a.render(r.a.createElement(kn,null),document.getElementById("root"))}},[[523,1,2]]]);
//# sourceMappingURL=main.2f7d70a5.chunk.js.map