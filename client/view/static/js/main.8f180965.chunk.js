(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{247:function(e,t,a){},318:function(e,t,a){},349:function(e,t,a){},360:function(e,t,a){e.exports=a.p+"static/media/logo.91005679.png"},439:function(e,t,a){},440:function(e,t){e.exports=[{value:0,label:"P6",name:"P-level 6"},{value:1,label:"P5",name:"P-level 5"},{value:2,label:"P4",name:"P-level 4"},{value:3,label:"P3",name:"P-level 3"},{value:4,label:"P2",name:"P-level 2"},{value:5,label:"P1",name:"P-level 1"},{value:6,label:"DS",name:"DS level"},{value:7,label:"JS",name:"JS level"}]},531:function(e,t,a){e.exports=a(941)},536:function(e,t,a){},568:function(e,t,a){},569:function(e,t,a){},573:function(e,t,a){var r={"./af-ZA.js":574,"./ar-AE.js":575,"./ar-BH.js":576,"./ar-DZ.js":577,"./ar-EG.js":578,"./ar-IQ.js":579,"./ar-JO.js":580,"./ar-KW.js":581,"./ar-LB.js":582,"./ar-LY.js":583,"./ar-MA.js":584,"./ar-OM.js":585,"./ar-QA.js":586,"./ar-SA.js":587,"./ar-SY.js":588,"./ar-TN.js":589,"./ar-YE.js":590,"./az-Cyrl-AZ.js":591,"./az-Latn-AZ.js":592,"./be-BY.js":593,"./bg-BG.js":594,"./bs-Latn-BA.js":595,"./ca-ES.js":596,"./cs-CZ.js":597,"./cy-GB.js":598,"./da-DK.js":599,"./de-AT.js":600,"./de-CH.js":601,"./de-DE.js":602,"./de-LI.js":603,"./de-LU.js":604,"./dv-MV.js":605,"./el-GR.js":606,"./en-029.js":607,"./en-AU.js":608,"./en-BZ.js":609,"./en-CA.js":610,"./en-GB.js":611,"./en-IE.js":612,"./en-JM.js":613,"./en-NZ.js":614,"./en-PH.js":615,"./en-TT.js":616,"./en-ZA.js":617,"./en-ZW.js":618,"./es-AR.js":619,"./es-BO.js":620,"./es-CL.js":621,"./es-CO.js":622,"./es-CR.js":623,"./es-DO.js":624,"./es-EC.js":625,"./es-ES.js":626,"./es-GT.js":627,"./es-HN.js":628,"./es-MX.js":629,"./es-NI.js":630,"./es-PA.js":631,"./es-PE.js":632,"./es-PR.js":633,"./es-PY.js":634,"./es-SV.js":635,"./es-UY.js":636,"./es-VE.js":637,"./et-EE.js":638,"./eu-ES.js":639,"./fa-IR.js":640,"./fi-FI.js":641,"./fo-FO.js":642,"./fr-BE.js":643,"./fr-CA.js":644,"./fr-CH.js":645,"./fr-FR.js":646,"./fr-LU.js":647,"./fr-MC.js":648,"./gl-ES.js":649,"./gu-IN.js":650,"./he-IL.js":651,"./hi-IN.js":652,"./hr-BA.js":653,"./hr-HR.js":654,"./hu-HU.js":655,"./hy-AM.js":656,"./id-ID.js":657,"./is-IS.js":658,"./it-CH.js":659,"./it-IT.js":660,"./ja-JP.js":661,"./ka-GE.js":662,"./kk-KZ.js":663,"./kn-IN.js":664,"./ko-KR.js":665,"./kok-IN.js":666,"./ky-KG.js":667,"./lt-LT.js":668,"./lv-LV.js":669,"./mi-NZ.js":670,"./mk-MK.js":671,"./mn-MN.js":672,"./mr-IN.js":673,"./ms-BN.js":674,"./ms-MY.js":675,"./mt-MT.js":676,"./nb-NO.js":677,"./nl-BE.js":678,"./nl-NL.js":679,"./nn-NO.js":680,"./ns-ZA.js":681,"./pa-IN.js":682,"./pl-PL.js":683,"./pt-BR.js":684,"./pt-PT.js":685,"./quz-BO.js":686,"./quz-EC.js":687,"./quz-PE.js":688,"./ro-RO.js":689,"./ru-RU.js":690,"./sa-IN.js":691,"./se-FI.js":692,"./se-NO.js":693,"./se-SE.js":694,"./sk-SK.js":695,"./sl-SI.js":696,"./sma-NO.js":697,"./sma-SE.js":698,"./smj-NO.js":699,"./smj-SE.js":700,"./smn-FI.js":701,"./sms-FI.js":702,"./sq-AL.js":703,"./sr-Cyrl-BA.js":704,"./sr-Cyrl-CS.js":705,"./sr-Latn-BA.js":706,"./sr-Latn-CS.js":707,"./sv-FI.js":708,"./sv-SE.js":709,"./sw-KE.js":710,"./syr-SY.js":711,"./ta-IN.js":712,"./te-IN.js":713,"./th-TH.js":714,"./tn-ZA.js":715,"./tr-TR.js":716,"./tt-RU.js":717,"./uk-UA.js":718,"./ur-PK.js":719,"./uz-Cyrl-UZ.js":720,"./uz-Latn-UZ.js":721,"./vi-VN.js":722,"./xh-ZA.js":723,"./zh-CN.js":724,"./zh-HK.js":725,"./zh-MO.js":726,"./zh-SG.js":727,"./zh-TW.js":728,"./zu-ZA.js":729};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=573},741:function(e,t,a){},742:function(e,t,a){},743:function(e,t,a){},745:function(e,t,a){},756:function(e,t,a){},761:function(e,t){},763:function(e,t){},803:function(e,t){},804:function(e,t){},941:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(32),o=a.n(s),i=(a(536),a(11)),l=a.n(i),c=a(23),u=a(12),m=a(13),p=a(8),h=a(14),d=a(15),f=a(144),g=a.n(f);g.a.defaults.baseURL="http://localhost:8080/timely/api/",g.a.defaults.baseURL="http://timely-server-timely-wildfly.apps.shift.infoteach.ca/api/";var b=function(e){return e.data},v=function(e){return{headers:{Authorization:"Bearer "+e}}},E=function(e,t){return g.a.get(e,v(t)).then(b)},j=function(e,t,a){return g.a.post(e,a,v(t)).then(b)},y=function(e,t,a){return g.a.put(e,a,v(t)).then(b)},k=function(e,t){return g.a.post(e,t).then(b)},w={getEmployeeById:function(e,t){return E("/emps/".concat(e),t)},getAllEmployees:function(e){return E("/emps",e)},createEmployee:function(e,t){return j("/emps/",e,t)},updateEmployee:function(e,t,a){return y("/emps/".concat(e),t,a)},getCurrentUser:function(e,t){return E("/emps/".concat(e),t)},getEmployeesBySupervisor:function(e,t){return E("/emps/supervisor/".concat(e),t)}},O={login:function(e){return k("/tokens",e)}},_={getAllProjects:function(e){return E("/projects",e)},getProjectsForUser:function(e,t){return E("/projects/emp/".concat(e),t)},getProjectsForSupervisor:function(e,t){return E("projects/supervisor/".concat(e),t)},createProject:function(e,t){return j("/projects/createProject",t,e)},updateProject:function(e,t){return j("/projects/updateProject/",t,e)},getDetailsById:function(e,t){return E("/projects/projectDetails/".concat(e),t)},getById:function(e,t){return E("/projects/".concat(e),t)}},N={getAllTimesheetsByEmp:function(e,t){return E("/emps/".concat(e,"/timesheets/"),t)},getAllCloseTimesheetsByEmp:function(e,t){return E("/emps/".concat(e,"/close_timesheets"),t)},getTimesheetById:function(e,t,a){return E("/emps/".concat(e,"/timesheets/").concat(a),t)},createCurrentWeekTimesheet:function(e,t,a){return j("emps/".concat(e,"/timesheets/"),t,a)},getTimesheetsByEmps:function(e,t){return E("/timesheets/getForEmps/".concat(e),t)},updateTimesheetById:function(e,t,a,r){return y("/emps/".concat(e,"/timesheets/").concat(a),t,r)}},C={getYearlyRate:function(e){return E("/yearlyRate",e)}},S={createWorkpackage:function(e,t){return j("/workpackages/createWP",t,e)}},x=a(54),D=a(141),I=a(72),T=a.n(I),P=a(428),L=a(7),A=a(353),F=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleClick=function(){if(0==r.props.states.timesheets.length)r.createCurrentTimesheet();else if(r.hasCurrentTimesheet()){var e=r.props.states.timesheets[0][0],t=r.props.states.timesheets[0][1],a=r.props.states.timesheets[0][2];r.props.history.push("/dashboard/timesheet/".concat(e)),localStorage.setItem("timesheetId",e),localStorage.setItem("weekNumber",t),localStorage.setItem("weekEnding",a)}else r.createCurrentTimesheet()},r.createCurrentTimesheet=r.createCurrentTimesheet.bind(Object(p.a)(r)),r.hasCurrentTimesheet=r.hasCurrentTimesheet.bind(Object(p.a)(r)),r.currentDate=r.currentDate.bind(Object(p.a)(r)),r.handleClick=r.handleClick.bind(Object(p.a)(r)),r.currentWeekNumber=r.currentWeekNumber.bind(Object(p.a)(r)),r.getFridayOfCurrentWeek=r.getFridayOfCurrentWeek.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"currentDate",value:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"getFridayOfCurrentWeek",value:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1),a=t.getDate()-t.getDay()-1+6;return new Date(e.setDate(a))}},{key:"currentWeekNumber",value:function(){var e=new Date,t=new Date(e.getFullYear(),0,1),a=(e.getTime()-t.getTime())/864e5;return Math.ceil((a+t.getDay()+1.1)/7)}},{key:"hasCurrentTimesheet",value:function(){var e=this.props.states.timesheets;return!(this.currentWeekNumber()-e[0][1]>0)}},{key:"createCurrentTimesheet",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),a=localStorage.getItem("token"),r=t.employee_id,e.next=5,w.getCurrentUser(r,a);case 5:return n=e.sent,s=n.labor_grade_id.labor_grade_id,o=(new Date).getFullYear(),i=this.currentWeekNumber(),c=this.getFridayOfCurrentWeek(),u={labor_grade_id:s,year:o,week:i,week_ending:c,status:"OPEN",approver_id:3,approve_date:null,attribute1:null,details:[{project_code:" ",work_package_id:" ",saturday:0,sunday:0,monday:0,tuesday:0,wednesday:0,thursday:0,friday:0,notes:"",project_wp:"PJT38001_1L"}]},e.next=13,N.createCurrentWeekTimesheet(r,a,u);case 13:e.sent,this.props.fetchTimesheets();case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(P.a,{title:"Create Current Timesheet"},n.a.createElement(A.a,{className:e.iconButton,onClick:this.handleClick,color:"primary",variant:"contained"},"Current Timesheet")))}}]),a}(n.a.Component),M=Object(L.a)({iconButton:{marginLeft:30}},{name:"CurrentTimesheetToolBar"})(F),R=(a(568),[{name:"timesheetid",label:"Timesheet ID",className:"column",options:{filter:!1}},{name:"weeknumber",label:"Week Number",className:"column",options:{filter:!1}},{name:"weekending",label:"Week Ending",className:"column",options:{sort:!0,filter:!1}},{name:"status",label:"Status",className:"column",options:{filter:!0}}]),H=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={timesheets:[],loadedUserID:{}},r.fetchTimesheets=r.fetchTimesheets.bind(Object(p.a)(r)),r.formatWeekEnding=r.formatWeekEnding.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchTimesheets(),this.formatWeekEnding()}},{key:"fetchTimesheets",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,m,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),a=localStorage.getItem("token"),r=t.employee_id,e.next=5,N.getAllTimesheetsByEmp(r,a);case 5:if(0!=(n=e.sent).length){for(s=[],o=0;o<n.length;o++)i=n[o].timesheet_id,c=n[o].week,u=this.formatWeekEnding(n[o].week_ending),m=n[o].status,(p=[]).push(i),p.push(c),p.push(u),p.push(m),s.push(p);s.sort((function(e,t){return t[1]-e[1]})),this.setState({timesheets:s,loadedUserID:r})}else console.log("no timesheets");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formatWeekEnding",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{className:"datatable",title:n.a.createElement("h1",null,"Timesheet"),options:(e=this.props,t=this.state,a=this.fetchTimesheets,{selectableRows:!1,search:!0,print:!1,download:!1,rowHover:!0,onRowClick:function(t){e.history.push("/dashboard/timesheet/".concat(t[0])),localStorage.setItem("timesheetId",t[0])},customToolbar:function(){return n.a.createElement(M,Object.assign({},e,{fetchTimesheets:a,states:t}))}}),columns:R,data:this.state.timesheets}));var e,t,a}}]),a}(r.Component),W=a(423),B=a(424),U=a(425),V=a(988),z=a(427),G=a(426),K=(a(569),a(359)),J=a.n(K),Y=a(500),Z=a.n(Y),X=a(142),q=a(103),Q=a.n(q),$=a(430),ee=a(437),te=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).addRow=function(){var e=r.state.timesheetrows,t=[];t.push(""),t.push(""),t.push(""),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(""),t.push("PJT19257_2"),e.push(t),r.setState({timesheetrows:e})},r.deleteRow=function(e){var t=r.state.timesheetrows.filter((function(t,a){return a!==e})),a=r.totalHourWeek(t),n=[r.totalSat(t),r.totalSun(t),r.totalMon(t),r.totalTue(r.state.timesheetrows),r.totalWed(t),r.totalThu(t),r.totalFri(t)];r.setState({timesheetrows:t,totalWeek:a,totalDay:n})},r.gotoTimesheetDetail=function(){if(1==r.props.dashboardTimesheet&&0!=r.state.timesheetrows.length){var e=r.state.loadedTimesheet.timesheet_id;localStorage.setItem("timesheetId",e),r.props.history.push("/dashboard/timesheet/".concat(e))}},r.timesheetRow=function(e,t){return n.a.createElement(G.a,{key:t},n.a.createElement(U.a,{scope:"row"},r.state.isEditable?r.state.projectCodes.length>0?n.a.createElement(ee.a,{select:!0,className:"projCode",id:"projCode"+t,value:e[1],onChange:function(a){return r.onProjCodeSelect(a,e,1,t)}},r.state.projectCodes.map((function(e,t){return n.a.createElement($.a,{key:e,value:e},e)}))):"No Project":e[1]),n.a.createElement(U.a,{align:"right"},r.state.isEditable?r.state.projectCodes.length>0?n.a.createElement(ee.a,{select:!0,className:"wpId",id:"wpId"+t,value:e[2],onChange:function(a){return r.onWpIdSelect(a,e,2,t)}},r.state.wpIds.map((function(e,t){return n.a.createElement($.a,{key:e,value:e},e)}))):"No WorkPackages":e[2]),n.a.createElement(U.a,{align:"right"},r.ccyFormat(e[3])),n.a.createElement(U.a,{align:"right"},r.state.isEditable?n.a.createElement(Q.a,{html:r.ccyFormat(e[4]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,4)}}):r.ccyFormat(e[4])),n.a.createElement(U.a,{align:"right"},r.state.isEditable?n.a.createElement(Q.a,{html:r.ccyFormat(e[5]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,5)}}):r.ccyFormat(e[5])),n.a.createElement(U.a,{align:"right"},r.state.isEditable?n.a.createElement(Q.a,{html:r.ccyFormat(e[6]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,6)}}):r.ccyFormat(e[6])),n.a.createElement(U.a,{align:"right"},r.state.isEditable?n.a.createElement(Q.a,{html:r.ccyFormat(e[7]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,7)}}):r.ccyFormat(e[7])),n.a.createElement(U.a,{align:"right"},r.state.isEditable?n.a.createElement(Q.a,{html:r.ccyFormat(e[8]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,8)}}):r.ccyFormat(e[8])),n.a.createElement(U.a,{align:"right"},r.state.isEditable?n.a.createElement(Q.a,{html:r.ccyFormat(e[9]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,9)}}):r.ccyFormat(e[9])),n.a.createElement(U.a,{align:"right"},r.state.isEditable?n.a.createElement(Q.a,{html:r.ccyFormat(e[10]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,10)}}):r.ccyFormat(e[10])),n.a.createElement(U.a,{align:"right"},r.state.isEditable?n.a.createElement(Q.a,{html:e[11],"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,11)}}):e[11]),r.state.isEditable?n.a.createElement(U.a,{align:"right"},n.a.createElement(J.a,{onClick:function(){r.deleteRow(t)}})):null)},r.state={timesheetrows:[],loadUser:{},totalWeek:{},totalDay:[],totalOver:{},totalOverDays:[],loadedTimesheet:{},isEditable:{},overtime:0,flextime:0,projectCodes:[],wpIds:[]},r.fetchTimesheetRows=r.fetchTimesheetRows.bind(Object(p.a)(r)),r.addRow=r.addRow.bind(Object(p.a)(r)),r.totalHourRow=r.totalHourRow.bind(Object(p.a)(r)),r.totalSat=r.totalSat.bind(Object(p.a)(r)),r.totalSun=r.totalSun.bind(Object(p.a)(r)),r.totalMon=r.totalMon.bind(Object(p.a)(r)),r.totalTue=r.totalTue.bind(Object(p.a)(r)),r.totalWed=r.totalWed.bind(Object(p.a)(r)),r.totalThu=r.totalThu.bind(Object(p.a)(r)),r.totalFri=r.totalFri.bind(Object(p.a)(r)),r.totalHourWeek=r.totalHourWeek.bind(Object(p.a)(r)),r.ccyFormat=r.ccyFormat.bind(Object(p.a)(r)),r.formatWeekEnding=r.formatWeekEnding.bind(Object(p.a)(r)),r.gotoTimesheetDetail=r.gotoTimesheetDetail.bind(Object(p.a)(r)),r.isEditable=r.isEditable.bind(Object(p.a)(r)),r.deleteRow=r.deleteRow.bind(Object(p.a)(r)),r.updateTS=r.updateTS.bind(Object(p.a)(r)),r.submitTS=r.submitTS.bind(Object(p.a)(r)),r.handleContentChange=r.handleContentChange.bind(Object(p.a)(r)),r.handleOverFlexTime=r.handleOverFlexTime.bind(Object(p.a)(r)),r.checkKey=r.checkKey.bind(Object(p.a)(r)),r.hasProject=r.hasProject.bind(Object(p.a)(r)),r.onProjCodeSelect=r.onProjCodeSelect.bind(Object(p.a)(r)),r.onWpIdSelect=r.onWpIdSelect.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchTimesheetRows()}},{key:"isEditable",value:function(){var e=!1;"OPEN"==this.state.loadedTimesheet.status&&void 0==this.props.dashboardTimesheet&&(e=!0),this.setState({isEditable:e})}},{key:"fetchTimesheetRows",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,m,p,h,d,f,g,b,v,E,j,y,k,O,C,S,x,D,I,T,P,L,A,F,M,R,H,W,B,U,V,z,G,K,J,Y,Z,X,q;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=this.props.dashboardTimesheet){e.next=9;break}n=JSON.parse(sessionStorage.getItem("user")),t=n.employee_id,a=localStorage.getItem("token"),r=localStorage.getItem("timesheetId"),this.setState({loadUser:n}),e.next=23;break;case 9:if(null==this.props.token){e.next=23;break}return t=this.props.userId,a=this.props.token,e.next=14,_.getProjectsForUser(t,a);case 14:return s=e.sent,e.next=17,w.getCurrentUser(this.props.userId,this.props.token);case 17:return o=e.sent,this.setState({loadUser:o}),e.next=21,N.getAllTimesheetsByEmp(t,a);case 21:if(0!=(i=e.sent).length){for(c=[],u=0;u<i.length;u++)m=i[u].timesheet_id,p=i[u].week,h=this.formatWeekEnding(i[u].week_ending),d=i[u].status,f=null==i[u].attribute1?"0|0":i[u].attribute1,(g=[]).push(m),g.push(p),g.push(h),g.push(d),g.push(f),c.push(g);c.sort((function(e,t){return t[1]-e[1]})),r=c[0][0],this.props.fetchProject(s,o,c[0][4])}else this.props.fetchProject(s,o,"0|0"),console.log("no timesheets");case 23:if(null==t||null==a||null==r){e.next=56;break}return e.next=26,N.getTimesheetById(t,a,r);case 26:if(b=e.sent,v=null==b.attribute1?"0|0":b.attribute1,E=v.split("|"),j=parseFloat(E[0]),y=parseFloat(E[1]),this.setState({loadedTimesheet:b,overtime:j,flextime:y}),this.isEditable(),0!=b.details.length){for(k=b.details,O=[],C=0;C<k.length;C++)S=k[C].timesheet_row_id,x=k[C].project_code,D=k[C].work_package_id,I=k[C].saturday,T=k[C].sunday,P=k[C].monday,L=k[C].tuesday,A=k[C].wednesday,F=k[C].thursday,M=k[C].friday,R=k[C].notes,H=k[C].project_wp,W=this.totalHourRow(I,T,P,L,A,F,M),(B=[]).push(S),B.push(x),B.push(D),B.push(W),B.push(I),B.push(T),B.push(P),B.push(L),B.push(A),B.push(F),B.push(M),B.push(R),B.push(H),O.push(B);this.setState({timesheetrows:O}),U=this.totalHourWeek(this.state.timesheetrows),V=[this.totalSat(this.state.timesheetrows),this.totalSun(this.state.timesheetrows),this.totalMon(this.state.timesheetrows),this.totalTue(this.state.timesheetrows),this.totalWed(this.state.timesheetrows),this.totalThu(this.state.timesheetrows),this.totalFri(this.state.timesheetrows)],this.setState({totalWeek:U,totalDay:V})}if(!this.state.isEditable){e.next=54;break}return e.next=37,_.getProjectsForUser(t,a);case 37:for(z=e.sent,G=[],K=0;K<z.length;K++)"OPEN"==z[K].status&&G.push(z[K].project_code);if(!(G.length>0)){e.next=54;break}this.setState({projectCodes:G}),J=[],Y=[],Z=0;case 44:if(!(Z<G.length)){e.next=53;break}return e.next=47,_.getDetailsById(G[Z],a);case 47:for(X=e.sent,q=0;q<X.wpList.length;q++)1==X.wpList[q].is_open&&"L"==X.wpList[q].work_package_id.substring(X.wpList[q].work_package_id.length-1)&&Y.push(X.wpList[q].work_package_id);Y.length>0&&(J=Y);case 50:Z++,e.next=44;break;case 53:this.setState({wpIds:J});case 54:e.next=57;break;case 56:document.getElementById("timesheetDetailContainer").innerHTML="Sorry, you don't have any timesheet records in the database!";case 57:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ccyFormat",value:function(e){return(Math.round(10*e)/10).toFixed(1)}},{key:"totalHourRow",value:function(e,t,a,r,n,s,o){return e+t+a+r+n+s+o}},{key:"totalSat",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][4];return t}},{key:"totalSun",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][5];return t}},{key:"totalMon",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][6];return t}},{key:"totalTue",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][7];return t}},{key:"totalWed",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][8];return t}},{key:"totalThu",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][9];return t}},{key:"totalFri",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][10];return t}},{key:"totalHourWeek",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][3];return t}},{key:"formatWeekEnding",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"updateTS",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,m,p,h,d,f,g,b,v,E,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("Updating Timesheet"),t=[],r=0;r<this.state.timesheetrows.length;r++)n=this.state.timesheetrows[r][0],s=this.state.timesheetrows[r][1],o=this.state.timesheetrows[r][2],i=this.state.timesheetrows[r][4],c=this.state.timesheetrows[r][5],u=this.state.timesheetrows[r][6],m=this.state.timesheetrows[r][7],p=this.state.timesheetrows[r][8],h=this.state.timesheetrows[r][9],d=this.state.timesheetrows[r][10],f=this.state.timesheetrows[r][11],a=""!=n?{timesheet_row_id:n,project_code:s,work_package_id:o,saturday:i,sunday:c,monday:u,tuesday:m,wednesday:p,thursday:h,friday:d,notes:f,project_wp:s+"_"+o}:{project_code:s,work_package_id:o,saturday:i,sunday:c,monday:u,tuesday:m,wednesday:p,thursday:h,friday:d,notes:f,project_wp:s+"_"+o},t.push(a);return g=this.state.overtime+"|"+this.state.flextime,b={timesheet_id:this.state.loadedTimesheet.timesheet_id,labor_grade_id:this.state.loadedTimesheet.labor_grade_id,year:this.state.loadedTimesheet.year,week:this.state.loadedTimesheet.week,week_ending:this.state.loadedTimesheet.week_ending,status:"OPEN",approver_id:this.state.loadedTimesheet.approver_id,approve_date:this.state.loadedTimesheet.approve_date,attribute1:g,details:t},v=this.state.loadUser.employee_id,E=localStorage.getItem("token"),j=this.state.loadedTimesheet.timesheet_id,console.log(b),e.next=11,N.updateTimesheetById(v,E,j,b);case 11:"exception throw"==e.sent&&alert("Porjct and Wp don't match, please check again");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"submitTS",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,m,p,h,d,f,g,b,v,E,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("Submitting Timesheet"),t=[],r=0;r<this.state.timesheetrows.length;r++)n=this.state.timesheetrows[r][0],s=this.state.timesheetrows[r][1],o=this.state.timesheetrows[r][2],i=this.state.timesheetrows[r][4],c=this.state.timesheetrows[r][5],u=this.state.timesheetrows[r][6],m=this.state.timesheetrows[r][7],p=this.state.timesheetrows[r][8],h=this.state.timesheetrows[r][9],d=this.state.timesheetrows[r][10],f=this.state.timesheetrows[r][11],a=""!=n?{timesheet_row_id:n,project_code:s,work_package_id:o,saturday:i,sunday:c,monday:u,tuesday:m,wednesday:p,thursday:h,friday:d,notes:f,project_wp:s+"_"+o}:{project_code:s,work_package_id:o,saturday:i,sunday:c,monday:u,tuesday:m,wednesday:p,thursday:h,friday:d,notes:f,project_wp:s+"_"+o},t.push(a);return g=this.state.overtime+"|"+this.state.flextime,b={timesheet_id:this.state.loadedTimesheet.timesheet_id,labor_grade_id:this.state.loadedTimesheet.labor_grade_id,year:this.state.loadedTimesheet.year,week:this.state.loadedTimesheet.week,week_ending:this.state.loadedTimesheet.week_ending,status:"CLOSE",approver_id:this.state.loadedTimesheet.approver_id,approve_date:this.state.loadedTimesheet.approve_date,attribute1:g,details:t},v=this.state.loadUser.employee_id,E=localStorage.getItem("token"),j=this.state.loadedTimesheet.timesheet_id,console.log(b),e.next=11,N.updateTimesheetById(v,E,j,b);case 11:"exception throw"==e.sent?alert("Porjct and Wp don't match, please check again"):this.fetchTimesheetRows();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleContentChange",value:function(e,t,a,r){if(r>3&&r<11){t[r]=parseFloat(this.ccyFormat(e.target.value)),t[3]=t[4]+t[5]+t[6]+t[7]+t[8]+t[9]+t[10];var n=this.totalHourWeek(this.state.timesheetrows),s=[this.totalSat(this.state.timesheetrows),this.totalSun(this.state.timesheetrows),this.totalMon(this.state.timesheetrows),this.totalTue(this.state.timesheetrows),this.totalWed(this.state.timesheetrows),this.totalThu(this.state.timesheetrows),this.totalFri(this.state.timesheetrows)];this.setState({totalWeek:n,totalDay:s})}else t[r]=e.target.value}},{key:"checkKey",value:function(e){13===e.keyCode&&e.preventDefault()}},{key:"hasProject",value:function(){return this.state.projectCodes.length>0}},{key:"onProjCodeSelect",value:function(e,t,a,r){t[a]=e.target.value,this.setState({})}},{key:"onWpIdSelect",value:function(e,t,a,r){t[a]=e.target.value,this.setState({})}},{key:"handleOverFlexTime",value:function(e,t){"over"==t&&this.setState({overtime:e.target.value}),"flex"==t&&this.setState({flextime:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(X.a,{elevation:2,className:"container",onClick:function(){e.gotoTimesheetDetail()}},n.a.createElement("div",{className:"timesheetTitle"},n.a.createElement("div",{className:"attributeRow"},n.a.createElement("div",{className:"empNumContainer"},n.a.createElement("div",{className:"empNumTitle"},"Employee Number:"),n.a.createElement("div",{className:"empNum"},this.state.loadUser.employee_id)),n.a.createElement("div",{className:"weekNumContainer"},n.a.createElement("div",{className:"weekNumTitle"},"Week Number:"),n.a.createElement("div",{className:"weekNum"},this.state.loadedTimesheet.week)),n.a.createElement("div",{className:"weekEndContainer"},n.a.createElement("div",{className:"weekEndTitle"},"Week Ending:"),n.a.createElement("div",{className:"weekEnd"},this.formatWeekEnding(this.state.loadedTimesheet.week_ending))),this.state.isEditable?n.a.createElement(Z.a,{fontSize:"large",onClick:this.addRow,color:"primary",variant:"contained"}):null),this.props.dashboardTimesheet?null:n.a.createElement("div",{className:"empNameAttribute"},n.a.createElement("div",{className:"empNameTitle"},"Name:"),n.a.createElement("div",{className:"empName"},this.state.loadUser.first_name," ",this.state.loadUser.last_name))),n.a.createElement(V.a,{className:t.timesheetTable},n.a.createElement(W.a,{className:t.table,"aria-label":"simple table"},n.a.createElement(z.a,null,n.a.createElement(G.a,null,n.a.createElement(U.a,{id:"proj",className:t.tableTitle},"Project"),n.a.createElement(U.a,{id:"wp",align:"right",className:t.tableTitle},"WP"),n.a.createElement(U.a,{id:"tol",align:"right",className:t.tableTitle},"Total"),n.a.createElement(U.a,{id:"sat",align:"right",className:t.tableTitle},"Sat"),n.a.createElement(U.a,{id:"sun",align:"right",className:t.tableTitle},"Sun"),n.a.createElement(U.a,{id:"mon",align:"right",className:t.tableTitle},"Mon"),n.a.createElement(U.a,{id:"tue",align:"right",className:t.tableTitle},"Tue"),n.a.createElement(U.a,{id:"wed",align:"right",className:t.tableTitle},"Wed"),n.a.createElement(U.a,{id:"thu",align:"right",className:t.tableTitle},"Thu"),n.a.createElement(U.a,{id:"fri",align:"right",className:t.tableTitle},"Fri"),n.a.createElement(U.a,{id:"notes",align:"right",className:t.tableTitle},"Notes"))),n.a.createElement(B.a,null,this.state.timesheetrows.map((function(t,a){return e.timesheetRow(t,a)})),n.a.createElement(G.a,null,n.a.createElement(U.a,{className:t.tableTitle},"Total"),n.a.createElement(U.a,{colSpan:2,align:"right"},this.ccyFormat(this.state.totalWeek)),n.a.createElement(U.a,{align:"right"},this.ccyFormat(this.state.totalDay[0])),n.a.createElement(U.a,{align:"right"},this.ccyFormat(this.state.totalDay[1])),n.a.createElement(U.a,{align:"right"},this.ccyFormat(this.state.totalDay[2])),n.a.createElement(U.a,{align:"right"},this.ccyFormat(this.state.totalDay[3])),n.a.createElement(U.a,{align:"right"},this.ccyFormat(this.state.totalDay[4])),n.a.createElement(U.a,{align:"right"},this.ccyFormat(this.state.totalDay[5])),n.a.createElement(U.a,{align:"right"},this.ccyFormat(this.state.totalDay[6]))),n.a.createElement(G.a,null,n.a.createElement(U.a,{colSpan:2,className:t.tableTitle},"Overtime"),n.a.createElement(U.a,{align:"right"},this.state.isEditable?n.a.createElement(Q.a,{html:this.ccyFormat(this.state.overtime),"data-column":"item",className:"content-editable",onKeyDown:this.checkKey,onChange:function(t){return e.handleOverFlexTime(t,"over")}}):this.ccyFormat(this.state.overtime))),n.a.createElement(G.a,null,n.a.createElement(U.a,{colSpan:2,className:t.tableTitle},"Flextime"),n.a.createElement(U.a,{align:"right"},this.state.isEditable?n.a.createElement(Q.a,{html:this.ccyFormat(this.state.flextime),"data-column":"item",className:"content-editable",onKeyDown:this.checkKey,onChange:function(t){return e.handleOverFlexTime(t,"flex")}}):this.ccyFormat(this.state.flextime)))))),this.state.isEditable&&this.hasProject()?n.a.createElement("div",{className:t.updateSubmitButton},n.a.createElement(A.a,{onClick:this.updateTS,color:"primary",variant:"contained"},"Update"),n.a.createElement(A.a,{className:t.submitButton,onClick:this.submitTS,color:"secondary",variant:"contained"},"Submit")):null)}}]),a}(r.Component),ae=Object(L.a)((function(e){return{table:{width:"93%"},timesheetTable:{width:"100%",maxHeight:"420px",display:"flex",justifyContent:"center"},tableTitle:{fontWeight:"bold",fontSize:"10pt !important"},updateSubmitButton:{position:"absolute",margin:"0 0 0 780px"},submitButton:{marginLeft:25}}}),{withTheme:!0})(te),re=a(46),ne=a(499),se=a(501),oe=a.n(se);function ie(e){var t=n.a.useState(null),a=Object(re.a)(t,2),r=a[0],s=a[1],o=function(){s(null)};return n.a.createElement("div",null,n.a.createElement(oe.a,{onClick:function(e){s(e.currentTarget)},"aria-controls":"simple-menu","aria-haspopup":"true"}),n.a.createElement(ne.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:o},n.a.createElement(x.b,{to:e.link,style:{textDecoration:"none",color:"black"}},n.a.createElement($.a,null," Edit ")," "),null==e.employee.end_date?n.a.createElement($.a,{onClick:function(){e.handleArchive(e.id,e.employee),o()}},"Archive"):n.a.createElement($.a,{onClick:function(){e.handleOpen(e.id,e.employee),o()}},"Open")))}var le=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(P.a,{title:"Add an Employee"},n.a.createElement(A.a,{className:e.iconButton,onClick:this.props.handleCreate,color:"primary",variant:"contained"},"Create")))}}]),a}(n.a.Component),ce=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(le),ue=a(972),me=a(69),pe=a.n(me),he=a(994),de=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"face",value:function(e){return n.a.createElement("div",null,n.a.createElement(he.a,{className:e.avatar,alt:"employee photo"},n.a.createElement(pe.a,{onClick:this.props.handleClick,className:e.faceIcon})))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.avatar;return this.face(t,a)}}]),a}(r.Component),fe=Object(L.a)((function(){return{faceIcon:{width:"100%",height:"100%"}}}),{withTheme:!0})(de);a(438);var ge=[{name:"photo",label:"Photo",className:"column"},{name:"employeeId",label:"ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"},{name:"startDate",label:"Start Date",className:"column"},{name:"endDate",label:"End Date",className:"column"},{name:"laborGrade",label:"Labor Grade",className:"column"},{name:"vacation",label:"Vacation Days",className:"column"},{name:"supervisor",label:"Supervisor",className:"column"},{name:"edit",label:"Edit",className:"column"}],be=function(e,t){var a=e.history;return{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,customToolbar:function(){return n.a.createElement(ce,{history:a,handleCreate:t})},textLabels:{body:{noMatch:n.a.createElement(ue.a,null)}}}},ve=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleCreate=function(){r.props.history.push("/dashboard/hr/create")},r.handleArchive=function(){var e=Object(c.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),a.end_date=n,e.next=4,w.updateEmployee(t,r.state.token,a);case 4:r.fetchData(r.state.token);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.handleOpen=function(){var e=Object(c.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.end_date=null,e.next=3,w.updateEmployee(t,r.state.token,a);case 3:r.fetchData(r.state.token);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.state={data:[],token:null},r.fetchData=r.fetchData.bind(Object(p.a)(r)),r.handleCreate=r.handleCreate.bind(Object(p.a)(r)),r.handleArchive=r.handleArchive.bind(Object(p.a)(r)),r.handleOpen=r.handleOpen.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.setState({token:e}),this.fetchData(e)}},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,w.getAllEmployees(t);case 3:a=e.sent,r=[],a.forEach(function(){var e=Object(c.a)(l.a.mark((function e(t){var a,o,i,c,u,m,p,h,d,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.employee_id,o=t.first_name,i=t.last_name,c=new Date(t.start_date).toString("MMM dd"),u=t.end_date,m=t.labor_grade_id.labor_grade_id,p=t.vacation,h=t.supervisor_id,d=null==u?n.a.createElement("p",{style:{color:"green"}}," Currently Employed "):n.a.createElement("p",{style:{color:"red"}}," Archived "),(f=[]).push(n.a.createElement(fe,{avatar:{width:25,height:25,margin:"0 auto"}})),f.push(a),f.push(o),f.push(i),f.push(c),f.push(d),f.push(m),f.push(p),f.push(h),f.push(n.a.createElement(ie,{link:"/dashboard/hr/".concat(a),id:a,employee:t,handleArchive:s.handleArchive,handleOpen:s.handleOpen})),r.push(f);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({data:r});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{className:"datatable",title:n.a.createElement("h1",null," Manage Employees"),options:be(this.props,this.handleCreate),columns:ge,data:this.state.data}))}}]),a}(r.Component),Ee=Object(L.a)((function(){return{pictureUrl:{width:50}}}),{withTheme:!0})(ve),je=a(28),ye=(a(741),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={employee_id:null,password:""},r.updateInputValue=r.updateInputValue.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"updateInputValue",value:function(e){e.preventDefault(),this.setState(Object(je.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return n.a.createElement(X.a,{className:"loginWrapper",elevation:2},n.a.createElement("p",{className:"prjMng"},"Timely"),n.a.createElement("div",{className:"loginContainer"},n.a.createElement("div",{className:"loginHint"},"Login"),n.a.createElement("form",{className:"loginForm",onSubmit:function(t){return e.props.loginHandler(t,{id:e.state.employee_id,password:e.state.password})}},n.a.createElement("div",{className:"loginEmail"},n.a.createElement("input",{className:"loginInputs",name:"employee_id",placeholder:"Employee Id",required:!0,autoFocus:!0,onChange:this.updateInputValue})),n.a.createElement("div",{className:"loginPwd"},n.a.createElement("input",{className:"loginInputs",type:"password",name:"password",placeholder:"Password",required:!0,onChange:this.updateInputValue})),n.a.createElement("div",{className:"loginBsection"},n.a.createElement("button",{className:"loginBtn",type:"submit"}," Login ")))))}}]),a}(r.Component)),ke=a(970),we=a(431),Oe=a(276),_e=a(102),Ne=a(503),Ce=a.n(Ne),Se=a(978);function xe(e){var t=n.a.useState(null),a=Object(re.a)(t,2),r=a[0],s=a[1],o=function(){s(null)};return n.a.createElement("div",null,n.a.createElement(fe,{handleClick:function(e){s(e.currentTarget)},avatar:{width:30,height:30,margin:"0 auto"}}),n.a.createElement(ne.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:o},n.a.createElement(x.b,{to:"/dashboard/profile/".concat(e.loadedUser.employee_id),style:{textDecoration:"none",color:"black"}},n.a.createElement($.a,{onClick:o}," Profile ")),n.a.createElement($.a,{onClick:o},"My account"),n.a.createElement(x.b,{to:"/",style:{textDecoration:"none",color:"black"}},n.a.createElement($.a,{onClick:e.logoutHandler}," Logout ")," ")))}var De=a(3),Ie=a(215),Te=a.n(Ie),Pe=a(21),Le=a(521),Ae=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",{className:e.search},n.a.createElement("div",{className:e.searchIcon},n.a.createElement(Te.a,null)),n.a.createElement(Le.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}}))}}]),a}(r.Component),Fe=Object(L.a)((function(e){return{search:Object(je.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Pe.d)(e.palette.common.black,.15),"&:hover":{backgroundColor:Object(Pe.d)(e.palette.common.black,.15)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"black"},inputRoot:{color:"black"},inputInput:Object(je.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}),{withTheme:!0})(Ae),Me=a(504),Re=a.n(Me),He=a(993),We=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.location,a=e.loadedUser,r=t.pathname.split("/"),s=[],o="";return r.splice(0,1),r.forEach((function(e,t){o+="/"+e,s.push(o)})),n.a.createElement("div",null,n.a.createElement(He.a,null,s.map((function(e,t){return n.a.createElement("div",{key:t},s.length-1===t?n.a.createElement(x.b,{style:{textDecoration:"none"},key:t,to:e},n.a.createElement(_e.a,{color:"textPrimary"}," ",e.split("/")[t+1]," ")):n.a.createElement(x.b,{key:t,to:"".concat(e,"/").concat(a.employee_id)}," ",e.split("/")[t+1]," "))}))))}}]),a}(r.Component),Be=Object(D.g)(We),Ue={NAVBAR_EXPANDED_WIDTH:230,NAVBAR_SHRINKED_WIDTH:100,DRAWER_EXPANDED_WIDTH:230,DRAWER_SHRINKED_WIDTH:100},Ve=Ue.NAVBAR_EXPANDED_WIDTH,ze=Ue.NAVBAR_SHRINKED_WIDTH,Ge=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"resizeNavbar",value:function(e){return n.a.createElement("div",{className:e.root},n.a.createElement(ke.a,{position:"fixed",elevation:0,className:Object(De.a)(e.appBar,Object(je.a)({},e.appBarShift,this.props.resize))},n.a.createElement(we.a,null,n.a.createElement(Oe.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"open drawer",onClick:this.props.resizeDashboard},this.props.resize?n.a.createElement(Ce.a,null):n.a.createElement(Re.a,null)),n.a.createElement(_e.a,{className:e.title,variant:"h6",noWrap:!0},n.a.createElement(Be,this.props)),n.a.createElement(Fe,null),n.a.createElement(Se.a,{className:e.divider,orientation:"vertical",flexItem:!0}),n.a.createElement("h4",{className:e.userName}," ",this.props.loadedUser.first_name," ",this.props.loadedUser.last_name),n.a.createElement(xe,{logoutHandler:this.props.logoutHandler,loadedUser:this.props.loadedUser}))))}},{key:"render",value:function(){var e=this.props.classes;return this.resizeNavbar(e)}}]),a}(r.Component),Ke=Object(L.a)((function(e){var t;return{root:{},menuButton:{marginRight:e.spacing(2),color:"black"},title:(t={flexGrow:1,display:"none"},Object(je.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(je.a)(t,"color","black"),t),userName:{color:"black",paddingRight:e.spacing(3)},divider:{marginRight:e.spacing(3),marginLeft:e.spacing(3)},appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"#fafafa",position:"fixed",width:"calc(100% - ".concat(ze,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:Ve,backgroundColor:"#fafafa",width:"calc(100% - ".concat(Ve,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}}}),{withTheme:!0})(Ge),Je=a(973),Ye=a(95),Ze=a(981),Xe=a(360),qe=a.n(Xe),Qe=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(x.b,{className:e.link,to:this.props.link},n.a.createElement(Ze.a,{container:!0,direction:"row",alignItems:"center",className:e.menuItem},n.a.createElement(Ze.a,{item:!0},this.props.isMenuLogo?n.a.createElement(he.a,{variant:"circle",className:e.avatar,src:qe.a}):n.a.createElement(he.a,{variant:"square",className:e.avatar})),n.a.createElement(Ze.a,{item:!0,onClick:this.props.handleClick},this.props.text&&this.props.resize?n.a.createElement("p",{className:e.text}," ",this.props.text," "):null)))}}]),a}(r.Component),$e=Object(L.a)((function(e){return{menuItem:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(1)},text:{marginLeft:30,color:"black"},link:{textDecoration:"none"}}}),{withTheme:!0})(Qe),et=a(995),tt=a(979),at=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(x.b,{className:e.link,to:this.props.link},n.a.createElement(tt.a,{className:e.expansionPanelDetails},n.a.createElement(Ze.a,{container:!0,direction:"row",alignItems:"center"},n.a.createElement(Ze.a,{item:!0},n.a.createElement(he.a,{variant:"circle",className:e.avatar})),n.a.createElement(Ze.a,{item:!0},this.props.resize?n.a.createElement("p",{className:e.text},this.props.text):null))))}}]),a}(r.Component),rt=Object(L.a)((function(){return{expansionPanelDetails:{},text:{marginLeft:30,color:"black"},link:{textDecoration:"none"}}}),{withTheme:!0})(at),nt=a(980),st=a(284),ot=a.n(st),it=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(nt.a,{expandIcon:this.props.resize?n.a.createElement(ot.a,{className:e.materialIconLight}):null,"aria-controls":"panel1a-content",id:"panel1a-header"},n.a.createElement(Ze.a,{container:!0,direction:"row",alignItems:"center"},n.a.createElement(Ze.a,{item:!0},n.a.createElement(fe,{avatar:{width:30,height:30,margin:"0 auto"}})),n.a.createElement(Ze.a,{item:!0},this.props.resize?n.a.createElement("h4",{className:e.text}," ",this.props.loadedUser.first_name+" "+this.props.loadedUser.last_name," "):null)))}}]),a}(r.Component),lt=Object(L.a)((function(){return{text:{marginLeft:30,color:"black"}}}),{withTheme:!0})(it),ct=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return n.a.createElement(et.a,{elevation:0},n.a.createElement(lt,{loadedUser:this.props.loadedUser,resize:this.props.resize}),n.a.createElement(rt,{text:"Lead Engineer",resize:this.props.resize,link:"/dashboard/lead"}),n.a.createElement(rt,{text:"Supervisor",resize:this.props.resize,link:"/dashboard/supervisor"}),n.a.createElement(rt,{text:"Timesheet Approver",resize:this.props.resize,link:"/dashboard/tsapprover"}),n.a.createElement(rt,{text:"HR",resize:this.props.resize,link:"/dashboard/hr"}))}}]),a}(r.Component),ut=Object(L.a)((function(e){return{}}),{withTheme:!0})(ct),mt=Ue.DRAWER_EXPANDED_WIDTH,pt=Ue.DRAWER_SHRINKED_WIDTH,ht=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e,t,a=this.props,r=a.classes,s=a.loadedUser;return n.a.createElement("div",{className:r.root},n.a.createElement(Je.a,null),n.a.createElement(Ye.a,{variant:"permanent",open:!0,className:Object(De.a)(r.drawer,(e={},Object(je.a)(e,r.drawerOpen,this.props.resize),Object(je.a)(e,r.drawerClose,!this.props.resize),e)),classes:{paper:Object(De.a)((t={},Object(je.a)(t,r.drawerOpen,this.props.resize),Object(je.a)(t,r.drawerClose,!this.props.resize),t))}},n.a.createElement($e,{isMenuLogo:!0,link:"/dashboard/".concat(s.employee_id)}),n.a.createElement(Se.a,{className:r.divider}),n.a.createElement(ut,{loadedUser:this.props.loadedUser,resize:this.props.resize}),n.a.createElement(Se.a,{className:r.divider}),n.a.createElement("div",null,n.a.createElement($e,{text:"Dashboard",resize:this.props.resize,link:"/dashboard/".concat(s.employee_id)}),n.a.createElement($e,{text:"Timesheet",resize:this.props.resize,link:"/dashboard/timesheet"}),n.a.createElement($e,{text:"Projects",resize:this.props.resize,link:"/dashboard/projects"}))))}}]),a}(r.Component),dt=Object(L.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar,paper:{width:mt,height:"100%"},divider:{backgroundColor:"light gray",width:"90%",margin:"0 auto"},drawerOpen:{width:mt,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{width:pt,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})}}}),{withTheme:!0})(ht),ft=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("main",{className:e.content},n.a.createElement("div",{className:e.toolbar}),this.props.routes)}}]),a}(r.Component),gt=Object(L.a)((function(e){return{root:{display:"flex"},content:{flexGrow:10,padding:e.spacing(5)},toolbar:e.mixins.toolbar}}),{withTheme:!0})(ft),bt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={loaded_user:{},resize:!0,breadCrumbs:r.props.location},r.resizeDashboard=r.resizeDashboard.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"resizeDashboard",value:function(){this.setState({resize:!this.state.resize})}},{key:"render",value:function(){var e,t=this,a=this.props.classes,r=n.a.createElement(Wr,Object.assign({},this.props,{config:(e="dashboard",{option:e,loadedUser:t.props.loadedUser}),token:this.props.token}));return n.a.createElement(x.a,null,n.a.createElement("div",{className:a.root},n.a.createElement(Ke,Object.assign({},this.props.location,{loadedUser:this.props.loadedUser,resizeDashboard:this.resizeDashboard,resize:this.state.resize,logoutHandler:this.props.logoutHandler})),n.a.createElement(dt,{loadedUser:this.props.loadedUser,resizeDashboard:this.resizeDashboard,resize:this.state.resize}),n.a.createElement(gt,{routes:r})))}}]),a}(r.Component),vt=Object(L.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar}}),{withTheme:!0})(bt),Et=a(971),jt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleClick=function(){console.log("click!",r.props.selectedRows)},r.state={type:e.type},r.handleClick=r.handleClick.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"render",value:function(){return n.a.createElement("div",null,"Mine"===this.state.type&&n.a.createElement(Et.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},n.a.createElement(A.a,{onClick:this.handleClick},"Archive"),n.a.createElement(A.a,null,"Close")),"Archived"===this.state.type&&n.a.createElement(Et.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},n.a.createElement(A.a,null,"Open"),n.a.createElement(A.a,null,"Close")),"Closed"===this.state.type&&n.a.createElement(Et.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},n.a.createElement(A.a,null,"Archive"),n.a.createElement(A.a,null,"Open")))}}]),a}(n.a.Component),yt=(a(742),["ID","Name","Manager"]),kt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[],type:""},r.options={print:!1,responsive:"scroll",selectableRows:!0,customToolbarSelect:function(e){return n.a.createElement(jt,{selectedRows:e,type:r.state.type})},onRowClick:function(e,t){r.props.history.push({pathname:"/projectDetails",state:{projectID:e[0]}})}},r}return Object(m.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data,type:e.type})}},{key:"render",value:function(){return n.a.createElement(T.a,{className:"projects",title:"Projects",columns:yt,options:this.options,data:this.state.data})}}]),a}(n.a.Component),wt=(a(743),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[],allProj:[],mineProj:[],archivedProj:[],closedProj:[],type:"All"},r.setData=r.setData.bind(Object(p.a)(r)),r.allProjects=r.allProjects.bind(Object(p.a)(r)),r.mineProjects=r.mineProjects.bind(Object(p.a)(r)),r.archivedProjects=r.archivedProjects.bind(Object(p.a)(r)),r.closedProjects=r.closedProjects.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setData();case 2:this.allProjects();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"allProjects",value:function(){this.setState({data:this.state.allProj,type:"All"})}},{key:"mineProjects",value:function(){this.setState({data:this.state.mineProj,type:"Mine"})}},{key:"archivedProjects",value:function(){this.setState({data:this.state.archivedProj,type:"Archived"})}},{key:"closedProjects",value:function(){this.setState({data:this.state.closedProj,type:"Closed"})}},{key:"setData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,m,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),a=localStorage.getItem("token"),r=t.employee_id,console.log(t),e.next=6,_.getProjectsForUser(r,a);case 6:for(n=e.sent,console.log(n),s=[],o=[],i=[],c=[],u=[],m=0;m<n.length;m++)s=[],console.log(n[m]),s.push(n[m].project_code),s.push(n[m].project_name),p=n[m].project_manager_id.first_name+" "+n[m].project_manager_id.last_name,s.push(p),n[m].project_manager_id.employee_id===parseInt(r)&&i.push(s),"COMPLETE"===n[m].status&&u.push(s),"ARCHIVED"===n[m].status&&c.push(s),o.push(s);this.setState({allProj:o,mineProj:i,closedProj:u,archivedProj:c});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze.a,{justify:"space-between",container:!0,spacing:1,className:"btnProjects"},n.a.createElement(Ze.a,{item:!0},n.a.createElement(Et.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},n.a.createElement(A.a,{onClick:this.allProjects},"All"),n.a.createElement(A.a,{onClick:this.mineProjects},"Mine"),n.a.createElement(A.a,{onClick:this.archivedProjects},"Archived"),n.a.createElement(A.a,{onClick:this.closedProjects},"Closed"))),n.a.createElement(Ze.a,{item:!0},n.a.createElement(A.a,{variant:"contained",color:"secondary",component:x.b,to:"/createProject"},"+ Create"))),n.a.createElement(kt,{data:this.state.data,type:this.state.type,history:this.props.history}))}}]),a}(n.a.Component)),Ot=a(47),_t=a(422),Nt=a(986),Ct=a(984),St=a(985),xt=(a(439),Object(_t.a)((function(e){return{projInfo:{width:"280px"}}}))),Dt=function(e){var t=xt();return n.a.createElement("form",{autoComplete:"off"},n.a.createElement(ee.a,Object(je.a)({component:"span",className:"margin",label:"Project ID",name:"projectID",value:e.projectID,onChange:e.handleChange},"className",t.projInfo)),n.a.createElement("br",null),n.a.createElement(ee.a,Object(je.a)({component:"span",className:"margin",label:"Project Name",name:"projectName",value:e.projectName,onChange:e.handleChange},"className",t.projInfo)),n.a.createElement("br",null),n.a.createElement(ee.a,Object(je.a)({component:"span",className:"margin",label:"Project Manager",name:"projectManager",value:e.projectManager,onChange:e.handleChange},"className",t.projInfo)))},It=(a(318),function(e){var t={projDesc:{width:"310px"}};return n.a.createElement("form",{autoComplete:"off"},n.a.createElement(ee.a,{className:t.projDesc,id:"outlined-multiline-static",label:"Project Description",multiline:!0,rows:"8",variant:"outlined",name:"Desc",value:e.Desc,onChange:e.handleChange}))}),Tt=function(e){var t={budgetInfo:{width:"280px"}};return n.a.createElement("form",{autoComplete:"off"},n.a.createElement(ee.a,Object(je.a)({component:"span",className:"margin",id:"standard-basic",label:"Cost",value:e.cost,name:"cost",onChange:e.handleChange,disabled:e.isDisabled},"className",t.budgetInfo)))},Pt=a(518),Lt=a(74),At=a(991),Ft=Object(_t.a)((function(e){return{scheduleInfo:{width:"280px"}}})),Mt=function(e){var t=Ft(),a=Object(r.useState)({}),s=Object(re.a)(a,2),o=(s[0],s[1],Object(r.useState)({})),i=Object(re.a)(o,2);i[0],i[1];return n.a.createElement("form",{autoComplete:"off"},n.a.createElement(Lt.a,{utils:Pt.a},n.a.createElement(At.a,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",margin:"normal",label:"Start Date",name:"startDate",value:e.startDate,onChange:e.handleStartChange,className:t.scheduleInfo,disabled:e.isDisabled}),n.a.createElement("br",null),n.a.createElement(At.a,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",margin:"normal",label:"End Date",name:"endDate",value:e.endDate,onChange:e.handleEndChange,className:t.scheduleInfo,disabled:e.isDisabled})))},Rt=Object(_t.a)((function(e){return{root:{width:"1100px"},stepper:{padding:"40px 0",border:"1px solid lightgray"},backButton:{margin:"0 7px 0 0"},nextButton:{margin:"0 0 0 7px"},instructionsContainer:{display:"flex",justifyContent:"center",padding:"25px 0"},instructions:{backgroundColor:"white",width:"400px",display:"flex",justifyContent:"center",alignItems:"center",height:"280px",padding:"0 0 10px 0",borderTop:"3px solid lightgray"},backNextButtonContainer:{display:"flex",justifyContent:"center",margin:"20px 0 0 0"},endMessage:{display:"flex",flexDirection:"column"},createProjAgain:{margin:"15px 0",padding:"15px"}}}));function Ht(){var e=Rt(),t=JSON.parse(sessionStorage.getItem("user")),a=Object(r.useState)({projectID:"",projectName:"",projectManager:t.first_name+" "+t.last_name,Desc:"",startDate:new Date,endDate:new Date,cost:""}),s=Object(re.a)(a,2),o=s[0],i=s[1],u=function(){var e=Object(c.a)(l.a.mark((function e(){var a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),console.log(a),r={project_code:o.projectID,project_manager_id:{employee_id:t.employee_id},project_name:o.projectName,status:"OPEN",start_date:o.startDate.toISOString().split("T",1)[0],end_date:o.endDate.toISOString().split("T",1)[0],description:o.Desc,budget_dollar:o.cost,employees:[{employee_id:t.employee_id}]},console.log(r),e.next=6,_.createProject(r,a);case 6:n=e.sent,console.log(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=n.a.useState(0),p=Object(re.a)(m,2),h=p[0],d=p[1],f=["Project Information","Project Description","Budget","Schedule"];return n.a.createElement("div",{className:e.root},n.a.createElement(Nt.a,{activeStep:h,alternativeLabel:!0,className:e.stepper},f.map((function(e){return n.a.createElement(Ct.a,{key:e},n.a.createElement(St.a,null,e))}))),n.a.createElement("div",{className:e.instructionsContainer},h===f.length?n.a.createElement("div",{className:e.endMessage},n.a.createElement(_e.a,{component:"span",className:e.instructions},"Project Created."),n.a.createElement(A.a,{onClick:function(){d(0)}},"Create another project")):n.a.createElement("div",null,n.a.createElement(_e.a,{component:"span",className:e.instructions},function(e,t,a,r,s){switch(e){case 0:return n.a.createElement(Dt,{projectID:t.projectID,projectName:t.projectName,projectManager:t.projectManager,handleChange:a});case 1:return n.a.createElement(It,{Desc:t.projectDesc,handleChange:a});case 2:return n.a.createElement(Tt,{cost:t.cost,handleChange:a});case 3:return n.a.createElement(Mt,{startDate:t.startDate,endDate:t.endDate,handleStartChange:r,handleEndChange:s});default:return n.a.createElement(n.a.Fragment,null)}}(h,o,(function(e){var t=e.target,a=t.name,r=t.value;i(Object(Ot.a)({},o,Object(je.a)({},a,r)))}),(function(e){i(Object(Ot.a)({},o,{startDate:e}))}),(function(e){i(Object(Ot.a)({},o,{endDate:e}))}))),n.a.createElement("div",{className:e.backNextButtonContainer},n.a.createElement(A.a,{disabled:0===h,onClick:function(){d((function(e){return e-1}))},className:e.backButton},"Back"),h===f.length-1&&n.a.createElement(A.a,{variant:"contained",color:"primary",onClick:u,className:e.nextButton},"Finish"),h!=f.length-1&&n.a.createElement(A.a,{variant:"contained",color:"primary",onClick:function(){d((function(e){return e+1}))}},"Next")))))}a(744);var Wt=a(432),Bt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).gotoProjectDetail=r.gotoProjectDetail.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"gotoProjectDetail",value:function(){this.props.history.push({pathname:"/projectDetails",state:{projectID:this.props.projName}})}},{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(X.a,{className:t.projDetail,elevation:2,onClick:function(){return e.gotoProjectDetail()}},n.a.createElement("div",{className:t.projName},this.props.projName),n.a.createElement("div",{className:t.dueDateRow},n.a.createElement("div",{className:t.dueDate},"Due Date:"),n.a.createElement("div",{className:t.dueDateVal},"\xa0\xa0\xa0",this.props.dueDate)),n.a.createElement("div",{className:t.projManagerRow},n.a.createElement(pe.a,{className:t.circleStyle}),n.a.createElement("div",{className:t.projManagerName},this.props.projManagerName)))}}]),a}(r.Component),Ut=Object(L.a)((function(){return{root:{backgroundColor:Wt.a},projDetail:{width:"90%",height:"105px",margin:"25px auto"},projName:{fontWeight:"bold",margin:"2px 0 0 5px"},dueDateRow:{margin:"8px 0 0 10px"},dueDate:{color:"grey",float:"left"},dueDateVal:{marginLeft:"5px"},projManagerRow:{margin:"10px 0 0 20px",color:"darkGrey"},circleStyle:{display:"inline-block",borderRadius:"50%",width:35,height:35,float:"left"},projManagerName:{margin:"10px 0 0 15px",float:"left"}}}),{withTheme:!0})(Bt),Vt=(a(745),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={loadedUser:{},projects:[],overTime:0,flexTime:0},r.getProject=r.getProject.bind(Object(p.a)(r)),r.formatWeekEnding=r.formatWeekEnding.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"formatWeekEnding",value:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth(),n=("0"+t.getDate()).slice(-2);return["January","February","March","April","May","June","July","August","September","October","November","December"][r]+" "+n+", "+a}},{key:"getProject",value:function(e,t,a){for(var r=[],n=0;n<e.length;n++)"OPEN"==e[n].status&&r.push(e[n]);(e=r).sort((function(e,t){return e.end_date-t.end_date}));var s=a.split("|"),o=parseFloat(s[0]),i=parseFloat(s[1]);this.setState({projects:e,loadedUser:t,overTime:o,flexTime:i}),0==this.state.projects.length&&(document.getElementById("recentNewProjTitle").innerHTML="You don't have any projects")}},{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("div",{className:t.root},n.a.createElement("div",{className:t.topContainer},n.a.createElement(X.a,{className:t.leftPaper,elevation:2},n.a.createElement("div",{className:t.projTitle,id:"recentNewProjTitle"},"Recent / New Projects"),0==this.state.projects.length?"":this.state.projects.map((function(a,r){return n.a.createElement("div",{className:t.projInfo},n.a.createElement(Ut,{key:a.project_code,history:e.props.history,projName:a.project_code,dueDate:e.formatWeekEnding(a.end_date),projManagerName:a.project_manager_id.first_name+" "+a.project_manager_id.last_name}))}))),n.a.createElement("div",null,n.a.createElement("div",{id:"timesheetDetailContainer",className:t.timesheetDetailContainer},n.a.createElement(ae,{fetchProject:this.getProject,history:this.props.history,dashboardTimesheet:!0,userId:this.props.match.params.id,token:this.props.token})),n.a.createElement("div",{className:t.flexVancationContainer},n.a.createElement(X.a,{className:t.bottomLeftPaper,elevation:2},n.a.createElement("div",{className:t.title},"Overtime"),n.a.createElement("hr",{className:t.seperator}),n.a.createElement("div",{className:t.vacDays},this.state.overTime)),n.a.createElement(X.a,{className:t.bottomMidPaper,elevation:2},n.a.createElement("div",{className:t.title},"Vacation Days"),n.a.createElement("hr",{className:t.seperator}),n.a.createElement("div",{className:t.vacDays},this.state.loadedUser.vacation)),n.a.createElement(X.a,{className:t.bottomRightPaper,elevation:2},n.a.createElement("div",{className:t.title},"Flextime"),n.a.createElement("hr",{className:t.seperator}),n.a.createElement("div",{className:t.vacDays},this.state.flexTime))))))}}]),a}(r.Component)),zt=Object(L.a)((function(){var e;return{root:{flexGrow:1},leftPanelContainer:{width:"360px"},leftPaper:(e={overflow:"scroll",maxHeight:"800px"},Object(je.a)(e,"overflow","auto"),Object(je.a)(e,"width","310px"),Object(je.a)(e,"margin","0 20px 0 0"),Object(je.a)(e,"boxShadow","none"),Object(je.a)(e,"border","solid 1px lightgray"),Object(je.a)(e,"borderRadius","5px"),e),rightTopPaper:{height:500},bottomLeftPaper:{height:200,width:302,textAlign:"center",boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px"},bottomMidPaper:{height:200,width:302,textAlign:"center",boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px",marginLeft:45},bottomRightPaper:{height:200,width:302,textAlign:"center",boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px",marginLeft:45},title:{display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",margin:"10px 0 0 0"},seperator:{borderTop:"1px solid lightgray"},projTitle:{margin:"20px 0 0 20px",fontWeight:700},CircularProgressbar:{width:"40%",marginTop:"18px"},topContainer:{display:"flex"},flexVancationContainer:{display:"flex",margin:"22px 0 0 4px"},timesheetDetailContainer:{border:"solid 1px lightgray",minWidth:"1000px",textAlign:"center",height:"500px",fontSize:"18pt",borderRadius:"5px",cursor:"pointer"},projInfo:{cursor:"pointer"},vacDays:{fontSize:"80pt",color:"lightgray"}}}),{withTheme:!0})(Vt),Gt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).clickRemove=function(){e.props.history.push("/dashboard/supervisor/remove"),console.log("remove an employee!")},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(P.a,{title:"Assign an employee to a project"},n.a.createElement(A.a,{className:e.iconButton,onClick:this.clickRemove,color:"primary",variant:"contained"},"Remove")))}}]),a}(n.a.Component),Kt=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(Gt),Jt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).clickAssign=function(){e.props.history.push("/dashboard/supervisor/assign"),console.log("assign an employee!")},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(P.a,{title:"Assign an employee to a project"},n.a.createElement(A.a,{className:e.iconButton,onClick:this.clickAssign,color:"primary",variant:"contained"},"Assign")))}}]),a}(n.a.Component),Yt=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(Jt),Zt=[{name:"employeeId",label:"Employee ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"}],Xt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[]},r.fetchData=r.fetchData.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getEmployees",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),r=w.getEmployeesBySupervisor(a.employee_id,t),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,console.log(this.props),e.next=4,this.getEmployees();case 4:for(t=e.sent,a=[],r=0;r<t.length;r++)n=t[r].employee_id,s=t[r].first_name,o=t[r].last_name,(i=[]).push(n),i.push(s),i.push(o),a.push(i);this.setState({data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.props.classes;return n.a.createElement("div",null,n.a.createElement(T.a,{className:"datatable",title:n.a.createElement("h1",null,"Employees"),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,customToolbar:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Kt,{history:e.props.history}),n.a.createElement(Yt,{history:e.props.history}))},onRowClick:function(t,a){localStorage.setItem("name",t[1]+" "+t[2]),e.props.history.push("/dashboard/supervisor/".concat(t[0]))}}),columns:Zt,data:this.state.data}))}}]),a}(r.Component),qt=a(992),Qt=Object(_t.a)((function(e){return{root:{flexGrow:1},supervisorMargin:{margin:10},supervisorPaper:{height:750,padding:50},supervisorButton:{width:"fit-content"}}})),$t=function(e){var t=Qt(),a=localStorage.getItem("token"),s=JSON.parse(sessionStorage.getItem("user")),o=n.a.useState(),i=Object(re.a)(o,2),u=i[0],m=i[1],p=n.a.useState(),h=Object(re.a)(p,2),d=h[0],f=h[1],g=n.a.useState(),b=Object(re.a)(g,2),v=b[0],E=b[1],j=[],y=function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getProjectsForSupervisor(s.employee_id,a);case 2:return t=e.sent,E(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=u){e.next=2;break}return e.abrupt("return");case 2:for(t=0;t<u.employees.length;t++)u.employees[t].supervisor_id==s.employee_id&&j.push(u.employees[t]);return e.abrupt("return",j);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){k()}),[u]);var w=function(){var t=Object(c.a)(l.a.mark((function t(){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),null!=u&&null!=d){t.next=3;break}return t.abrupt("return",null);case 3:u.employees=u.employees.filter((function(e){return d.indexOf(e)<0})),r=_.updateProject(u,a),console.log(r),e.history.push("/dashboard/supervisor");case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return n.a.createElement("div",{className:t.root},n.a.createElement(X.a,{className:t.supervisorPaper,elevation:2},n.a.createElement(Ze.a,{container:!0,direction:"column"},n.a.createElement(_e.a,{variant:"h4"},"Remove From Project"),n.a.createElement(Se.a,{className:"supervisorMargin"}),n.a.createElement(qt.a,{className:t.supervisorMargin,options:v,getOptionLabel:function(e){return e.project_code},style:{width:700},onChange:function(e,t){return m(t)},renderInput:function(e){return n.a.createElement(ee.a,Object.assign({},e,{variant:"standard",label:"Project ID"}))}}),n.a.createElement(qt.a,{multiple:!0,className:t.supervisorMargin,options:j,getOptionLabel:function(e){return e.first_name+" "+e.last_name},style:{width:700},onChange:function(e,t){return f(t)},renderInput:function(e){return n.a.createElement(ee.a,Object.assign({},e,{variant:"standard",label:"Add employees",placeholder:"Search for an employee"}))}}),n.a.createElement(A.a,{variant:"contained",color:"primary",onClick:w,style:{width:700}},"Remove"))))},ea=Object(_t.a)((function(e){return{root:{flexGrow:1},supervisorMargin:{margin:10},supervisorPaper:{height:750,padding:50},supervisorButton:{width:"fit-content"}}})),ta=function(e){var t=ea(),a=localStorage.getItem("token"),s=n.a.useState(),o=Object(re.a)(s,2),i=o[0],u=o[1],m=n.a.useState(),p=Object(re.a)(m,2),h=p[0],d=p[1],f=n.a.useState([]),g=Object(re.a)(f,2),b=g[0],v=g[1],E=n.a.useState([]),j=Object(re.a)(E,2),y=j[0],k=j[1],O=function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getAllProjects(a);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(c.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),e.next=3,w.getEmployeesBySupervisor(t.employee_id,a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,O();case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=k,e.next=8,N();case 8:e.t3=e.sent,(0,e.t2)(e.t3);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var C=function(){var t=Object(c.a)(l.a.mark((function t(){var a,r,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),console.log(a),null!=i){t.next=4;break}return t.abrupt("return",null);case 4:for(r=0;r<h.length;r++)i.employees.push(h[r]);n=_.updateProject(i,a),console.log(n),e.history.push("/dashboard/supervisor");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return n.a.createElement("div",{className:t.root},n.a.createElement(X.a,{className:t.supervisorPaper,elevation:2},n.a.createElement(Ze.a,{container:!0,direction:"column"},n.a.createElement(_e.a,{variant:"h4"},"Assign To Project"),n.a.createElement(Se.a,{className:"supervisorMargin"}),n.a.createElement(qt.a,{className:t.supervisorMargin,options:b,getOptionLabel:function(e){return e.project_code},style:{width:700},onChange:function(e,t){return u(t)},renderInput:function(e){return n.a.createElement(ee.a,Object.assign({},e,{variant:"standard",label:"Project ID"}))}}),n.a.createElement(qt.a,{multiple:!0,className:t.supervisorMargin,options:y,getOptionLabel:function(e){return e.first_name+" "+e.last_name},style:{width:700},onChange:function(e,t){return d(t)},renderInput:function(e){return n.a.createElement(ee.a,Object.assign({},e,{variant:"standard",label:"Add employees",placeholder:"Search for an employee"}))}}),n.a.createElement(A.a,{variant:"contained",color:"primary",onClick:C,style:{width:700}},"Assign"))))},aa=[{name:"projectId",label:"Project ID",className:"column"},{name:"projectName",label:"Project Name",className:"column"},{name:"projectManager",label:"Project Manager",className:"column"}],ra=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[]},r.fetchData=r.fetchData.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getProjects",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=_.getProjectsForUser(this.props.match.params.id,t),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,this.getProjects();case 3:for(t=e.sent,a=[],r=0;r<t.length;r++)n=t[r].project_code,s=t[r].project_name,o=t[r].project_manager_id.first_name+" "+t[r].project_manager_id.last_name,(i=[]).push(n),i.push(s),i.push(o),a.push(i);this.setState({data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{className:"datatable",title:n.a.createElement("h1",null,"Projects Assigned To ",localStorage.name),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1}),columns:aa,data:this.state.data}))}}]),a}(r.Component),na=a(494),sa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.loadedUser;return n.a.createElement(n.a.Fragment,null,r?n.a.createElement(Ze.a,{item:!0,xs:2,className:a.container},n.a.createElement(he.a,{className:a.avatar,alt:"employee photo"},n.a.createElement(pe.a,{className:a.faceIcon})),n.a.createElement("div",{className:a.textContainer},n.a.createElement(_e.a,{className:a.textHeader},"Employee ID"),n.a.createElement(ee.a,{className:a.text,name:"employeeId",onChange:function(t){return e.props.formHandler(t)},disabled:!this.props.hr,defaultValue:r.employee_id,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),n.a.createElement("div",{className:a.textContainerChips},this.props.isHr?n.a.createElement(na.a,{className:a.chip,icon:n.a.createElement(pe.a,null),label:"HR"}):null,this.props.isAdmin?n.a.createElement(na.a,{className:a.chip,icon:n.a.createElement(pe.a,null),label:"Admin"}):null,this.props.isSuperTimesheetApprover?n.a.createElement(na.a,{className:a.chip,icon:n.a.createElement(pe.a,null),label:"Super Timesheet Approver"}):null)):null)}}]),a}(r.Component),oa=Object(L.a)((function(){var e;return e={container:{marginTop:20},avatar:{marginTop:30,marginBottom:20,width:100,height:100,margin:"0 auto"},textContainer:{margin:"0 auto",width:120,padding:10},textHeader:{color:"gray"},text:{borderBottom:"1px solid lightgray"},chip:{margin:5},textContainerChips:{margin:"0 auto",width:135,height:100,marginTop:15}},Object(je.a)(e,"avatar",{width:100,height:100,margin:"0 auto"}),Object(je.a)(e,"faceIcon",{width:"100%",height:"100%"}),e}),{withTheme:!0})(sa),ia=a(974),la=a(975),ca=a(976),ua=a(977),ma=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleClickOpen=function(){r.setState({open:!0})},r.handleClose=function(){r.setState({open:!1})},r.state={open:!1,employees:[],searchList:[]},r.handleClickOpen=r.handleClickOpen.bind(Object(p.a)(r)),r.handleClose=r.handleClose.bind(Object(p.a)(r)),r.createData=r.createData.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"createData",value:function(e,t,a,r){return{image:e,id:t,name:a,select:r}}},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,w.getAllEmployees(t);case 3:a=e.sent,this.setState({searchList:a}),a.forEach((function(e){r.state.employees.push(r.createData(n.a.createElement(pe.a,null),e.employee_id,e.first_name+" "+e.last_name,n.a.createElement(A.a,{style:{marginLeft:"20px"},variant:"outlined",color:"primary",onClick:function(){r.props.selectSupervisor(e.employee_id,e.first_name,e.last_name),r.handleClose()}}," Select")))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",null,n.a.createElement(A.a,{disabled:!this.props.hr,variant:"outlined",color:"primary",className:e.button,onClick:this.handleClickOpen},"Choose Supervisor"),n.a.createElement(ia.a,{className:e.container,disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.state.open,onClose:this.handleClose},n.a.createElement(ua.a,null,"Select a Supervisor"),n.a.createElement(ca.a,null,n.a.createElement(qt.a,{disableClearable:!0,options:this.state.searchList.map((function(e){return e.first_name+" "+e.last_name})),renderInput:function(e){return n.a.createElement(ee.a,Object.assign({},e,{label:"Search for a Supervisor",margin:"normal",variant:"outlined",name:"name",InputProps:Object(Ot.a)({},e.InputProps,{type:"search"})}))}}),n.a.createElement(W.a,{className:e.table},n.a.createElement(z.a,null,n.a.createElement(G.a,null,n.a.createElement(U.a,null," Photo "),n.a.createElement(U.a,null," ID "),n.a.createElement(U.a,null," Name "),n.a.createElement(U.a,null," Select "))),n.a.createElement(B.a,null,this.state.employees.map((function(e,t){return n.a.createElement(G.a,{key:t},n.a.createElement(U.a,{align:"left"},e.image),n.a.createElement(U.a,{align:"left"},e.id),n.a.createElement(U.a,{align:"left"},"".concat(e.name)),n.a.createElement(U.a,{align:"left"},e.select))}))))),n.a.createElement(la.a,null,n.a.createElement(A.a,{onClick:this.handleClose,color:"primary"},"Cancel"),n.a.createElement(A.a,{onClick:this.handleClose,color:"primary"},"Ok"))))}}]),a}(r.Component),pa=Object(L.a)((function(e){return{container:{height:700},minWidth:650,button:{marginBottom:10,display:"inline-block",width:210}}}),{withTheme:!0})(ma),ha=a(996),da=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("div",{className:t.field},n.a.createElement("div",null,n.a.createElement(_e.a,{className:t.title,variant:"h6"}," Labor Grade "),this.props.marksValue||void 0==this.props.marksValue?n.a.createElement(ha.a,{defaultValue:this.props.hr?0:parseInt(this.props.marksValue),valueLabelFormat:function(t){return e.props.valueLabelFormat(t)},onChange:function(t,a){return e.props.getSliderValue(a)},"aria-labelledby":"discrete-slider-restrict",className:t.slider,step:null,valueLabelDisplay:"auto",marks:this.props.marks,disabled:!this.props.hr,max:7}):n.a.createElement(ue.a,null)))}}]),a}(r.Component),fa=Object(L.a)((function(){return{title:{marginBottom:5},field:{marginTop:50},slider:{width:"90%"}}}),{withTheme:!0})(da),ga=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.supervisor;return n.a.createElement(n.a.Fragment,null,r?n.a.createElement(Ze.a,{item:!0,xs:4,className:a.container},n.a.createElement("div",{className:a.field},n.a.createElement(_e.a,{className:a.title,variant:"h6"}," Basic Information "),n.a.createElement(ee.a,{className:a.input,disabled:!this.props.hr,defaultValue:this.props.loadedUser.first_name,helperText:"First Name",onChange:function(t){return e.props.formHandler(t)},name:"firstName",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(ee.a,{className:a.input,disabled:!this.props.hr,defaultValue:this.props.loadedUser.last_name,helperText:"Last Name",name:"lastName",onChange:function(t){return e.props.formHandler(t)},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),n.a.createElement("div",{className:a.field},n.a.createElement(fa,{valueLabelFormat:this.props.valueLabelFormat,getSliderValue:this.props.getSliderValue,marks:this.props.marks,hr:this.props.hr,marksValue:this.props.marksValue})),n.a.createElement("div",{className:a.field},n.a.createElement(Ze.a,{container:!0,spacing:1,className:a.container},n.a.createElement(Ze.a,{item:!0,xs:6},n.a.createElement(pa,{hr:this.props.hr,selectSupervisor:this.props.selectSupervisor})),n.a.createElement(Ze.a,{item:!0,xs:6},n.a.createElement(na.a,{className:a.chip,icon:n.a.createElement(pe.a,null),label:this.props.supervisorName})))),n.a.createElement("div",{className:a.field},n.a.createElement(_e.a,{className:a.title,variant:"h6"}," Vacation Days "),n.a.createElement(ee.a,{className:a.input,disabled:!this.props.hr,defaultValue:this.props.loadedUser.vacation,helperText:"Vacation Days",onChange:function(t){return e.props.formHandler(t)},name:"vacation",type:"number",margin:"normal",InputLabelProps:{shrink:!0}}))):null)}}]),a}(r.Component),ba=Object(L.a)((function(){return{title:{marginBottom:5},paper:{height:600},input:{display:"inline-block",width:"90%"},field:{marginTop:50},avatar:{display:"inline-block",marginRight:"5%"},inputSupervisor:{width:"77%"}}}),{withTheme:!0})(ga),va=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze.a,{item:!0,xs:4,className:t.container},n.a.createElement("div",{className:t.field},n.a.createElement(_e.a,{className:t.title,variant:"h6"}," Change Password "),n.a.createElement(ee.a,{className:t.input,name:"oldPassword",type:"password",helperText:"Old Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(ee.a,{className:t.input,name:"newPassword",type:"password",helperText:"New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(ee.a,{className:t.input,name:"confirmPassword",type:"password",helperText:"Confirm New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0}})),n.a.createElement(A.a,{variant:"contained",color:"primary",className:t.button,onClick:this.props.handleSubmit},"Submit")))}}]),a}(r.Component),Ea=Object(L.a)((function(){return{container:{marginTop:20},title:{marginBottom:5},input:{display:"block",width:"90%"},field:{marginTop:30},button:{width:"90%",marginTop:20}}}),{withTheme:!0})(va),ja=a(370),ya=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=function(){var t,a,r=e.props.config,s=Object(ja.useSnackbar)().enqueueSnackbar;return n.a.createElement(n.a.Fragment,null,(t=r.message,a=r.variant,void s(t,{variant:a,autoHideDuration:2e3})))};return n.a.createElement(ja.SnackbarProvider,{preventDuplicate:!0},n.a.createElement(t,this.props))}}]),a}(r.Component),ka=a(440),wa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={loadedUser:null,supervisor:null,isAdmin:!1,isHr:!1,isSuperTimesheetApprover:!1,marks:ka,laborGradeId:"",laborGradeName:"",vacation:"",supervisorSelected:!1,supervisorFirstName:"",supervisorLastName:"",marksValue:0},r.fetchData=r.fetchData.bind(Object(p.a)(r)),r.formHandler=r.formHandler.bind(Object(p.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(p.a)(r)),r.selectSupervisor=r.selectSupervisor.bind(Object(p.a)(r)),r.valueLabelFormat=r.valueLabelFormat.bind(Object(p.a)(r)),r.getSliderValue=r.getSliderValue.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.fetchData(e),this.setState({errorAlert:!1,successAlert:!1})}},{key:"valueLabelFormat",value:function(e){return this.state.marks[e].label}},{key:"getSliderValue",value:function(e){this.setState({laborGradeId:this.state.marks[e].label,laborGradeName:this.state.marks[e].name})}},{key:"selectSupervisor",value:function(e,t,a){this.setState({supervisorId:e,supervisorFirstName:t,supervisorLastName:a})}},{key:"formHandler",value:function(e){e.preventDefault(),this.setState(Object(je.a)({},e.target.name,e.target.value)),this.state.newPassword.length>0&&this.state.confirmPassword.length>0&&this.setState({passwordChange:!0})}},{key:"handleSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,m,p,h,d,f=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token"),a=this.state.loadedUser,r=this.state,n=r.firstName,s=r.lastName,o=r.laborGradeId,i=r.laborGradeName,c=r.supervisorId,u=r.vacation,m=r.oldPassword,p=r.newPassword,h=r.confirmPassword,!(d=r.passwordChange)){e.next=21;break}if(m==a.password&&p==h){e.next=8;break}this.setState({errorAlert:!0,successAlert:!1}),e.next=19;break;case 8:return a.first_name=n,a.last_name=s,a.labor_grade_id.labor_grade_id=o,a.labor_grade_id.labor_grade_name=i,a.vacation=u,a.supervisor_id=c,a.password=p,console.log(a),e.next=18,w.updateEmployee(this.props.loadedUser.employee_id,t,a);case 18:this.setState({successAlert:!0,errorAlert:!1});case 19:e.next=31;break;case 21:if(d){e.next=31;break}return a.first_name=n,a.last_name=s,a.labor_grade_id.labor_grade_id=o,a.labor_grade_id.labor_grade_name=i,a.vacation=u,a.supervisor_id=c,e.next=30,w.updateEmployee(this.props.loadedUser.employee_id,t,a);case 30:this.setState({successAlert:!0,errorAlert:!1});case 31:setTimeout((function(){f.setState({successAlert:!1,errorAlert:!1})}),1e3);case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getEmployeeById(this.props.match.params.id,t);case 2:return a=e.sent,this.setState({loadedUser:a,firstName:a.first_name,lastName:a.last_name,laborGradeId:a.labor_grade_id.labor_grade_id,laborGradeName:a.labor_grade_id.labor_grade_name,supervisorId:a.supervisor_id,isAdmin:a.is_admin,isHr:a.is_hr_staff,vacation:a.vacation,isSuperTimesheetApprover:a.is_super_timesheet_approver,oldPassword:"",newPassword:"",confirmPassword:""}),e.next=6,w.getEmployeeById(a.supervisor_id,t);case 6:for(n in r=e.sent,this.setState({supervisor:r,supervisorFirstName:r.first_name,supervisorLastName:r.last_name}),this.state.marks)this.state.marks[n].label==this.state.laborGradeId&&this.setState({marksValue:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.hr,r=this.state,s=r.loadedUser,o=r.supervisor;return n.a.createElement("div",{className:t.root},this.state.errorAlert?n.a.createElement(ya,{config:{message:"error",variant:"error"}}):null,this.state.successAlert?n.a.createElement(ya,{config:{message:"success",variant:"success"}}):null,s&&o?n.a.createElement(X.a,{className:t.paper,elevation:2},n.a.createElement(Ze.a,{container:!0,spacing:1},n.a.createElement(oa,{loadedUser:s,isHr:this.state.isHr,isAdmin:this.state.isAdmin,isSuperTimesheetApprover:this.state.isSuperTimesheetApprover}),n.a.createElement(Se.a,{orientation:"vertical",flexItem:!0,className:t.divider}),n.a.createElement(ba,{loadedUser:s,supervisor:o,hr:a,formHandler:this.formHandler,value:this.state.value,selectSupervisor:this.selectSupervisor,supervisorName:"".concat(this.state.supervisorFirstName," ").concat(this.state.supervisorLastName),valueLabelFormat:this.valueLabelFormat,getSliderValue:this.getSliderValue,marks:this.state.marks,marksValue:this.state.marksValue}),n.a.createElement(Se.a,{orientation:"vertical",flexItem:!0,className:t.divider}),n.a.createElement(Ea,{loadedUser:s,hr:a,formHandler:this.formHandler,handleSubmit:this.handleSubmit}))):null)}}]),a}(r.Component),Oa=Object(L.a)((function(){return{root:{flexGrow:1},paper:{height:750},divider:{margin:45,height:690}}}),{withTheme:!0})(wa),_a=a(987),Na=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze.a,{item:!0,xs:2,className:t.container},n.a.createElement(he.a,{className:t.avatar,alt:"employee photo"},n.a.createElement(pe.a,{className:t.faceIcon})),n.a.createElement("div",{className:t.textContainer},n.a.createElement(_e.a,{className:t.textHeader},"Employee ID"),n.a.createElement(ee.a,{className:t.text,name:"employeeId",onChange:function(t){return e.props.formHandler(t)},disabled:!0,fullWidth:!0,InputLabelProps:{shrink:!0}})),n.a.createElement("div",{className:t.textContainer},n.a.createElement(_e.a,{className:t.textHeaderRole},"Role"),n.a.createElement(Ze.a,{container:!0,spacing:1},n.a.createElement(Ze.a,{item:!0,xs:6},n.a.createElement("p",null,"HR")),n.a.createElement(Ze.a,{item:!0,xs:6},n.a.createElement(_a.a,{checked:this.props.isHr,name:"isHr",color:"primary",onClick:this.props.isHrSwitch})),n.a.createElement(Ze.a,{item:!0,xs:6},n.a.createElement("p",null,"Admin")),n.a.createElement(Ze.a,{item:!0,xs:6},n.a.createElement(_a.a,{checked:this.props.isAdmin,name:"isHr",color:"primary",onClick:this.props.isAdminSwitch})),n.a.createElement(Ze.a,{item:!0,xs:6},n.a.createElement("p",null,"Super Timesheet Approver")),n.a.createElement(Ze.a,{item:!0,xs:6},n.a.createElement(_a.a,{checked:this.props.isSuperTimesheetApprover,name:"isHr",color:"primary",onClick:this.props.isSuperTimesheetApproverSwitch}))))))}}]),a}(r.Component),Ca=Object(L.a)((function(){return{container:{marginTop:20},avatar:{width:100,height:100,margin:"0 auto"},textContainer:{margin:"0 auto",width:135},textHeader:{color:"black",marginBottom:10,marginTop:10},textHeaderRole:{marginTop:50,marginBottom:25},text:{borderBottom:"1px solid lightgray"},faceIcon:{width:"100%",height:"100%"},switch:{color:"green",marginLeft:100}}}),{withTheme:!0})(Na),Sa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze.a,{item:!0,xs:4,className:t.container},n.a.createElement("div",{className:t.field},n.a.createElement(_e.a,{className:t.title,variant:"h6"}," Basic Information "),n.a.createElement(ee.a,{className:t.input,disabled:!this.props.hr,helperText:"First Name",onChange:function(t){return e.props.formHandler(t)},name:"firstName",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(ee.a,{className:t.input,disabled:!this.props.hr,helperText:"Middle Name",onChange:function(t){return e.props.formHandler(t)},name:"middleName",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(ee.a,{className:t.input,disabled:!this.props.hr,helperText:"Last Name",name:"lastName",onChange:function(t){return e.props.formHandler(t)},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),n.a.createElement("div",{className:t.field},n.a.createElement(fa,{marks:this.props.marks,getSliderValue:this.props.getSliderValue,valueLabelFormat:this.props.valueLabelFormat,hr:this.props.hr})),n.a.createElement("div",{className:t.field},n.a.createElement(Ze.a,{container:!0,spacing:1,className:t.container},n.a.createElement(Ze.a,{item:!0,xs:6},n.a.createElement(pa,{hr:this.props.hr,selectSupervisor:this.props.selectSupervisor})),n.a.createElement(Ze.a,{item:!0,xs:6},this.props.supervisorSelected?n.a.createElement(na.a,{className:t.chip,icon:n.a.createElement(pe.a,null),label:this.props.supervisorName}):null),n.a.createElement(Ze.a,{item:!0,xs:6},n.a.createElement("div",{className:t.fieldVacation},n.a.createElement(_e.a,{className:t.title,variant:"h6"},"Vacation Days"),n.a.createElement(ee.a,{className:t.input,helperText:"Vacation Days",type:"number",name:"vacation",onChange:function(t){return e.props.formHandler(t)},disabled:!this.props.hr,margin:"normal",InputLabelProps:{shrink:!0}})))))))}}]),a}(r.Component),xa=Object(L.a)((function(){return{title:{marginBottom:5},paper:{height:600},input:{display:"inline-block",width:"90%"},field:{marginTop:50},fieldVacation:{marginTop:25},slider:{width:"90%"},supervisorField:{marginTop:20,marginBottom:20},supervisorName:{display:"inline"},formControl:{width:"50%",marginTop:10}}}),{withTheme:!0})(Sa),Da=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze.a,{item:!0,xs:4,className:t.container},n.a.createElement("div",{className:t.field},n.a.createElement(_e.a,{className:t.title,variant:"h6"}," Password "),n.a.createElement(ee.a,{className:t.input,name:"newPassword",type:"password",helperText:"New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(ee.a,{className:t.input,name:"confirmPassword",type:"password",helperText:"Confirm New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0}})),n.a.createElement(A.a,{variant:"contained",color:"primary",className:t.button,onClick:this.props.handleSubmit},"Submit")))}}]),a}(r.Component),Ia=Object(L.a)((function(){return{container:{marginTop:20},title:{marginBottom:5},input:{display:"block",width:"90%"},field:{marginTop:30},button:{width:"90%",marginTop:20}}}),{withTheme:!0})(Da);a(438);var Ta=a(440),Pa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={isHr:!1,isAdmin:!1,isSuperTimesheetApprover:!1,vacation:0,supervisorId:"",labelGradeId:"",labelGradeName:"",supervisorFirstName:"",supervisorLastName:"",supervisorSelected:!1,marks:Ta},r.valueLabelFormat=r.valueLabelFormat.bind(Object(p.a)(r)),r.getSliderValue=r.getSliderValue.bind(Object(p.a)(r)),r.formHandler=r.formHandler.bind(Object(p.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(p.a)(r)),r.isHrSwitch=r.isHrSwitch.bind(Object(p.a)(r)),r.isAdminSwitch=r.isAdminSwitch.bind(Object(p.a)(r)),r.isSuperTimesheetApproverSwitch=r.isSuperTimesheetApproverSwitch.bind(Object(p.a)(r)),r.selectSupervisor=r.selectSupervisor.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setState({firstName:"",middleName:"",lastName:"",supervisorId:"",newPassword:"",confirmPassword:"",isHr:!1,isAdmin:!1,isSuperTimesheetApprover:!1,vacation:0,laborGradeId:Ta[0].label,laborGradeName:"",errorAlert:!1,successAlert:!1,marks:Ta,supervisorSelected:!1,supervisorFirstName:"",supervisorLastName:""})}},{key:"valueLabelFormat",value:function(e){return this.state.marks[e].label}},{key:"getSliderValue",value:function(e){this.setState({laborGradeId:this.state.marks[e].label,laborGradeName:this.state.marks[e].name})}},{key:"formHandler",value:function(e){e.preventDefault(),this.setState(Object(je.a)({},e.target.name,e.target.value))}},{key:"isHrSwitch",value:function(){this.setState({isHr:!this.state.isHr})}},{key:"isAdminSwitch",value:function(){this.setState({isAdmin:!this.state.isAdmin})}},{key:"isSuperTimesheetApproverSwitch",value:function(){this.setState({isSuperTimesheetApprover:!this.state.isSuperTimesheetApprover})}},{key:"selectSupervisor",value:function(e,t,a){this.setState({supervisorId:e,supervisorFirstName:t,supervisorLastName:a,supervisorSelected:!0})}},{key:"handleSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,m,p,h,d,f,g=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=this.state,r=a.firstName,n=a.middleName,s=a.lastName,o=a.supervisorId,i=a.laborGradeId,c=a.laborGradeName,u=a.confirmPassword,m=a.isHr,p=a.isAdmin,h=a.isSuperTimesheetApprover,d=a.vacation,f={supervisor_id:o,labor_grade_id:{labor_grade_id:i,labor_grade_name:c},password:u,first_name:r,middle_name:n,last_name:s,start_date:(new Date).getTime(),end_date:null,is_admin:p,is_hr_staff:m,is_super_timesheet_approver:h,is_secondary_approver:!1,vacation:d},e.next=5,w.createEmployee(t,f);case 5:this.setState({successAlert:!0,errorAlert:!1}),setTimeout((function(){g.setState({successAlert:!1,errorAlert:!1})}),1e3);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.hr;return n.a.createElement("div",{className:t.root},this.state.errorAlert?n.a.createElement(ya,{config:{message:"error",variant:"error"}}):null,this.state.successAlert?n.a.createElement(ya,{config:{message:"success",variant:"success"}}):null,n.a.createElement(X.a,{className:t.paper,elevation:2},n.a.createElement(Ze.a,{container:!0,spacing:1},n.a.createElement(Ca,{hr:a,formHandler:this.formHandler,isHrSwitch:this.isHrSwitch,isHr:this.state.isHr,isAdminSwitch:this.isAdminSwitch,isAdmin:this.state.isAdmin,isSuperTimesheetApproverSwitch:this.isSuperTimesheetApproverSwitch,isSuperTimesheetApprover:this.state.isSuperTimesheetApprover}),n.a.createElement(Se.a,{orientation:"vertical",flexItem:!0,className:t.divider}),n.a.createElement(xa,{hr:a,formHandler:this.formHandler,valueLabelFormat:this.valueLabelFormat,marks:this.state.marks,laborGradeId:this.state.laborGradeId,selectSupervisor:this.selectSupervisor,supervisorName:"".concat(this.state.supervisorFirstName," ").concat(this.state.supervisorLastName),supervisorSelected:this.state.supervisorSelected,getSliderValue:this.getSliderValue}),n.a.createElement(Se.a,{orientation:"vertical",flexItem:!0,className:t.divider}),n.a.createElement(Ia,{hr:a,formHandler:this.formHandler,handleSubmit:this.handleSubmit}))))}}]),a}(r.Component),La=Object(L.a)((function(){return{root:{flexGrow:1},paper:{height:750},divider:{margin:45,height:690}}}),{withTheme:!0})(Pa),Aa=(a(756),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleClickOpen=function(){r.setState({setOpen:!0})},r.handleClickClose=function(){r.setState({setOpen:!1})},r.state={setOpen:!1,open:!1,members:[]},r.handleClickOpen=r.handleClickOpen.bind(Object(p.a)(r)),r.handleClickClose=r.handleClickClose.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({members:e.members,setOpen:e.open})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(ia.a,{open:this.state.setOpen,keepMounted:!0,onClose:this.handleClickClose},n.a.createElement(ca.a,{className:"modal-container"},n.a.createElement("div",null,n.a.createElement("p",{className:"modal-title"},"Team Members")),this.state.members.map((function(e){return n.a.createElement(Ze.a,{container:!0,direction:"row",alignItems:"center"},n.a.createElement(Ze.a,{item:!0,className:"projectDetailsMargin2"},n.a.createElement(he.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},e.first_name.slice(0,1).toUpperCase(),e.last_name.slice(0,1).toUpperCase())),n.a.createElement(Ze.a,{item:!0},n.a.createElement(_e.a,null,e.first_name+" "+e.last_name)))})))))}}]),a}(r.Component)),Fa=(a(247),["ID","Name","Supervisor","Team"]),Ma=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={wpList:e.wpList,data:[]},r.options={print:!1,responsive:"scroll",selectableRows:!1,onRowClick:function(e,t){console.log(e);var a=null;r.state.wpList.forEach((function(t){t.work_package_id===e[0]&&(a=t)})),r.props.history.push({pathname:"/workpackageDetail",state:{wp:a}})}},r.setData=r.setData.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setData(this.state.wpList)}},{key:"setData",value:function(e){var t,a=[];e.map((function(e){(t=[]).push(e.work_package_id),t.push(e.description),t.push(e.responsible_person_id.first_name+" "+e.responsible_person_id.last_name),t.push(e.employees.length),a.push(t)})),this.setState({data:a})}},{key:"render",value:function(){return n.a.createElement(T.a,{className:"WorkpackageListDT",title:"Work Packages",columns:Fa,options:this.options,data:this.state.data})}}]),a}(n.a.Component),Ra=a(989),Ha=a(990),Wa=a(505),Ba=a.n(Wa),Ua=a(350),Va=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={wpList:[],data:[]},r.setData=r.setData.bind(Object(p.a)(r)),r.addChildren=r.addChildren.bind(Object(p.a)(r)),r.renderTree=r.renderTree.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this;console.log("Received props"),this.setState({wpList:e.wpList},(function(){return t.setData(t.state.wpList)}))}},{key:"setData",value:function(e){var t=this,a=[],r="",n="",s=[],o={};e.sort((function(e,t){return parseInt(e.higher_work_package_id)-parseInt(t.higher_work_package_id)})),console.log(e),e.map((function(e){o={},s=[],r=e.work_package_id,n=e.description,o.id=r,o.name=n,o.children=s,"0"===e.higher_work_package_id?a.push(o):t.addChildren(a,e.higher_work_package_id,o)})),this.setState({data:a})}},{key:"addChildren",value:function(e,t,a){for(var r in e){var n=!1;e[r].id===t&&(e[r].children.push(a),n=!0),n||this.addChildren(e[r].children,t,a)}}},{key:"renderLabel",value:function(e){var t=this;return n.a.createElement(Ua.a,{display:"flex",onClick:function(a){var r=null;t.state.wpList.forEach((function(t){t.work_package_id===e.id&&(r=t)})),t.props.history.push({pathname:"/workpackageDetail",state:{wp:r,isPM:!0}}),a.stopPropagation(),a.preventDefault()}},n.a.createElement(_e.a,null,"WP"+e.id+": "+e.name))}},{key:"renderTree",value:function(e){var t=this;return console.log(e),n.a.createElement(Ra.a,{key:e.id,nodeId:e.id,label:this.renderLabel(e)},n.a.createElement(_e.a,{variant:"h5"},Array.isArray(e.children)?e.children.map((function(e){return t.renderTree(e)})):null))}},{key:"handleToggle",value:function(e,t){e.preventDefault(),console.log(t)}},{key:"render",value:function(){var e=this;return n.a.createElement(Ha.a,{className:"PDWPTreeView",defaultCollapseIcon:n.a.createElement(ot.a,null),defaultExpandIcon:n.a.createElement(Ba.a,null)},this.state.data.map((function(t){return e.renderTree(t)})))}}]),a}(n.a.Component),za=a(58),Ga=(a(207),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={wpList:r.props.wpList,data:[]},r.setData=r.setData.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.props.wpList),t=[],a=[],r=[],this.props.wpList.forEach((function(e){e.work_package_id.includes("L")&&(a.push(e),e.employees.forEach((function(e){-1===t.indexOf(e.employee_id)&&t.push(e.employee_id)})))})),n=localStorage.getItem("token"),e.next=8,N.getTimesheetsByEmps(t.toString(),n);case 8:s=e.sent,o={},a.forEach((function(e){(o={}).wp=e.work_package_id,o.employees=[];var t={};e.employees.forEach((function(a){(t={}).id=a.employee_id,t.name=a.first_name+" "+a.last_name,t.hours=0,s.forEach((function(r){r.employee.employee_id===a.employee_id&&r.details.forEach((function(a){a.project_wp===e.project.project_code+"_"+e.work_package_id&&(t.hours+=a.saturday+a.sunday+a.monday+a.tuesday+a.wednesday+a.thursday+a.friday)}))})),o.employees.push(t)})),r.push(o)})),this.setState({data:r}),console.log(s),console.log(a),console.log(t),console.log(r);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=za.e.create({container:{display:"flex",flexDirection:"row",padding:5},image:{height:30,width:30},title:{alignSelf:"center",marginLeft:5,fontSize:18},report:{marginLeft:100},date:{marginLeft:100},dataContainer:{display:"flex",alignItems:"center",flexDirection:"column",padding:20},employeesRow:{display:"flex",flexDirection:"row"},margin:{marginTop:10,marginLeft:20,marginRight:20},marginB:{marginLeft:50,marginRight:50}});return n.a.createElement(za.a,null,n.a.createElement(za.d,null,n.a.createElement(za.g,{style:e.container},n.a.createElement(za.b,{style:e.image,src:"https://cors-anywhere.herokuapp.com/https://i.imgur.com/zzNGGGB.jpg"}),n.a.createElement(za.f,{style:e.title},"Timely"),n.a.createElement(za.f,{style:e.report},"Report for ",this.state.wpList[0].project.project_code),n.a.createElement(za.f,{style:e.date},(new Date).toISOString().split("T",1)[0])),this.state.data?this.state.data.map((function(t){return n.a.createElement(za.g,{style:e.dataContainer},n.a.createElement(za.f,null,"Work Package: ",t.wp),n.a.createElement(za.g,{style:e.employeesRow},n.a.createElement(za.f,{style:e.margin},"Employee ID"),n.a.createElement(za.f,{style:e.margin},"Employee Name"),n.a.createElement(za.f,{style:e.margin},"Hours")),t.employees?t.employees.map((function(t){return n.a.createElement(za.g,{style:e.employeesRow},n.a.createElement(za.f,{style:e.marginB},t.id),n.a.createElement(za.f,{style:e.marginB},t.name),n.a.createElement(za.f,{style:e.marginB},t.hours))})):"")})):""))}}]),a}(n.a.Component)),Ka=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={projectID:r.props.location.state.projectID,project:{},wpList:[],isProjManager:null,openModal:!1},r.openModal=r.openModal.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"openModal",value:function(){this.setState({openModal:!0})}},{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,_.getDetailsById(this.state.projectID,t);case 3:a=e.sent,console.log(a),this.setState({project:a.project,wpList:a.wpList,isProjManager:a.projManager}),console.log(this.state.project.project_manager_id.first_name);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(Ze.a,{container:!0,spacing:3},n.a.createElement(Ze.a,{item:!0,xs:12,sm:6,className:"gridBorder"},n.a.createElement(_e.a,{variant:"h4"},this.state.project.project_name),n.a.createElement(_e.a,{variant:"h6"},this.state.project.description)),this.state.project.hasOwnProperty("project_manager_id")&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze.a,{item:!0,xs:12,sm:3},n.a.createElement(_e.a,{variant:"h6"},"Project Manager:"),n.a.createElement(Ze.a,{container:!0,direction:"row",alignItems:"center"},n.a.createElement(Ze.a,{item:!0,className:"projectDetailsMargin"},n.a.createElement(he.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},this.state.project.project_manager_id.first_name.slice(0,1).toUpperCase(),this.state.project.project_manager_id.last_name.slice(0,1).toUpperCase())),n.a.createElement(Ze.a,{item:!0},n.a.createElement(_e.a,null,this.state.project.project_manager_id.first_name+" "+this.state.project.project_manager_id.last_name)))),n.a.createElement(Ze.a,{item:!0,xs:6,sm:3},n.a.createElement(_e.a,{variant:"h6"},"Team:"),n.a.createElement(Ze.a,{container:!0,direction:"row",alignItems:"center"},this.state.project.employees.slice(0,5).map((function(e){return n.a.createElement(Ze.a,{item:!0,className:"projectDetailsMargin"},n.a.createElement(P.a,{title:e.first_name+" "+e.last_name},n.a.createElement(he.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},e.first_name.slice(0,1).toUpperCase(),e.last_name.slice(0,1).toUpperCase())))})),this.state.project.employees.length>5&&n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{onClick:this.openModal},"Show More"),n.a.createElement(Aa,{open:this.state.openModal,members:this.state.project.employees})))))),this.state.isProjManager&&n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(Ze.a,{justify:"space-between",container:!0,spacing:1},n.a.createElement(Ze.a,{item:!0},n.a.createElement(_e.a,{variant:"h6"},n.a.createElement("b",null,"Budget:")," $",this.state.project.budget_dollar),n.a.createElement(_e.a,{variant:"h6"},n.a.createElement("b",null,"Start Date:")," ",new Date(this.state.project.start_date).toDateString().split(" ").slice(1).join(" ")," ","\xa0 \xa0",n.a.createElement("b",null,"End Date:")," ",new Date(this.state.project.end_date).toDateString().split(" ").slice(1).join(" "))),n.a.createElement(Ze.a,{item:!0},n.a.createElement(A.a,{variant:"contained",color:"primary",component:x.b,to:{pathname:"/createWorkpackage",project:this.state.project,wpList:this.state.wpList},style:{marginRight:"5%"}},n.a.createElement("b",null,"+ Create Work Package"))))),!1===this.state.isProjManager?n.a.createElement(Ma,{history:this.props.history,type:this.state.isProjManager?"PM":"Emp",wpList:this.state.wpList}):n.a.createElement(Ze.a,{container:!0,justify:"center",className:"PDWorkpackageTree",direction:"column"},n.a.createElement(Ze.a,{item:!0},n.a.createElement(Va,{wpList:this.state.wpList,history:this.props.history})),n.a.createElement("br",null),this.state.wpList.length>0&&n.a.createElement(Ze.a,{item:!0},n.a.createElement(za.c,{document:n.a.createElement(Ga,{wpList:this.state.wpList}),fileName:this.state.projectID+"_report.pdf",style:{textDecoration:"none",padding:"10px",color:"#4a4a4a",backgroundColor:"#f2f2f2",border:"1px solid #4a4a4a"}},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Loading document...":"Get Report"})))))}}]),a}(n.a.Component),Ja=a(191),Ya=a(429),Za=a(496),Xa=a(378),qa=a.n(Xa),Qa=a(379),$a=a.n(Qa),er=a(277),tr=a.n(er),ar=a(377),rr=a.n(ar),nr=a(33),sr=Object(_t.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}})),or=function(e){var t=sr(),a=Object(nr.a)(),r=e.count,s=e.page,o=e.rowsPerPage,i=e.onChangePage;return n.a.createElement("div",{className:t.root},n.a.createElement(Oe.a,{onClick:function(e){i(e,0)},disabled:0===s,"aria-label":"first page"},"rtl"===a.direction?n.a.createElement(rr.a,null):n.a.createElement(qa.a,null)),n.a.createElement(Oe.a,{onClick:function(e){i(e,s-1)},disabled:0===s,"aria-label":"previous page"},"rtl"===a.direction?n.a.createElement(tr.a,null):n.a.createElement($a.a,null)),n.a.createElement(Oe.a,{onClick:function(e){i(e,s+1)},disabled:s>=Math.ceil(r/o)-1,"aria-label":"next page"},"rtl"===a.direction?n.a.createElement($a.a,null):n.a.createElement(tr.a,null)),n.a.createElement(Oe.a,{onClick:function(e){i(e,Math.max(0,Math.ceil(r/o)-1))},disabled:s>=Math.ceil(r/o)-1,"aria-label":"last page"},"rtl"===a.direction?n.a.createElement(qa.a,null):n.a.createElement(rr.a,null)))},ir=a(495),lr=Object(_t.a)((function(e){return{search:Object(je.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Pe.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Pe.d)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(je.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200})}})),cr=function(e){var t=e.preGlobalFilteredRows,a=e.globalFilter,r=e.setGlobalFilter,s=lr(),o=t.length;return n.a.createElement("div",{className:s.search},n.a.createElement("div",{className:s.searchIcon},n.a.createElement(Te.a,null)),n.a.createElement(Le.a,{value:a||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"".concat(o," records..."),classes:{root:s.inputRoot,input:s.inputInput},inputProps:{"aria-label":"search"}}))},ur=Object(_t.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Pe.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),mr=function(e){var t=ur(),a=e.preGlobalFilteredRows,r=e.setGlobalFilter,s=e.globalFilter;return n.a.createElement(we.a,null,n.a.createElement(_e.a,{className:t.title,variant:"h6",id:"tableTitle"},"Work Package Reports"),n.a.createElement(cr,{preGlobalFilteredRows:a,globalFilter:s,setGlobalFilter:r}))},pr=a(367),hr=a.n(pr),dr=a(226),fr={padding:0,margin:0,border:0,background:"transparent"},gr={Cell:function(e){var t=e.cell.value,a=e.row.index,r=e.column.id,s=e.updateMyData,o=n.a.useState(t),i=Object(re.a)(o,2),l=i[0],c=i[1];return n.a.useEffect((function(){c(t)}),[t]),n.a.createElement("input",{style:fr,value:l,onChange:function(e){c(e.target.value)},onBlur:function(){s(a,r,l)}})}},br=function(e){var t=e.columns,a=e.data,r=(e.setData,e.updateMyData),s=e.skipPageReset,o=Object(dr.useTable)({columns:t,data:a,defaultColumn:gr,autoResetPage:!s,updateMyData:r},dr.useGlobalFilter,dr.useSortBy,dr.usePagination,(function(e){e.allColumns.push((function(e){return[].concat(Object(Ja.a)(e),[{id:"view",Header:n.a.createElement("div",null,"Information Page"),Cell:function(e){e.row;return n.a.createElement(A.a,{variant:"contained",color:"primary"},"View")}},{id:"option",Header:n.a.createElement("div",null),Cell:function(e){e.row;return n.a.createElement(A.a,null,n.a.createElement(hr.a,null))}}])}))})),i=o.getTableProps,l=o.headerGroups,c=o.prepareRow,u=o.page,m=o.gotoPage,p=o.setPageSize,h=o.preGlobalFilteredRows,d=o.setGlobalFilter,f=o.state,g=f.pageIndex,b=f.pageSize,v=f.globalFilter;return n.a.createElement(V.a,null,n.a.createElement(mr,{preGlobalFilteredRows:h,setGlobalFilter:d,globalFilter:v}),n.a.createElement(W.a,i(),n.a.createElement(z.a,null,l.map((function(e){return n.a.createElement(G.a,e.getHeaderGroupProps(),e.headers.map((function(e){return n.a.createElement(U.a,"view"===e.id?e.getHeaderProps():e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),"view"!==e.id&&"option"!==e.id?n.a.createElement(ir.a,{active:e.isSorted,direction:e.isSortedDesc?"desc":"asc"}):null)})))}))),n.a.createElement(B.a,null,u.map((function(e,t){return c(e),n.a.createElement(G.a,e.getRowProps(),e.cells.map((function(e){return n.a.createElement(U.a,e.getCellProps(),e.render("Cell"))})))}))),n.a.createElement(Ya.a,null,n.a.createElement(G.a,null,n.a.createElement(Za.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:a.length}],colSpan:3,count:a.length,rowsPerPage:b,page:g,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){m(t)},onChangeRowsPerPage:function(e){p(Number(e.target.value))},ActionsComponent:or})))))},vr=a(291),Er=a.n(vr),jr=function(e){for(var t=[],a=0;a<e;a++)t.push(a);return t},yr=function(){var e=Math.random();return{WpId:Er.a.generate({words:1,numbers:2}),WpName:Er.a.generate({words:1,numbers:0}),PM:Er.a.generate({words:1,numbers:0}),Team:Math.floor(100*Math.random()),status:e>.66?"relationship":e>.33?"complicated":"single"}};var kr=function(){var e=n.a.useMemo((function(){return[{Header:"WorkPackge ID",accessor:"WpId"},{Header:"WorkPackage Name",accessor:"WpName"},{Header:"Project Manager",accessor:"PM"},{Header:"Team",accessor:"Team"}]}),[]),t=n.a.useState(n.a.useMemo((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=t[a];return jr(r).map((function(r){return Object(Ot.a)({},yr(),{subRows:t[a+1]?e(a+1):void 0})}))};return r()}(20)}),[])),a=Object(re.a)(t,2),r=a[0],s=a[1],o=n.a.useState(!1),i=Object(re.a)(o,2),l=i[0],c=i[1];return n.a.createElement("div",null,n.a.createElement(Je.a,null),n.a.createElement(br,{columns:e,data:r,setData:s,updateMyData:function(e,t,a){c(!0),s((function(r){return r.map((function(n,s){return s===e?Object(Ot.a)({},r[e],Object(je.a)({},t,a)):n}))}))},skipPageReset:l}))},wr=a(492),Or=a(433),_r=(a(349),function(e){var t=[];e.project.employees.map((function(e){var a={};a.value=e.employee_id,a.label=e.first_name+" "+e.last_name,t.push(a)}));var a=[];return a.push({value:"",label:"Project Level"}),e.wpList.map((function(e){if("L"!==e.work_package_id.substring(e.work_package_id.length-1)){var t={};t.value=e.work_package_id,t.label="WP"+e.work_package_id+": "+e.description,a.push(t)}})),n.a.createElement("form",{autoComplete:"off"},n.a.createElement(Ze.a,{container:!0,direction:"column",alignItems:"center"},n.a.createElement(Ze.a,{item:!0},n.a.createElement(ee.a,{component:"span",className:"WPInfowidth",label:"Work Package ID",name:"wpID",value:"WP"+e.wpID,onChange:e.handleChange,disabled:!0})),n.a.createElement(Ze.a,{item:!0},n.a.createElement(Or.a,{control:n.a.createElement(wr.a,{checked:e.checkedLower,onChange:e.handleCheckboxChange,name:"checkedLower"}),label:"Lowest Work Package"})),n.a.createElement("br",null),n.a.createElement(Ze.a,{item:!0},n.a.createElement(ee.a,{component:"span",className:"WPInfowidth",label:"Work Package Name",name:"wpName",value:e.wpName,onChange:e.handleChange})),n.a.createElement("br",null),n.a.createElement(Ze.a,{item:!0},n.a.createElement(ee.a,{select:!0,label:"Responsible Engineer",className:"WPInfowidth",name:"wpRE",value:e.wpRE,onChange:e.handleChange},t.map((function(e){return n.a.createElement($.a,{key:e.value,value:e.value},e.label)})))),n.a.createElement("br",null),n.a.createElement(Ze.a,{item:!0},n.a.createElement(ee.a,{component:"span",className:"WPInfowidth",label:"Parent Project",value:e.project.project_code+": "+e.project.project_name,onChange:e.handleChange,disabled:!0})),n.a.createElement("br",null),n.a.createElement(Ze.a,{item:!0},n.a.createElement(ee.a,{select:!0,label:"Parent Work Package",className:"WPInfowidth",name:"wpParent",value:e.wpParent,onChange:e.handleChange},a.map((function(e){return n.a.createElement($.a,{key:e.value,value:e.value},e.label)}))))))}),Nr=function(e){return n.a.createElement(qt.a,{multiple:!0,options:e.project.employees,onChange:function(t,a){return e.handleTagsChange(a)},getOptionLabel:function(e){return e.first_name+" "+e.last_name+" ("+e.labor_grade_id.labor_grade_id+")"},disabled:e.isDisabled,renderInput:function(e){return n.a.createElement(ee.a,Object.assign({},e,{variant:"standard",label:"Select Employees"}))}})},Cr=Object(_t.a)((function(e){return{root:{width:"100%"},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));function Sr(e){var t=Cr(),a=(JSON.parse(sessionStorage.getItem("user")),Object(r.useState)({wpID:"",wpName:"",wpRE:"",wpParent:"",Desc:"",cost:"",startDate:new Date,endDate:new Date,checkedLower:!1,wpList:e.location.wpList,project:e.location.project,wpEmps:[]})),s=Object(re.a)(a,2),o=s[0],i=s[1],u=function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,i,c,u,p,h,d,f,g,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token"),console.log(t),!o.checkedLower){e.next=20;break}return e.next=5,C.getYearlyRate(t);case 5:for(u in r=e.sent,console.log(r),n=o.cost,s=[],i={},o.wpEmps)i={},p=o.wpEmps[u].labor_grade_id.labor_grade_id,c=!1,s.forEach((function(e){e.id===p&&(e.count++,c=!0)})),c||(i.id=p,i.count=1,r.forEach((function(e){e.labor_grade_id.labor_grade_id===p&&(i.rate=e.charge_rate)})),s.push(i));h=m(n,s),d={},f=[],s.forEach((function(e){(d={}).project_code=o.project.project_code,d.work_package_id=o.wpID,d.type="BUDGET",d.start_date=o.startDate.toISOString().split("T",1)[0],d.end_date=o.endDate.toISOString().split("T",1)[0],d.revision=1,d.labor_grade_id=e.id,d.quantity=e.count,d.plan_hour=h,d.project_wp=o.project.project_code+"_"+o.wpID,f.push(d)})),g=[],o.wpEmps.forEach((function(e){g.push(e)})),a={project:o.project,work_package_id:o.wpID,higher_work_package_id:o.wpParent,responsible_person_id:{employee_id:o.wpRE},is_open:1,description:o.wpName+": "+o.Desc,project_wp:o.project.project_code+"_"+o.wpID,workPackagePlanCollection:f,employees:g},e.next=21;break;case 20:a={project:o.project,work_package_id:o.wpID,higher_work_package_id:o.wpParent,responsible_person_id:{employee_id:o.wpRE},is_open:1,description:o.wpName+": "+o.Desc,project_wp:o.project.project_code+"_"+o.wpID,employees:[]};case 21:return console.log(JSON.stringify(a)),e.next=24,S.createWorkpackage(a,t);case 24:b=e.sent,console.log(b);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e,t){var a=0,r=0;return t.forEach((function(e){a+=e.rate*e.count,r+=e.count})),a/=r,(parseInt(e)/a/r).toFixed(2)},p=n.a.useState(0),h=Object(re.a)(p,2),d=h[0],f=h[1],g=["Work-Package Information","Work-Package Description","Budget","Schedule","Employees"];return n.a.createElement("div",{className:t.root},n.a.createElement(Nt.a,{activeStep:d,alternativeLabel:!0},g.map((function(e){return n.a.createElement(Ct.a,{key:e},n.a.createElement(St.a,null,e))}))),n.a.createElement("div",null,d===g.length?n.a.createElement("div",null,n.a.createElement(_e.a,{component:"span",className:t.instructions},"All steps completed"),n.a.createElement(A.a,{onClick:function(){f(0)}},"Reset")):n.a.createElement("div",null,n.a.createElement(_e.a,{component:"span",className:t.instructions},function(e,t,a,r,s,o,i){switch(e){case 0:return n.a.createElement(_r,{wpList:t.wpList,project:t.project,wpID:t.wpID,wpName:t.wpName,wpRE:t.wpRE,wpParent:t.wpParent,checkedLower:t.checkedLower,handleChange:a,handleCheckboxChange:o});case 1:return n.a.createElement(It,{Desc:t.Desc,handleChange:a});case 2:return n.a.createElement(Tt,{cost:t.cost,handleChange:a,isDisabled:!t.checkedLower});case 3:return n.a.createElement(Mt,{startDate:t.startDate,endDate:t.endDate,handleStartChange:r,handleEndChange:s,isDisabled:!t.checkedLower});case 4:return n.a.createElement(Nr,{handleTagsChange:i,project:t.project,wpEmps:t.wpEmps,isDisabled:!t.checkedLower})}}(d,o,(function(e){var t=e.target,a=t.name,r=t.value;if(i(Object(Ot.a)({},o,Object(je.a)({},a,r))),"wpParent"===a){var n=-1,s=o.wpList;for(var l in s.sort(),s)s[l].work_package_id.startsWith(r)&&parseInt(s[l].work_package_id).toString().length===r.length+1&&(n=parseInt(s[l].work_package_id)+1);-1===n&&(n=10*parseInt(r)+1),console.log(n);var c=n;c+=o.checkedLower?"L":"",console.log(c),i(Object(Ot.a)({},o,{wpID:c,wpParent:""===r?"0":r}))}}),(function(e){i(Object(Ot.a)({},o,{startDate:e}))}),(function(e){i(Object(Ot.a)({},o,{endDate:e}))}),(function(e){var t;i(Object(Ot.a)({},o,(t={},Object(je.a)(t,e.target.name,e.target.checked),Object(je.a)(t,"wpID",e.target.checked?o.wpID+"L":o.wpID.replace("L","")),t)))}),(function(e){console.log(e),i(Object(Ot.a)({},o,{wpEmps:e}))}))),n.a.createElement("div",null,n.a.createElement(A.a,{disabled:0===d,onClick:function(){f((function(e){return e-1}))},className:t.backButton},"Back"),d===g.length-1&&n.a.createElement(A.a,{variant:"contained",color:"primary",onClick:u},"Finish"),d!=g.length-1&&n.a.createElement(A.a,{variant:"contained",color:"primary",onClick:function(){f((function(e){return e+1}))}},"Next")))))}var xr=a(190),Dr=a.n(xr),Ir=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={options:{chart:{id:"basic-bar"},title:{text:"Employee hours spent",align:"center",margin:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"20px",color:"#263238"}},tooltip:{enabled:!0,x:{show:!0,formatter:function(e,t){return r.state.emps[t.dataPointIndex]}}},xaxis:{categories:[],axisBorder:{show:!0,color:"#78909C",height:1,width:"100%",offsetX:0,offsetY:0},title:{text:"Employees",style:{fontSize:"16px",color:"#263238"}}},yaxis:{axisBorder:{show:!0,color:"#78909C",height:1,offsetX:0,offsetY:0},title:{text:"Hours",style:{fontSize:"16px",color:"#263238"}}}},series:[{name:"Hours",data:[]}],emps:[],week:r.props.week},r.handleWeekChange=r.handleWeekChange.bind(Object(p.a)(r)),r.getWeeksMap=r.getWeeksMap.bind(Object(p.a)(r)),r.setGraphValues=r.setGraphValues.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.setGraphValues()}},{key:"setGraphValues",value:function(){var e=this,t=[],a=[];this.props.EmpsX.forEach((function(e){t.push(e.employee_id),a.push(e.first_name+" "+e.last_name+" ("+e.labor_grade_id.labor_grade_id+")")}));var r=this.props.wp.project.project_code,n=this.props.wp.work_package_id,s=[];console.log(this.state.week),t.forEach((function(t){var a=0;e.props.EmpsY.forEach((function(s){s.employee.employee_id===t&&s.week===e.state.week&&s.details.forEach((function(e){e.project_code===r&&e.work_package_id===n&&(a+=e.saturday+e.sunday+e.monday+e.tuesday+e.wednesday+e.thursday+e.friday)}))})),s.push(a)})),console.log(s),this.setState((function(e){return{options:Object(Ot.a)({},e.options,{xaxis:Object(Ot.a)({},e.options.xaxis,{categories:t})}),series:[Object(Ot.a)({},e.series,{data:s})],emps:a}}))}},{key:"handleWeekChange",value:function(e){var t=this;console.log(e.target.value),this.setState({week:e.target.value},(function(){return t.setGraphValues()}))}},{key:"getWeeksMap",value:function(){var e=[],t=new Date(this.props.wp.workPackagePlanCollection[0].start_date),a=new Date(this.props.wp.workPackagePlanCollection[0].end_date);console.log(t),console.log(a);var r=t.getDay();r>-1&&r<6&&t.setDate(t.getDate()+(6-r)),a.getDay()<6&&a.setDate(a.getDate()+(6-a.getDay())),console.log(t),console.log(a);for(var n=t;n<=a;)e.push({label:n.toISOString().split("T",1)[0],value:n.getWeek()}),n.setDate(n.getDate()+7);return e}},{key:"render",value:function(){var e=[];return this.props.wp.workPackagePlanCollection.length>0&&(e=this.getWeeksMap()),n.a.createElement("div",{className:"app"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"mixed-chart"},n.a.createElement(ee.a,{select:!0,label:"Week Ending",className:"WPInfowidth",name:"week",value:this.state.week,onChange:this.handleWeekChange},e.map((function(e){return n.a.createElement($.a,{key:e.value,value:e.value},e.label)}))),n.a.createElement(Dr.a,{options:this.state.options,series:this.state.series,type:"bar",width:"500"}))))}}]),a}(n.a.Component),Tr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={series:[],options:{chart:{height:350,type:"line",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},colors:["#fc0303","#035efc","#17b309"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},title:{text:"Budget vs Actual hours spent per labor grade",align:"center"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}},markers:{size:1},xaxis:{categories:[],title:{text:"Labor Grades"}},yaxis:{title:{text:"Hours"}},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}},wp:r.props.wp,tsheets:r.props.tsheets,startDate:"",endDate:""},r.calcValues=r.calcValues.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.calcValues()}},{key:"calcValues",value:function(){var e=this;console.log(this.state.wp);var t=[],a=[],r=[],n=[];this.state.wp.workPackagePlanCollection.forEach((function(e){var r=0;"BUDGET"===e.type?(t.push(e.labor_grade_id),a.push(parseInt(e.plan_hour))):e.revision>r&&(r=e.revision,n[t.indexOf(e.labor_grade_id)]=parseInt(e.plan_hour))}));for(var s=0;s<t.length;s++)r.push(0);console.log(this.state.tsheets),this.state.tsheets.forEach((function(a){a.details.forEach((function(n){console.log(n.project_wp),console.log(e.state.wp.project_wp),n.project_wp===e.state.wp.project_wp&&(r[t.indexOf(a.employee.labor_grade_id.labor_grade_id)]+=parseInt(n.saturday+n.sunday+n.monday+n.tuesday+n.wednesday+n.thursday+n.friday))}))})),console.log(t),console.log(a),console.log(r),console.log(n);var o=new Date(this.state.wp.workPackagePlanCollection[0].start_date).toISOString().split("T",1)[0],i=new Date(this.state.wp.workPackagePlanCollection[0].end_date).toISOString().split("T",1)[0];this.setState((function(e){return{series:[].concat(Object(Ja.a)(e.series),[{name:"Budgeted",data:a},{name:"Done",data:r},{name:"Remaining RE estimate",data:n}]),options:Object(Ot.a)({},e.options,{xaxis:Object(Ot.a)({},e.options.xaxis,{categories:t})}),startDate:o,endDate:i}}))}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Dr.a,{options:this.state.options,series:this.state.series,type:"line",height:"500",width:"800"}),n.a.createElement(_e.a,{variant:"h6"},this.state.startDate," - ",this.state.endDate))}}]),a}(n.a.Component),Pr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={series:[],options:{chart:{height:350,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight"},title:{text:"RE estimations",align:"left"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{categories:[],title:{text:"Date"}},yaxis:{title:{text:"Hours"}},tooltip:{enabled:!0,y:{show:!0,formatter:function(e,t){return e+" hrs "+r.state.graphValueObj[t.dataPointIndex]}}}},wp:r.props.wp,graphValueObj:[]},r.calcGraphValus=r.calcGraphValus.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.calcGraphValus()}},{key:"calcGraphValus",value:function(){var e=[],t=[],a=[],r={};this.state.wp.workPackagePlanCollection.forEach((function(n){if("ESTIMATE"===n.type){r={};var s=new Date(n.start_date).toISOString().split("T",1)[0];-1===e.indexOf(s)&&(e.push(s),t[e.indexOf(s)]=0,a.push([])),t[e.indexOf(s)]+=n.plan_hour,r.id=n.labor_grade_id,r.hours=n.plan_hour,a[e.indexOf(s)].push(r)}}));var n=[];a.forEach((function(e){var t="";e.forEach((function(e){t+=e.id+": "+e.hours})),n.push(t)})),this.setState((function(a){return{series:[].concat(Object(Ja.a)(a.series),[{name:"RE estimate",data:t}]),options:Object(Ot.a)({},a.options,{xaxis:Object(Ot.a)({},a.options.xaxis,{categories:e})}),graphValueObj:n}})),console.log(e),console.log(t),console.log(a)}},{key:"render",value:function(){return n.a.createElement(Dr.a,{options:this.state.options,series:this.state.series,type:"line",height:"500",width:"800"})}}]),a}(n.a.Component),Lr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={wp:r.props.location.state.wp,isProjManager:r.props.location.state.isPM,emps:[],timesheets:[],week:0,openModal:!1},r.openModal=r.openModal.bind(Object(p.a)(r)),r.calcValuesEmpHours=r.calcValuesEmpHours.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"openModal",value:function(){this.setState({openModal:!0})}},{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.calcValuesEmpHours();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calcValuesEmpHours",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=[],this.state.wp.employees.forEach((function(e){a.push(e.employee_id)})),e.next=5,N.getTimesheetsByEmps(a.toString(),t);case 5:r=e.sent,n=new Date,s=n.getWeek(),n.getDay()>0&&n.getDay()<6&&s--,this.setState({emps:this.state.wp.employees,week:s,timesheets:r}),console.log(r);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(Ze.a,{container:!0,spacing:3},n.a.createElement(Ze.a,{item:!0,xs:12,sm:6,className:"gridBorder"},n.a.createElement(_e.a,{variant:"h4"},this.state.wp.description),n.a.createElement(_e.a,{variant:"h6"},this.state.wp.description)),n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze.a,{item:!0,xs:12,sm:3},n.a.createElement(_e.a,{variant:"h6"},"Responsible Engineer:"),n.a.createElement(Ze.a,{container:!0,direction:"row",alignItems:"center"},n.a.createElement(Ze.a,{item:!0,className:"projectDetailsMargin"},n.a.createElement(he.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},this.state.wp.responsible_person_id.first_name.slice(0,1).toUpperCase(),this.state.wp.responsible_person_id.last_name.slice(0,1).toUpperCase())),n.a.createElement(Ze.a,{item:!0},n.a.createElement(_e.a,null,this.state.wp.responsible_person_id.first_name+" "+this.state.wp.responsible_person_id.last_name)))),n.a.createElement(Ze.a,{item:!0,xs:6,sm:3},n.a.createElement(_e.a,{variant:"h6"},"Team:"),n.a.createElement(Ze.a,{container:!0,direction:"row",alignItems:"center"},this.state.wp.employees.slice(0,5).map((function(e){return n.a.createElement(Ze.a,{item:!0,className:"projectDetailsMargin"},n.a.createElement(P.a,{title:e.first_name+" "+e.last_name},n.a.createElement(he.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},e.first_name.slice(0,1).toUpperCase(),e.last_name.slice(0,1).toUpperCase())))})),this.state.wp.employees.length>5&&n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{onClick:this.openModal},"Show More"),n.a.createElement(Aa,{open:this.state.openModal,members:this.state.wp.employees})))))),this.state.isProjManager&&this.state.emps.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ir,{EmpsX:this.state.emps,week:50,EmpsY:this.state.timesheets,wp:this.state.wp}),n.a.createElement("br",null),n.a.createElement(Tr,{tsheets:this.state.timesheets,wp:this.state.wp}),n.a.createElement("br",null),n.a.createElement(Pr,{wp:this.state.wp})))}}]),a}(n.a.Component),Ar=[{name:"employeeId",label:"Employee ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"}],Fr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[]},r.fetchData=r.fetchData.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getEmployees",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),r=w.getEmployeesBySupervisor(a.employee_id,t),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,console.log(this.props),e.next=4,this.getEmployees();case 4:for(t=e.sent,a=[],r=0;r<t.length;r++)n=t[r].employee_id,s=t[r].first_name,o=t[r].last_name,(i=[]).push(n),i.push(s),i.push(o),a.push(i);this.setState({data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.props.classes;return n.a.createElement("div",null,n.a.createElement(T.a,{className:"datatable",title:n.a.createElement("h1",null,"Employees"),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,onRowClick:function(t,a){localStorage.setItem("name",t[1]+" "+t[2]),e.props.history.push("/dashboard/tsapprover/".concat(t[0]))}}),columns:Ar,data:this.state.data}))}}]),a}(r.Component),Mr=[{name:"timesheetid",label:"Timesheet ID",className:"column",options:{filter:!1}},{name:"weeknumber",label:"Week Number",className:"column",options:{filter:!1}},{name:"weekending",label:"Week Ending",className:"column",options:{sort:!0,filter:!1}}],Rr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={timesheets:[],loadedUserID:{}},r.fetchTimesheets=r.fetchTimesheets.bind(Object(p.a)(r)),r.formatWeekEnding=r.formatWeekEnding.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.fetchTimesheets(),this.formatWeekEnding()}},{key:"fetchTimesheets",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=this.props.match.params.id,e.next=4,N.getAllCloseTimesheetsByEmp(a,t);case 4:if(0!=(r=e.sent).length){for(n=[],s=0;s<r.length;s++)o=r[s].timesheet_id,i=r[s].week,c=this.formatWeekEnding(r[s].week_ending),(u=[]).push(o),u.push(i),u.push(c),n.push(u);n.sort((function(e,t){return t[1]-e[1]})),this.setState({timesheets:n,loadedUserID:a})}else console.log("no timesheets");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formatWeekEnding",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{className:"datatable",title:n.a.createElement("h1",null,"Timesheets To Approve For ",localStorage.name),options:(e=this.props,this.state,this.fetchTimesheets,{selectableRows:!1,search:!0,print:!1,download:!1,rowHover:!0,onRowClick:function(t){e.history.push("/dashboard/tsapprover/".concat(e.match.params.id,"/").concat(t[0])),localStorage.setItem("timesheetId",t[0])}}),columns:Mr,data:this.state.timesheets}));var e}}]),a}(r.Component),Hr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).getCurrentDate=r.getCurrentDate.bind(Object(p.a)(r)),r.approveTimesheet=r.approveTimesheet.bind(Object(p.a)(r)),r.rejectTimesheet=r.rejectTimesheet.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"getCurrentDate",value:function(){return(new Date).getTime()}},{key:"approveTimesheet",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),r=this.props.match.params,e.next=5,N.getTimesheetById(r.id,t,r.tsid);case 5:return(n=e.sent).status="APPROVED",n.approver_id=a.employee_id,n.approve_date=this.getCurrentDate(),e.next=11,N.updateTimesheetById(r.id,t,r.tsid,n);case 11:s=e.sent,console.log(s),this.props.history.push("/dashboard/tsapprover/".concat(r.id));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rejectTimesheet",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),r=this.props.match.params,e.next=5,N.getTimesheetById(r.id,t,r.tsid);case 5:return(n=e.sent).status="OPEN",n.approver_id=a.employee_id,n.approve_date=this.getCurrentDate(),e.next=11,N.updateTimesheetById(r.id,t,r.tsid,n);case 11:s=e.sent,console.log(s),this.props.history.push("/dashboard/tsapprover/".concat(r.id));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(ae,Object.assign({loadedUser:this.props.match.params.tsid},this.props)),n.a.createElement(A.a,{variant:"contained",color:"primary",onClick:this.approveTimesheet},"Approve"),n.a.createElement(A.a,{variant:"contained",color:"secondary",onClick:this.rejectTimesheet},"Reject"))}}]),a}(r.Component),Wr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e,t=this;switch(this.props.config.option){case"dashboard":e=n.a.createElement(D.d,null,n.a.createElement(D.b,{path:"/dashboard/timesheet",exact:!0,render:function(e){return n.a.createElement(H,e)}}),n.a.createElement(D.b,{path:"/dashboard/timesheet/:id",exact:!0,render:function(e){return n.a.createElement(ae,Object.assign({loadedUser:t.props.config.loadedUser},e))}}),n.a.createElement(D.b,{path:"/dashboard/hr",exact:!0,render:function(e){return n.a.createElement(Ee,Object.assign({loadedUser:t.props.config.loadedUser},e))}}),n.a.createElement(D.b,{path:"/dashboard/profile/:id",exact:!0,render:function(e){return n.a.createElement(Oa,Object.assign({hr:!1,loadedUser:t.props.config.loadedUser},e))}}),n.a.createElement(D.b,{exact:!0,path:"/dashboard/hr/create",render:function(e){return n.a.createElement(La,Object.assign({hr:!0,createEmployee:!0,loadedUser:t.props.config.loadedUser},e))}}),n.a.createElement(D.b,{path:"/dashboard/hr/:id",exact:!0,render:function(e){return n.a.createElement(Oa,Object.assign({hr:!0,createEmployee:!1,loadedUser:t.props.config.loadedUser},e))}}),n.a.createElement(D.b,{path:"/dashboard/supervisor",exact:!0,render:function(e){return n.a.createElement(Xt,e)}}),n.a.createElement(D.b,{path:"/dashboard/supervisor/remove",exact:!0,render:function(e){return n.a.createElement($t,e)}}),n.a.createElement(D.b,{path:"/dashboard/supervisor/assign",exact:!0,render:function(e){return n.a.createElement(ta,e)}}),n.a.createElement(D.b,{path:"/dashboard/supervisor/:id",exact:!0,render:function(e){return n.a.createElement(ra,e)}}),n.a.createElement(D.b,{path:"/dashboard/tsapprover",exact:!0,render:function(e){return n.a.createElement(Fr,e)}}),n.a.createElement(D.b,{path:"/dashboard/tsapprover/:id",exact:!0,render:function(e){return n.a.createElement(Rr,e)}}),n.a.createElement(D.b,{path:"/dashboard/tsapprover/:id/:tsid",exact:!0,render:function(e){return n.a.createElement(Hr,e)}}),n.a.createElement(D.b,{path:"/dashboard/projects",exact:!0,render:function(e){return n.a.createElement(wt,e)}}),n.a.createElement(D.b,{path:"/createProject",exact:!0,render:function(e){return n.a.createElement(Ht,e)}}),n.a.createElement(D.b,{path:"/projectDetails",exact:!0,render:function(e){return n.a.createElement(Ka,e)}}),n.a.createElement(D.b,{path:"/createWorkpackage",exact:!0,render:function(e){return n.a.createElement(Sr,e)}}),n.a.createElement(D.b,{path:"/workpackageDetail",exact:!0,render:function(e){return n.a.createElement(Lr,e)}}),n.a.createElement(D.b,{path:"/dashboard/lead",exact:!0,render:function(e){return n.a.createElement(kr,e)}}),n.a.createElement(D.b,{path:"/dashboard/:id",exact:!0,render:function(e){return n.a.createElement(zt,Object.assign({token:t.props.token},e))}}));break;case"login":e=n.a.createElement(D.d,null,n.a.createElement(D.b,{path:"/",exact:!0,render:function(e){return n.a.createElement(ye,Object.assign({},e,{loginHandler:t.props.config.loginHandler}))}}));break;case"authentication":e=n.a.createElement(D.d,null,n.a.createElement(D.b,{path:"/dashboard",render:function(e){return n.a.createElement(vt,Object.assign({token:t.props.token},e,{logoutHandler:t.props.config.logoutHandler,loadedUser:t.props.config.loadedUser,breadCrumbs:t.props.config.breadCrumbs}))}}));break;default:e=n.a.createElement(D.d,null,"\xe5",n.a.createElement(D.b,{path:"/",exact:!0,render:function(e){return n.a.createElement(ye,Object.assign({},e,{loginHandler:t.props.config.loginHandler}))}}))}return n.a.createElement("div",null,e)}}]),a}(r.Component),Br=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={isAuth:!1,loadedUser:null,token:null},r.loginHandler=r.loginHandler.bind(Object(p.a)(r)),r.logoutHandler=r.logoutHandler.bind(Object(p.a)(r)),r.setAutoLogout=r.setAutoLogout.bind(Object(p.a)(r)),r.sessionHandler=r.sessionHandler.bind(Object(p.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.sessionHandler()}},{key:"sessionHandler",value:function(){var e=sessionStorage.getItem("logged"),t=localStorage.getItem("token"),a=localStorage.getItem("expiryDate");if(e)if(t&&a){var r=new Date(a).getTime()-(new Date).getTime();this.setAutoLogout(r),this.setState({isAuth:!0,loadedUser:JSON.parse(sessionStorage.getItem("user"))})}else this.props.history.push("/");else this.logoutHandler()}},{key:"loginHandler",value:function(){var e=Object(c.a)(l.a.mark((function e(t,a){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.login(a);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return");case 7:this.setState({isAuth:!0,loadedUser:r.loadedUser,token:r.token}),36e5,n=new Date((new Date).getTime()+36e5),localStorage.setItem("expiryDate",n.toISOString()),localStorage.setItem("token",r.token),sessionStorage.setItem("user",JSON.stringify(r.loadedUser)),sessionStorage.setItem("logged",!0),this.setAutoLogout(36e5),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.error(e.t0);case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"logoutHandler",value:function(){this.setState({isAuth:!1,loadedUser:null}),localStorage.removeItem("expiryDate"),localStorage.removeItem("token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("logged")}},{key:"setAutoLogout",value:function(e){var t=this;setTimeout((function(){t.logoutHandler()}),e)}},{key:"render",value:function(){var e,t=this,a=function(e){return{option:e,loginHandler:t.loginHandler,logoutHandler:t.logoutHandler,loadedUser:t.state.loadedUser}};if(this.state.isAuth){var r=null;r=null==localStorage.getItem("token")?this.state.token:localStorage.getItem("token"),e=n.a.createElement(Wr,Object.assign({},this.props,{config:a("authentication"),token:r}))}else e=n.a.createElement(Wr,Object.assign({},this.props,{config:a("login")}));return n.a.createElement("div",{className:"App"},n.a.createElement(x.a,null,this.state.isAuth?n.a.createElement(D.a,{to:"/dashboard/".concat(this.state.loadedUser.employee_id)}):n.a.createElement(D.a,{to:"/"}),e))}}]),a}(r.Component);o.a.render(n.a.createElement(Br,null),document.getElementById("root"))}},[[531,1,2]]]);
//# sourceMappingURL=main.8f180965.chunk.js.map