(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{241:function(e,t,a){},317:function(e,t,a){},347:function(e,t,a){},359:function(e,t,a){e.exports=a.p+"static/media/logo.91005679.png"},438:function(e,t,a){},439:function(e,t){e.exports=[{value:0,label:"P6",name:"P-level 6"},{value:1,label:"P5",name:"P-level 5"},{value:2,label:"P4",name:"P-level 4"},{value:3,label:"P3",name:"P-level 3"},{value:4,label:"P2",name:"P-level 2"},{value:5,label:"P1",name:"P-level 1"},{value:6,label:"DS",name:"DS level"},{value:7,label:"JS",name:"JS level"}]},530:function(e,t,a){e.exports=a(941)},535:function(e,t,a){},578:function(e,t,a){},579:function(e,t,a){},583:function(e,t,a){var r={"./af-ZA.js":584,"./ar-AE.js":585,"./ar-BH.js":586,"./ar-DZ.js":587,"./ar-EG.js":588,"./ar-IQ.js":589,"./ar-JO.js":590,"./ar-KW.js":591,"./ar-LB.js":592,"./ar-LY.js":593,"./ar-MA.js":594,"./ar-OM.js":595,"./ar-QA.js":596,"./ar-SA.js":597,"./ar-SY.js":598,"./ar-TN.js":599,"./ar-YE.js":600,"./az-Cyrl-AZ.js":601,"./az-Latn-AZ.js":602,"./be-BY.js":603,"./bg-BG.js":604,"./bs-Latn-BA.js":605,"./ca-ES.js":606,"./cs-CZ.js":607,"./cy-GB.js":608,"./da-DK.js":609,"./de-AT.js":610,"./de-CH.js":611,"./de-DE.js":612,"./de-LI.js":613,"./de-LU.js":614,"./dv-MV.js":615,"./el-GR.js":616,"./en-029.js":617,"./en-AU.js":618,"./en-BZ.js":619,"./en-CA.js":620,"./en-GB.js":621,"./en-IE.js":622,"./en-JM.js":623,"./en-NZ.js":624,"./en-PH.js":625,"./en-TT.js":626,"./en-ZA.js":627,"./en-ZW.js":628,"./es-AR.js":629,"./es-BO.js":630,"./es-CL.js":631,"./es-CO.js":632,"./es-CR.js":633,"./es-DO.js":634,"./es-EC.js":635,"./es-ES.js":636,"./es-GT.js":637,"./es-HN.js":638,"./es-MX.js":639,"./es-NI.js":640,"./es-PA.js":641,"./es-PE.js":642,"./es-PR.js":643,"./es-PY.js":644,"./es-SV.js":645,"./es-UY.js":646,"./es-VE.js":647,"./et-EE.js":648,"./eu-ES.js":649,"./fa-IR.js":650,"./fi-FI.js":651,"./fo-FO.js":652,"./fr-BE.js":653,"./fr-CA.js":654,"./fr-CH.js":655,"./fr-FR.js":656,"./fr-LU.js":657,"./fr-MC.js":658,"./gl-ES.js":659,"./gu-IN.js":660,"./he-IL.js":661,"./hi-IN.js":662,"./hr-BA.js":663,"./hr-HR.js":664,"./hu-HU.js":665,"./hy-AM.js":666,"./id-ID.js":667,"./is-IS.js":668,"./it-CH.js":669,"./it-IT.js":670,"./ja-JP.js":671,"./ka-GE.js":672,"./kk-KZ.js":673,"./kn-IN.js":674,"./ko-KR.js":675,"./kok-IN.js":676,"./ky-KG.js":677,"./lt-LT.js":678,"./lv-LV.js":679,"./mi-NZ.js":680,"./mk-MK.js":681,"./mn-MN.js":682,"./mr-IN.js":683,"./ms-BN.js":684,"./ms-MY.js":685,"./mt-MT.js":686,"./nb-NO.js":687,"./nl-BE.js":688,"./nl-NL.js":689,"./nn-NO.js":690,"./ns-ZA.js":691,"./pa-IN.js":692,"./pl-PL.js":693,"./pt-BR.js":694,"./pt-PT.js":695,"./quz-BO.js":696,"./quz-EC.js":697,"./quz-PE.js":698,"./ro-RO.js":699,"./ru-RU.js":700,"./sa-IN.js":701,"./se-FI.js":702,"./se-NO.js":703,"./se-SE.js":704,"./sk-SK.js":705,"./sl-SI.js":706,"./sma-NO.js":707,"./sma-SE.js":708,"./smj-NO.js":709,"./smj-SE.js":710,"./smn-FI.js":711,"./sms-FI.js":712,"./sq-AL.js":713,"./sr-Cyrl-BA.js":714,"./sr-Cyrl-CS.js":715,"./sr-Latn-BA.js":716,"./sr-Latn-CS.js":717,"./sv-FI.js":718,"./sv-SE.js":719,"./sw-KE.js":720,"./syr-SY.js":721,"./ta-IN.js":722,"./te-IN.js":723,"./th-TH.js":724,"./tn-ZA.js":725,"./tr-TR.js":726,"./tt-RU.js":727,"./uk-UA.js":728,"./ur-PK.js":729,"./uz-Cyrl-UZ.js":730,"./uz-Latn-UZ.js":731,"./vi-VN.js":732,"./xh-ZA.js":733,"./zh-CN.js":734,"./zh-HK.js":735,"./zh-MO.js":736,"./zh-SG.js":737,"./zh-TW.js":738,"./zu-ZA.js":739};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=583},751:function(e,t,a){},752:function(e,t,a){},753:function(e,t,a){},761:function(e,t,a){},762:function(e,t,a){},767:function(e,t){},769:function(e,t){},807:function(e,t){},808:function(e,t){},941:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(32),o=a.n(s),i=(a(535),a(9)),l=a.n(i),c=a(22),u=a(12),p=a(13),m=a(8),h=a(14),d=a(15),g=a(141),f=a.n(g);f.a.defaults.baseURL="http://localhost:8080/timely/api/",f.a.defaults.baseURL="http://timely-server-timely-wildfly.apps.shift.infoteach.ca/api/";var b=function(e){return e.data},v=function(e){return{headers:{Authorization:"Bearer "+e}}},E=function(e,t){return f.a.get(e,v(t)).then(b)},j=function(e,t,a){return f.a.post(e,a,v(t)).then(b)},y=function(e,t,a){return f.a.put(e,a,v(t)).then(b)},k=function(e,t){return f.a.post(e,t).then(b)},w={getEmployeeById:function(e,t){return E("/emps/".concat(e),t)},getAllEmployees:function(e){return E("/emps",e)},createEmployee:function(e,t){return j("/emps/",e,t)},updateEmployee:function(e,t,a){return y("/emps/".concat(e),t,a)},getCurrentUser:function(e,t){return E("/emps/".concat(e),t)},getEmployeesBySupervisor:function(e,t){return E("/emps/supervisor/".concat(e),t)}},O={login:function(e){return k("/tokens",e)}},_={getAllProjects:function(e){return E("/projects",e)},getProjectsForUser:function(e,t){return E("/projects/emp/".concat(e),t)},getProjectsForSupervisor:function(e,t){return E("projects/supervisor/".concat(e),t)},createProject:function(e,t){return j("/projects/createProject",t,e)},updateProject:function(e,t){return j("/projects/updateProject/",t,e)},getDetailsById:function(e,t){return E("/projects/projectDetails/".concat(e),t)},getById:function(e,t){return E("/projects/".concat(e),t)}},S={getAllTimesheetsByEmp:function(e,t){return E("/emps/".concat(e,"/timesheets/"),t)},getAllCloseTimesheetsByEmp:function(e,t){return E("/emps/".concat(e,"/close_timesheets"),t)},getTimesheetById:function(e,t,a){return E("/emps/".concat(e,"/timesheets/").concat(a),t)},createCurrentWeekTimesheet:function(e,t,a){return j("emps/".concat(e,"/timesheets/"),t,a)},getTimesheetsByEmps:function(e,t){return E("/timesheets/getForEmps/".concat(e),t)},updateTimesheetById:function(e,t,a,r){return y("/emps/".concat(e,"/timesheets/").concat(a),t,r)}},N={getYearlyRate:function(e){return E("/yearlyRate",e)}},x={createWorkpackage:function(e,t){return j("/workpackages/createWP",t,e)},updateWorkpackage:function(e,t){return y("/workpackages",t,e)},getAllWorkpackageFromRE:function(e,t){return E("/workpackages/RE/".concat(e),t)}},C={createNewPlan:function(e,t){return j("/workpackageplans",t,e)}},D=a(52),T=a(138),I=a(54),P=a.n(I),A=a(423),L=a(7),H=a(351),R=a(367);function F(e){var t=Object(R.useSnackbar)().enqueueSnackbar,a=e.config,r=t(a.message,{variant:a.variant,autoHideDuration:2500});return n.a.createElement(n.a.Fragment,null,r)}function M(e){return n.a.createElement(R.SnackbarProvider,{preventDuplicate:!0},n.a.createElement(F,e))}var W=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleClick=function(){if(0==r.props.states.timesheets.length)r.createCurrentTimesheet();else if(r.hasCurrentTimesheet()){var e=r.props.states.timesheets[0][0],t=r.props.states.timesheets[0][1],a=r.props.states.timesheets[0][2];r.props.history.push("/dashboard/timesheet/".concat(e)),localStorage.setItem("timesheetId",e),localStorage.setItem("weekNumber",t),localStorage.setItem("weekEnding",a)}else r.createCurrentTimesheet()},r.state={errorAlert:!1},r.createCurrentTimesheet=r.createCurrentTimesheet.bind(Object(m.a)(r)),r.hasCurrentTimesheet=r.hasCurrentTimesheet.bind(Object(m.a)(r)),r.currentDate=r.currentDate.bind(Object(m.a)(r)),r.handleClick=r.handleClick.bind(Object(m.a)(r)),r.currentWeekNumber=r.currentWeekNumber.bind(Object(m.a)(r)),r.getFridayOfCurrentWeek=r.getFridayOfCurrentWeek.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"currentDate",value:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"getFridayOfCurrentWeek",value:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1),a=t.getDate()-t.getDay()-1+6;return new Date(e.setDate(a))}},{key:"currentWeekNumber",value:function(){var e=new Date,t=new Date(e.getFullYear(),0,1),a=(e.getTime()-t.getTime())/864e5;return Math.ceil((a+t.getDay()+1.1)/7)}},{key:"hasCurrentTimesheet",value:function(){var e=this.props.states.timesheets;return!(this.currentWeekNumber()-e[0][1]>0)}},{key:"createCurrentTimesheet",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,p=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),a=localStorage.getItem("token"),r=t.employee_id,e.prev=3,e.next=6,w.getCurrentUser(r,a);case 6:n=e.sent,e.next=14;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({errorAlert:!0}),setTimeout((function(){p.setState({errorAlert:!1})}),1e3),this.props.sessionLogoutHandler();case 14:return s=n.labor_grade_id.labor_grade_id,o=(new Date).getFullYear(),i=this.currentWeekNumber(),c=this.getFridayOfCurrentWeek(),u={labor_grade_id:s,year:o,week:i,week_ending:c,status:"OPEN",approver_id:3,approve_date:null,attribute1:null,details:[{project_code:" ",work_package_id:" ",saturday:0,sunday:0,monday:0,tuesday:0,wednesday:0,thursday:0,friday:0,notes:"",project_wp:"PJT38001_1L"}]},e.prev=19,e.next=22,S.createCurrentWeekTimesheet(r,a,u);case 22:e.sent,this.props.fetchTimesheets(),e.next=31;break;case 26:e.prev=26,e.t1=e.catch(19),this.setState({errorAlert:!0}),setTimeout((function(){p.setState({errorAlert:!1})}),1e3),this.props.sessionLogoutHandler();case 31:case"end":return e.stop()}}),e,this,[[3,9],[19,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,this.state.errorAlert?n.a.createElement(M,{config:{message:"Fetching Timesheets API Call Failed",variant:"error"}}):null,n.a.createElement(A.a,{title:"Create Current Timesheet"},n.a.createElement(H.a,{className:e.iconButton,onClick:this.handleClick,color:"primary",variant:"contained"},"Current Timesheet")))}}]),a}(n.a.Component),B=Object(L.a)({iconButton:{marginLeft:30}},{name:"CurrentTimesheetToolBar"})(W),U=(a(578),[{name:"timesheetid",label:"Timesheet ID",className:"column",options:{filter:!1}},{name:"weeknumber",label:"Week Number",className:"column",options:{filter:!1}},{name:"weekending",label:"Week Ending",className:"column",options:{sort:!0,filter:!1}},{name:"status",label:"Status",className:"column",options:{filter:!0}}]),V=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={timesheets:[],loadedUserID:{},errorAlert:!1},r.fetchTimesheets=r.fetchTimesheets.bind(Object(m.a)(r)),r.formatWeekEnding=r.formatWeekEnding.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchTimesheets(),this.formatWeekEnding()}},{key:"fetchTimesheets",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,p,m,h=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),a=localStorage.getItem("token"),r=t.employee_id,e.prev=3,e.next=6,S.getAllTimesheetsByEmp(r,a);case 6:if(0!=(n=e.sent).length){for(s=[],o=0;o<n.length;o++)i=n[o].timesheet_id,c=n[o].week,u=this.formatWeekEnding(n[o].week_ending),p=n[o].status,(m=[]).push(i),m.push(c),m.push(u),m.push(p),s.push(m);s.sort((function(e,t){return t[1]-e[1]})),this.setState({timesheets:s,loadedUserID:r})}e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({errorAlert:!0}),this.props.sessionLogoutHandler();case 14:setTimeout((function(){h.setState({errorAlert:!1})}),1e3);case 15:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"formatWeekEnding",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.state.errorAlert?n.a.createElement(M,{config:{message:"Fetching Timesheets API Call Failed",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("h1",null,"Timesheet"),options:(e=this.props,t=this.state,a=this.fetchTimesheets,{selectableRows:!1,search:!0,print:!1,download:!1,rowHover:!0,onRowClick:function(t){e.history.push("/dashboard/timesheet/".concat(t[0])),localStorage.setItem("timesheetId",t[0])},customToolbar:function(){return n.a.createElement(B,Object.assign({},e,{fetchTimesheets:a,states:t}))}}),columns:U,data:this.state.timesheets}));var e,t,a}}]),a}(r.Component),z=a(418),G=a(419),K=a(420),q=a(988),J=a(422),Y=a(421),Z=(a(579),a(358)),X=a.n(Z),Q=a(498),$=a.n(Q),ee=a(139),te=a(105),ae=a.n(te),re=a(425),ne=a(432),se=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).addRow=function(){var e=r.state.timesheetrows,t=[];t.push(""),t.push(""),t.push(""),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(""),t.push("PJT19257_2"),e.push(t),r.setState({timesheetrows:e})},r.deleteRow=function(e){var t=r.state.timesheetrows.filter((function(t,a){return a!==e})),a=r.totalHourWeek(t),n=[r.totalSat(t),r.totalSun(t),r.totalMon(t),r.totalTue(r.state.timesheetrows),r.totalWed(t),r.totalThu(t),r.totalFri(t)];r.setState({timesheetrows:t,totalWeek:a,totalDay:n})},r.gotoTimesheetDetail=function(){if(1==r.props.dashboardTimesheet&&0!=r.state.timesheetrows.length){var e=r.state.loadedTimesheet.timesheet_id;localStorage.setItem("timesheetId",e),r.props.history.push("/dashboard/timesheet/".concat(e))}},r.timesheetRow=function(e,t){return n.a.createElement(Y.a,{key:t},n.a.createElement(K.a,{scope:"row"},r.state.isEditable?r.state.projectCodes.length>0?n.a.createElement(ne.a,{select:!0,className:"projCode",id:"projCode"+t,value:e[1],onChange:function(a){return r.onProjCodeSelect(a,e,1,t)}},r.state.projectCodes.map((function(e,t){return n.a.createElement(re.a,{key:e,value:e},e)}))):"No Project":e[1]),n.a.createElement(K.a,{align:"right"},r.state.isEditable?r.state.projectCodes.length>0?n.a.createElement(ne.a,{select:!0,className:"wpId",id:"wpId"+t,value:e[2],onChange:function(a){return r.onWpIdSelect(a,e,2,t)}},r.state.wpIds.map((function(e,t){return n.a.createElement(re.a,{key:e,value:e},e)}))):"No WorkPackages":e[2]),n.a.createElement(K.a,{align:"right"},r.ccyFormat(e[3])),n.a.createElement(K.a,{align:"right"},r.state.isEditable?n.a.createElement(ae.a,{html:r.ccyFormat(e[4]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,4)}}):r.ccyFormat(e[4])),n.a.createElement(K.a,{align:"right"},r.state.isEditable?n.a.createElement(ae.a,{html:r.ccyFormat(e[5]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,5)}}):r.ccyFormat(e[5])),n.a.createElement(K.a,{align:"right"},r.state.isEditable?n.a.createElement(ae.a,{html:r.ccyFormat(e[6]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,6)}}):r.ccyFormat(e[6])),n.a.createElement(K.a,{align:"right"},r.state.isEditable?n.a.createElement(ae.a,{html:r.ccyFormat(e[7]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,7)}}):r.ccyFormat(e[7])),n.a.createElement(K.a,{align:"right"},r.state.isEditable?n.a.createElement(ae.a,{html:r.ccyFormat(e[8]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,8)}}):r.ccyFormat(e[8])),n.a.createElement(K.a,{align:"right"},r.state.isEditable?n.a.createElement(ae.a,{html:r.ccyFormat(e[9]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,9)}}):r.ccyFormat(e[9])),n.a.createElement(K.a,{align:"right"},r.state.isEditable?n.a.createElement(ae.a,{html:r.ccyFormat(e[10]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,10)}}):r.ccyFormat(e[10])),n.a.createElement(K.a,{align:"right"},r.state.isEditable?n.a.createElement(ae.a,{html:e[11],"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,11)}}):e[11]),r.state.isEditable?n.a.createElement(K.a,{align:"right"},n.a.createElement(X.a,{onClick:function(){r.deleteRow(t)}})):null)},r.state={timesheetrows:[],loadUser:{},totalWeek:{},totalDay:[],totalOver:{},totalOverDays:[],loadedTimesheet:{},isEditable:{},overtime:0,flextime:0,projectCodes:[],wpIds:[],errorAlert:!1,successAlert:!1,projWpDontMatch:!1},r.fetchTimesheetRows=r.fetchTimesheetRows.bind(Object(m.a)(r)),r.addRow=r.addRow.bind(Object(m.a)(r)),r.totalHourRow=r.totalHourRow.bind(Object(m.a)(r)),r.totalSat=r.totalSat.bind(Object(m.a)(r)),r.totalSun=r.totalSun.bind(Object(m.a)(r)),r.totalMon=r.totalMon.bind(Object(m.a)(r)),r.totalTue=r.totalTue.bind(Object(m.a)(r)),r.totalWed=r.totalWed.bind(Object(m.a)(r)),r.totalThu=r.totalThu.bind(Object(m.a)(r)),r.totalFri=r.totalFri.bind(Object(m.a)(r)),r.totalHourWeek=r.totalHourWeek.bind(Object(m.a)(r)),r.ccyFormat=r.ccyFormat.bind(Object(m.a)(r)),r.formatWeekEnding=r.formatWeekEnding.bind(Object(m.a)(r)),r.gotoTimesheetDetail=r.gotoTimesheetDetail.bind(Object(m.a)(r)),r.isEditable=r.isEditable.bind(Object(m.a)(r)),r.deleteRow=r.deleteRow.bind(Object(m.a)(r)),r.updateTS=r.updateTS.bind(Object(m.a)(r)),r.submitTS=r.submitTS.bind(Object(m.a)(r)),r.handleContentChange=r.handleContentChange.bind(Object(m.a)(r)),r.handleOverFlexTime=r.handleOverFlexTime.bind(Object(m.a)(r)),r.checkKey=r.checkKey.bind(Object(m.a)(r)),r.hasProject=r.hasProject.bind(Object(m.a)(r)),r.onProjCodeSelect=r.onProjCodeSelect.bind(Object(m.a)(r)),r.onWpIdSelect=r.onWpIdSelect.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchTimesheetRows()}},{key:"isEditable",value:function(){var e=!1;"OPEN"===this.state.loadedTimesheet.status&&void 0===this.props.dashboardTimesheet&&(e=!0),this.setState({isEditable:e})}},{key:"fetchTimesheetRows",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,p,m,h,d,g,f,b,v,E,j,y,k,O,N,x,C,D,T,I,P,A,L,H,R,F,M,W,B,U,V,z,G,K,q,J,Y,Z,X;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.props.dashboardTimesheet){e.next=9;break}n=JSON.parse(sessionStorage.getItem("user")),t=n.employee_id,a=localStorage.getItem("token"),r=localStorage.getItem("timesheetId"),this.setState({loadUser:n}),e.next=36;break;case 9:if(null==this.props.token){e.next=36;break}return t=this.props.userId,a=this.props.token,e.prev=12,e.next=15,_.getProjectsForUser(t,a);case 15:return s=e.sent,e.next=18,w.getCurrentUser(this.props.userId,this.props.token);case 18:o=e.sent,this.setState({loadUser:o}),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(12),console.log(this.props),this.props.sessionLogoutHandler();case 26:return e.prev=26,e.next=29,S.getAllTimesheetsByEmp(t,a);case 29:if(0!=(i=e.sent).length){for(c=[],u=0;u<i.length;u++)p=i[u].timesheet_id,m=i[u].week,h=this.formatWeekEnding(i[u].week_ending),d=i[u].status,g=null==i[u].attribute1?"0|0":i[u].attribute1,(f=[]).push(p),f.push(m),f.push(h),f.push(d),f.push(g),c.push(f);c.sort((function(e,t){return t[1]-e[1]})),r=c[0][0],this.props.fetchProject(s,o,c[0][4])}else this.props.fetchProject(s,o,"0|0");e.next=36;break;case 33:e.prev=33,e.t1=e.catch(26),this.props.sessionLogoutHandler();case 36:if(null==t||null==a||null==r){e.next=69;break}return e.next=39,S.getTimesheetById(t,a,r);case 39:if(b=e.sent,v=null==b.attribute1?"0|0":b.attribute1,E=v.split("|"),j=parseFloat(E[0]),y=parseFloat(E[1]),this.setState({loadedTimesheet:b,overtime:j,flextime:y}),this.isEditable(),0!=b.details.length){for(k=b.details,O=[],N=0;N<k.length;N++)x=k[N].timesheet_row_id,C=k[N].project_code,D=k[N].work_package_id,T=k[N].saturday,I=k[N].sunday,P=k[N].monday,A=k[N].tuesday,L=k[N].wednesday,H=k[N].thursday,R=k[N].friday,F=k[N].notes,M=k[N].project_wp,W=this.totalHourRow(T,I,P,A,L,H,R),(B=[]).push(x),B.push(C),B.push(D),B.push(W),B.push(T),B.push(I),B.push(P),B.push(A),B.push(L),B.push(H),B.push(R),B.push(F),B.push(M),O.push(B);this.setState({timesheetrows:O}),U=this.totalHourWeek(this.state.timesheetrows),V=[this.totalSat(this.state.timesheetrows),this.totalSun(this.state.timesheetrows),this.totalMon(this.state.timesheetrows),this.totalTue(this.state.timesheetrows),this.totalWed(this.state.timesheetrows),this.totalThu(this.state.timesheetrows),this.totalFri(this.state.timesheetrows)],this.setState({totalWeek:U,totalDay:V})}if(!this.state.isEditable){e.next=67;break}return e.next=50,_.getProjectsForUser(t,a);case 50:for(z=e.sent,G=[],K=0;K<z.length;K++)"OPEN"==z[K].status&&G.push(z[K].project_code);if(!(G.length>0)){e.next=67;break}this.setState({projectCodes:G}),q=[],J=[],Y=0;case 57:if(!(Y<G.length)){e.next=66;break}return e.next=60,_.getDetailsById(G[Y],a);case 60:for(Z=e.sent,X=0;X<Z.wpList.length;X++)1==Z.wpList[X].is_open&&"L"==Z.wpList[X].work_package_id.substring(Z.wpList[X].work_package_id.length-1)&&J.push(Z.wpList[X].work_package_id);J.length>0&&(q=J);case 63:Y++,e.next=57;break;case 66:this.setState({wpIds:q});case 67:e.next=70;break;case 69:document.getElementById("timesheetDetailContainer").innerHTML="Sorry, you don't have any timesheet records in the database!";case 70:case"end":return e.stop()}}),e,this,[[12,22],[26,33]])})));return function(){return e.apply(this,arguments)}}()},{key:"ccyFormat",value:function(e){return(Math.round(10*e)/10).toFixed(1)}},{key:"totalHourRow",value:function(e,t,a,r,n,s,o){return e+t+a+r+n+s+o}},{key:"totalSat",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][4];return t}},{key:"totalSun",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][5];return t}},{key:"totalMon",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][6];return t}},{key:"totalTue",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][7];return t}},{key:"totalWed",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][8];return t}},{key:"totalThu",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][9];return t}},{key:"totalFri",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][10];return t}},{key:"totalHourWeek",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][3];return t}},{key:"formatWeekEnding",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"updateTS",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,p,m,h,d,g,f,b,v,E,j,y,k=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],r=0;r<this.state.timesheetrows.length;r++)n=this.state.timesheetrows[r][0],s=this.state.timesheetrows[r][1],o=this.state.timesheetrows[r][2],i=this.state.timesheetrows[r][4],c=this.state.timesheetrows[r][5],u=this.state.timesheetrows[r][6],p=this.state.timesheetrows[r][7],m=this.state.timesheetrows[r][8],h=this.state.timesheetrows[r][9],d=this.state.timesheetrows[r][10],g=this.state.timesheetrows[r][11],a=""!=n?{timesheet_row_id:n,project_code:s,work_package_id:o,saturday:i,sunday:c,monday:u,tuesday:p,wednesday:m,thursday:h,friday:d,notes:g,project_wp:s+"_"+o}:{project_code:s,work_package_id:o,saturday:i,sunday:c,monday:u,tuesday:p,wednesday:m,thursday:h,friday:d,notes:g,project_wp:s+"_"+o},t.push(a);return f=this.state.overtime+"|"+this.state.flextime,b={timesheet_id:this.state.loadedTimesheet.timesheet_id,labor_grade_id:this.state.loadedTimesheet.labor_grade_id,year:this.state.loadedTimesheet.year,week:this.state.loadedTimesheet.week,week_ending:this.state.loadedTimesheet.week_ending,status:"OPEN",approver_id:this.state.loadedTimesheet.approver_id,approve_date:this.state.loadedTimesheet.approve_date,attribute1:f,details:t},v=this.state.loadUser.employee_id,E=localStorage.getItem("token"),j=this.state.loadedTimesheet.timesheet_id,e.prev=7,e.next=10,S.updateTimesheetById(v,E,j,b);case 10:"exception throw"!=(y=e.sent)&&this.setState({successAlert:!0}),"exception throw"==y&&this.setState({projWpDontMatch:!0}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),this.setState({errorAlert:!0}),this.props.sessionLogoutHandler();case 19:setTimeout((function(){k.setState({successAlert:!1,errorAlert:!1,projWpDontMatch:!1})}),2e3);case 20:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"submitTS",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,p,m,h,d,g,f,b,v,E,j,y,k=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],r=0;r<this.state.timesheetrows.length;r++)n=this.state.timesheetrows[r][0],s=this.state.timesheetrows[r][1],o=this.state.timesheetrows[r][2],i=this.state.timesheetrows[r][4],c=this.state.timesheetrows[r][5],u=this.state.timesheetrows[r][6],p=this.state.timesheetrows[r][7],m=this.state.timesheetrows[r][8],h=this.state.timesheetrows[r][9],d=this.state.timesheetrows[r][10],g=this.state.timesheetrows[r][11],a=""!=n?{timesheet_row_id:n,project_code:s,work_package_id:o,saturday:i,sunday:c,monday:u,tuesday:p,wednesday:m,thursday:h,friday:d,notes:g,project_wp:s+"_"+o}:{project_code:s,work_package_id:o,saturday:i,sunday:c,monday:u,tuesday:p,wednesday:m,thursday:h,friday:d,notes:g,project_wp:s+"_"+o},t.push(a);return f=this.state.overtime+"|"+this.state.flextime,b={timesheet_id:this.state.loadedTimesheet.timesheet_id,labor_grade_id:this.state.loadedTimesheet.labor_grade_id,year:this.state.loadedTimesheet.year,week:this.state.loadedTimesheet.week,week_ending:this.state.loadedTimesheet.week_ending,status:"CLOSE",approver_id:this.state.loadedTimesheet.approver_id,approve_date:this.state.loadedTimesheet.approve_date,attribute1:f,details:t},v=this.state.loadUser.employee_id,E=localStorage.getItem("token"),j=this.state.loadedTimesheet.timesheet_id,e.prev=7,e.next=10,S.updateTimesheetById(v,E,j,b);case 10:"exception throw"!=(y=e.sent)&&(this.fetchTimesheetRows(),this.setState({successAlert:!0}),setTimeout((function(){k.setState({successAlert:!1,errorAlert:!1,projWpDontMatch:!1}),k.props.history.push("/dashboard/timesheet/")}),1500)),"exception throw"==y&&this.setState({projWpDontMatch:!0}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),this.setState({errorAlert:!0}),this.props.sessionLogoutHandler();case 19:setTimeout((function(){k.setState({successAlert:!1,errorAlert:!1,projWpDontMatch:!1})}),2e3);case 20:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleContentChange",value:function(e,t,a,r){if(r>3&&r<11){t[r]=parseFloat(this.ccyFormat(e.target.value)),t[3]=t[4]+t[5]+t[6]+t[7]+t[8]+t[9]+t[10];var n=this.totalHourWeek(this.state.timesheetrows),s=[this.totalSat(this.state.timesheetrows),this.totalSun(this.state.timesheetrows),this.totalMon(this.state.timesheetrows),this.totalTue(this.state.timesheetrows),this.totalWed(this.state.timesheetrows),this.totalThu(this.state.timesheetrows),this.totalFri(this.state.timesheetrows)];this.setState({totalWeek:n,totalDay:s})}else t[r]=e.target.value}},{key:"checkKey",value:function(e){13===e.keyCode&&e.preventDefault()}},{key:"hasProject",value:function(){return this.state.projectCodes.length>0}},{key:"onProjCodeSelect",value:function(e,t,a,r){t[a]=e.target.value,this.setState({})}},{key:"onWpIdSelect",value:function(e,t,a,r){t[a]=e.target.value,this.setState({})}},{key:"handleOverFlexTime",value:function(e,t){"over"==t&&this.setState({overtime:e.target.value}),"flex"==t&&this.setState({flextime:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(ee.a,{elevation:2,className:"container",onClick:function(){e.gotoTimesheetDetail()}},this.state.projWpDontMatch?n.a.createElement(M,{config:{message:"Project and WP Don't Match. Please Check Again!",variant:"Warning"}}):null,this.state.errorAlert?n.a.createElement(M,{config:{message:"Failed",variant:"error"}}):null,this.state.successAlert?n.a.createElement(M,{config:{message:"Successful!",variant:"success"}}):null,n.a.createElement("div",{className:"timesheetTitle"},n.a.createElement("div",{className:"attributeRow"},n.a.createElement("div",{className:"empNumContainer"},n.a.createElement("div",{className:"empNumTitle"},"Employee Number:"),n.a.createElement("div",{className:"empNum"},this.state.loadUser.employee_id)),n.a.createElement("div",{className:"weekNumContainer"},n.a.createElement("div",{className:"weekNumTitle"},"Week Number:"),n.a.createElement("div",{className:"weekNum"},this.state.loadedTimesheet.week)),n.a.createElement("div",{className:"weekEndContainer"},n.a.createElement("div",{className:"weekEndTitle"},"Week Ending:"),n.a.createElement("div",{className:"weekEnd"},this.formatWeekEnding(this.state.loadedTimesheet.week_ending))),this.state.isEditable?n.a.createElement($.a,{fontSize:"large",onClick:this.addRow,color:"primary",variant:"contained"}):null),this.props.dashboardTimesheet?null:n.a.createElement("div",{className:"empNameAttribute"},n.a.createElement("div",{className:"empNameTitle"},"Name:"),n.a.createElement("div",{className:"empName"},this.state.loadUser.first_name," ",this.state.loadUser.last_name))),n.a.createElement(q.a,{className:t.timesheetTable},n.a.createElement(z.a,{className:t.table,"aria-label":"simple table"},n.a.createElement(J.a,null,n.a.createElement(Y.a,null,n.a.createElement(K.a,{id:"proj",className:t.tableTitle},"Project"),n.a.createElement(K.a,{id:"wp",align:"right",className:t.tableTitle},"WP"),n.a.createElement(K.a,{id:"tol",align:"right",className:t.tableTitle},"Total"),n.a.createElement(K.a,{id:"sat",align:"right",className:t.tableTitle},"Sat"),n.a.createElement(K.a,{id:"sun",align:"right",className:t.tableTitle},"Sun"),n.a.createElement(K.a,{id:"mon",align:"right",className:t.tableTitle},"Mon"),n.a.createElement(K.a,{id:"tue",align:"right",className:t.tableTitle},"Tue"),n.a.createElement(K.a,{id:"wed",align:"right",className:t.tableTitle},"Wed"),n.a.createElement(K.a,{id:"thu",align:"right",className:t.tableTitle},"Thu"),n.a.createElement(K.a,{id:"fri",align:"right",className:t.tableTitle},"Fri"),n.a.createElement(K.a,{id:"notes",align:"right",className:t.tableTitle},"Notes"))),n.a.createElement(G.a,null,this.state.timesheetrows.map((function(t,a){return e.timesheetRow(t,a)})),n.a.createElement(Y.a,null,n.a.createElement(K.a,{className:t.tableTitle},"Total"),n.a.createElement(K.a,{colSpan:2,align:"right"},this.ccyFormat(this.state.totalWeek)),n.a.createElement(K.a,{align:"right"},this.ccyFormat(this.state.totalDay[0])),n.a.createElement(K.a,{align:"right"},this.ccyFormat(this.state.totalDay[1])),n.a.createElement(K.a,{align:"right"},this.ccyFormat(this.state.totalDay[2])),n.a.createElement(K.a,{align:"right"},this.ccyFormat(this.state.totalDay[3])),n.a.createElement(K.a,{align:"right"},this.ccyFormat(this.state.totalDay[4])),n.a.createElement(K.a,{align:"right"},this.ccyFormat(this.state.totalDay[5])),n.a.createElement(K.a,{align:"right"},this.ccyFormat(this.state.totalDay[6]))),n.a.createElement(Y.a,null,n.a.createElement(K.a,{colSpan:2,className:t.tableTitle},"Overtime"),n.a.createElement(K.a,{align:"right"},this.state.isEditable?n.a.createElement(ae.a,{html:this.ccyFormat(this.state.overtime),"data-column":"item",className:"content-editable",onKeyDown:this.checkKey,onChange:function(t){return e.handleOverFlexTime(t,"over")}}):this.ccyFormat(this.state.overtime))),n.a.createElement(Y.a,null,n.a.createElement(K.a,{colSpan:2,className:t.tableTitle},"Flextime"),n.a.createElement(K.a,{align:"right"},this.state.isEditable?n.a.createElement(ae.a,{html:this.ccyFormat(this.state.flextime),"data-column":"item",className:"content-editable",onKeyDown:this.checkKey,onChange:function(t){return e.handleOverFlexTime(t,"flex")}}):this.ccyFormat(this.state.flextime)))))),this.state.isEditable&&this.hasProject()?n.a.createElement("div",{className:t.updateSubmitButton},n.a.createElement(H.a,{onClick:this.updateTS,color:"primary",variant:"contained"},"Update"),n.a.createElement(H.a,{className:t.submitButton,onClick:this.submitTS,color:"secondary",variant:"contained"},"Submit")):null)}}]),a}(r.Component),oe=Object(L.a)((function(e){return{table:{width:"93%"},timesheetTable:{width:"100%",maxHeight:"420px",display:"flex",justifyContent:"center"},tableTitle:{fontWeight:"bold",fontSize:"10pt !important"},updateSubmitButton:{position:"absolute",margin:"0 0 0 780px"},submitButton:{marginLeft:25}}}),{withTheme:!0})(se),ie=a(37),le=a(497),ce=a(499),ue=a.n(ce);function pe(e){var t=n.a.useState(null),a=Object(ie.a)(t,2),r=a[0],s=a[1],o=function(){s(null)};return n.a.createElement("div",null,n.a.createElement(ue.a,{onClick:function(e){s(e.currentTarget)},"aria-controls":"simple-menu","aria-haspopup":"true"}),n.a.createElement(le.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:o},n.a.createElement(D.b,{to:e.link,style:{textDecoration:"none",color:"black"}},n.a.createElement(re.a,null," Edit ")," "),null==e.employee.end_date?n.a.createElement(re.a,{onClick:function(){e.handleArchive(e.id,e.employee),o()}},"Archive"):n.a.createElement(re.a,{onClick:function(){e.handleOpen(e.id,e.employee),o()}},"Open")))}var me=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{title:"Add an Employee"},n.a.createElement(H.a,{className:e.iconButton,onClick:this.props.handleCreate,color:"primary",variant:"contained"},"Create")))}}]),a}(n.a.Component),he=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(me),de=a(972),ge=a(70),fe=a.n(ge),be=a(994),ve=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"face",value:function(e){return n.a.createElement("div",null,n.a.createElement(be.a,{className:e.avatar,alt:"employee photo"},n.a.createElement(fe.a,{onClick:this.props.handleClick,className:e.faceIcon})))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.avatar;return this.face(t,a)}}]),a}(r.Component),Ee=Object(L.a)((function(){return{faceIcon:{width:"100%",height:"100%"}}}),{withTheme:!0})(ve),je={NAVBAR_EXPANDED_WIDTH:230,NAVBAR_SHRINKED_WIDTH:100,DRAWER_EXPANDED_WIDTH:230,DRAWER_SHRINKED_WIDTH:100},ye={OK:200,UNAUTHORIZED:401,NOT_FOUND:404,INTERNAL_SERVER_ERROR:500,SERVICE_UNAVAILABLE:503,BAD_REQUEST:400};a(433);var ke=[{name:"photo",label:"Photo",className:"column"},{name:"employeeId",label:"ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"},{name:"startDate",label:"Start Date",className:"column"},{name:"endDate",label:"End Date",className:"column"},{name:"laborGrade",label:"Labor Grade",className:"column"},{name:"vacation",label:"Vacation Days",className:"column"},{name:"supervisor",label:"Supervisor",className:"column"},{name:"edit",label:"Edit",className:"column"}],we=function(e,t){var a=e.history;return{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,customToolbar:function(){return n.a.createElement(he,{history:a,handleCreate:t})},textLabels:{body:{noMatch:n.a.createElement(de.a,null)}}}},Oe=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleCreate=function(){r.props.history.push("/dashboard/hr/create")},r.handleArchive=function(){var e=Object(c.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(new Date).getTime(),a.end_date=n,e.next=5,w.updateEmployee(t,r.state.token,a);case 5:r.fetchData(r.state.token),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response.status===ye.UNAUTHORIZED&&r.props.sessionLogoutHandler();case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),r.handleOpen=function(){var e=Object(c.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.end_date=null,e.next=4,w.updateEmployee(t,r.state.token,a);case 4:r.fetchData(r.state.token),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response.status===ye.UNAUTHORIZED&&r.props.sessionLogoutHandler();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),r.state={data:[],token:null},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r.handleCreate=r.handleCreate.bind(Object(m.a)(r)),r.handleArchive=r.handleArchive.bind(Object(m.a)(r)),r.handleOpen=r.handleOpen.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.setState({token:e}),this.fetchData(e)}},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getAllEmployees(t);case 3:a=e.sent,r=[],a.forEach(function(){var e=Object(c.a)(l.a.mark((function e(t){var a,o,i,c,u,p,m,h,d,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.employee_id,o=t.first_name,i=t.last_name,c=new Date(t.start_date).toString("MMM dd"),u=t.end_date,p=t.labor_grade_id.labor_grade_id,m=t.vacation,h=t.supervisor_id,d=null==u?n.a.createElement("p",{style:{color:"green"}}," Currently Employed "):n.a.createElement("p",{style:{color:"red"}}," Archived "),(g=[]).push(n.a.createElement(Ee,{avatar:{width:25,height:25,margin:"0 auto"}})),g.push(a),g.push(o),g.push(i),g.push(c),g.push(d),g.push(p),g.push(m),g.push(h),g.push(n.a.createElement(pe,{link:"/dashboard/hr/".concat(a),id:a,employee:t,handleArchive:s.handleArchive,handleOpen:s.handleOpen})),r.push(g);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({data:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response.status===ye.UNAUTHORIZED&&this.props.sessionLogoutHandler();case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("h1",null," Manage Employees"),options:we(this.props,this.handleCreate),columns:ke,data:this.state.data}))}}]),a}(r.Component),_e=Object(L.a)((function(){return{pictureUrl:{width:50}}}),{withTheme:!0})(Oe),Se=a(27),Ne=(a(751),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={employee_id:null,password:""},r.updateInputValue=r.updateInputValue.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"updateInputValue",value:function(e){e.preventDefault(),this.setState(Object(Se.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return n.a.createElement(ee.a,{className:"loginWrapper",elevation:2},n.a.createElement("p",{className:"prjMng"},"Timely"),n.a.createElement("div",{className:"loginContainer"},n.a.createElement("div",{className:"loginHint"},"Login"),n.a.createElement("form",{className:"loginForm",onSubmit:function(t){return e.props.loginHandler(t,{id:e.state.employee_id,password:e.state.password})}},n.a.createElement("div",{className:"loginEmail"},n.a.createElement("input",{className:"loginInputs",name:"employee_id",placeholder:"Employee Id",required:!0,autoFocus:!0,onChange:this.updateInputValue})),n.a.createElement("div",{className:"loginPwd"},n.a.createElement("input",{className:"loginInputs",type:"password",name:"password",placeholder:"Password",required:!0,onChange:this.updateInputValue})),n.a.createElement("div",{className:"loginBsection"},n.a.createElement("button",{className:"loginBtn",type:"submit"}," Login ")))))}}]),a}(r.Component)),xe=a(970),Ce=a(426),De=a(270),Te=a(104),Ie=a(501),Pe=a.n(Ie),Ae=a(978);function Le(e){var t=n.a.useState(null),a=Object(ie.a)(t,2),r=a[0],s=a[1],o=function(){s(null)};return n.a.createElement("div",null,n.a.createElement(Ee,{handleClick:function(e){s(e.currentTarget)},avatar:{width:30,height:30,margin:"0 auto"}}),n.a.createElement(le.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:o},n.a.createElement(D.b,{to:"/dashboard/profile/".concat(e.loadedUser.employee_id),style:{textDecoration:"none",color:"black"}},n.a.createElement(re.a,{onClick:o}," Profile ")),n.a.createElement(D.b,{to:"/",style:{textDecoration:"none",color:"black"}},n.a.createElement(re.a,{onClick:e.logoutHandler}," Logout ")," ")))}var He=a(3),Re=a(357),Fe=a.n(Re),Me=a(20),We=a(520),Be=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",{className:e.search},n.a.createElement("div",{className:e.searchIcon},n.a.createElement(Fe.a,null)),n.a.createElement(We.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}}))}}]),a}(r.Component),Ue=Object(L.a)((function(e){return{search:Object(Se.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Me.d)(e.palette.common.black,.15),"&:hover":{backgroundColor:Object(Me.d)(e.palette.common.black,.15)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"black"},inputRoot:{color:"black"},inputInput:Object(Se.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}),{withTheme:!0})(Be),Ve=a(502),ze=a.n(Ve),Ge=a(993),Ke=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.location,a=e.loadedUser,r=t.pathname.split("/"),s=[],o="";return r.splice(0,1),r.forEach((function(e,t){o+="/"+e,s.push(o)})),n.a.createElement("div",null,n.a.createElement(Ge.a,null,s.map((function(e,t){return n.a.createElement("div",{key:t},s.length-1===t?n.a.createElement(D.b,{style:{textDecoration:"none"},key:t,to:e},n.a.createElement(Te.a,{color:"textPrimary"}," ",e.split("/")[t+1]," ")):n.a.createElement(D.b,{key:t,to:"".concat(e,"/").concat(a.employee_id)}," ",e.split("/")[t+1]," "))}))))}}]),a}(r.Component),qe=Object(T.g)(Ke),Je=je.NAVBAR_EXPANDED_WIDTH,Ye=je.NAVBAR_SHRINKED_WIDTH,Ze=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"resizeNavbar",value:function(e){return n.a.createElement("div",{className:e.root},n.a.createElement(xe.a,{position:"fixed",elevation:0,className:Object(He.a)(e.appBar,Object(Se.a)({},e.appBarShift,this.props.resize))},n.a.createElement(Ce.a,null,n.a.createElement(De.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"open drawer",onClick:this.props.resizeDashboard},this.props.resize?n.a.createElement(Pe.a,null):n.a.createElement(ze.a,null)),n.a.createElement(Te.a,{className:e.title,variant:"h6",noWrap:!0},n.a.createElement(qe,this.props)),n.a.createElement(Ue,null),n.a.createElement(Ae.a,{className:e.divider,orientation:"vertical",flexItem:!0}),n.a.createElement("h4",{className:e.userName}," ",this.props.loadedUser.first_name," ",this.props.loadedUser.last_name),n.a.createElement(Le,{logoutHandler:this.props.logoutHandler,loadedUser:this.props.loadedUser}))))}},{key:"render",value:function(){var e=this.props.classes;return this.resizeNavbar(e)}}]),a}(r.Component),Xe=Object(L.a)((function(e){var t;return{root:{},menuButton:{marginRight:e.spacing(2),color:"black"},title:(t={flexGrow:1,display:"none"},Object(Se.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(Se.a)(t,"color","black"),t),userName:{color:"black",paddingRight:e.spacing(3)},divider:{marginRight:e.spacing(3),marginLeft:e.spacing(3)},appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"#fafafa",position:"fixed",width:"calc(100% - ".concat(Ye,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:Je,backgroundColor:"#fafafa",width:"calc(100% - ".concat(Je,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}}}),{withTheme:!0})(Ze),Qe=a(973),$e=a(97),et=a(981),tt=a(359),at=a.n(tt),rt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(D.b,{className:e.link,to:this.props.link},n.a.createElement(et.a,{container:!0,direction:"row",alignItems:"center",className:e.menuItem},n.a.createElement(et.a,{item:!0},this.props.isMenuLogo?n.a.createElement(be.a,{variant:"circle",className:e.avatar,src:at.a}):n.a.createElement(be.a,{variant:"square",className:e.avatar})),n.a.createElement(et.a,{item:!0,onClick:this.props.handleClick},this.props.text&&this.props.resize?n.a.createElement("p",{className:e.text}," ",this.props.text," "):null)))}}]),a}(r.Component),nt=Object(L.a)((function(e){return{menuItem:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(1)},text:{marginLeft:30,color:"black"},link:{textDecoration:"none"}}}),{withTheme:!0})(rt),st=a(995),ot=a(979),it=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(D.b,{className:e.link,to:this.props.link},n.a.createElement(ot.a,{className:e.expansionPanelDetails},n.a.createElement(et.a,{container:!0,direction:"row",alignItems:"center"},n.a.createElement(et.a,{item:!0},n.a.createElement(be.a,{variant:"circle",className:e.avatar})),n.a.createElement(et.a,{item:!0},this.props.resize?n.a.createElement("p",{className:e.text},this.props.text):null))))}}]),a}(r.Component),lt=Object(L.a)((function(){return{expansionPanelDetails:{},text:{marginLeft:30,color:"black"},link:{textDecoration:"none"}}}),{withTheme:!0})(it),ct=a(980),ut=a(277),pt=a.n(ut),mt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(ct.a,{expandIcon:this.props.resize?n.a.createElement(pt.a,{className:e.materialIconLight}):null,"aria-controls":"panel1a-content",id:"panel1a-header"},n.a.createElement(et.a,{container:!0,direction:"row",alignItems:"center"},n.a.createElement(et.a,{item:!0},n.a.createElement(Ee,{avatar:{width:30,height:30,margin:"0 auto"}})),n.a.createElement(et.a,{item:!0},this.props.resize?n.a.createElement("h4",{className:e.text}," ",this.props.loadedUser.first_name+" "+this.props.loadedUser.last_name," "):null)))}}]),a}(r.Component),ht=Object(L.a)((function(){return{text:{marginLeft:30,color:"black"}}}),{withTheme:!0})(mt),dt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return n.a.createElement(st.a,{elevation:0},console.log(this.props),n.a.createElement(ht,{loadedUser:this.props.loadedUser,resize:this.props.resize}),n.a.createElement(lt,{text:"Lead Engineer",resize:this.props.resize,link:"/dashboard/lead"}),this.props.loadedUser.is_hr_staff?n.a.createElement(lt,{text:"HR",resize:this.props.resize,link:"/dashboard/hr"}):null,"true"==sessionStorage.is_supervisor?n.a.createElement(lt,{text:"Supervisor",resize:this.props.resize,link:"/dashboard/supervisor"}):null,"true"==sessionStorage.is_supervisor||this.props.loadedUser.is_secondary_approver||this.props.loadedUser.is_super_timesheet_approver?n.a.createElement(lt,{text:"Timesheet Approver",resize:this.props.resize,link:"/dashboard/tsapprover"}):null)}}]),a}(r.Component),gt=Object(L.a)((function(e){return{}}),{withTheme:!0})(dt),ft=je.DRAWER_EXPANDED_WIDTH,bt=je.DRAWER_SHRINKED_WIDTH,vt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e,t,a=this.props,r=a.classes,s=a.loadedUser;return n.a.createElement("div",{className:r.root},n.a.createElement(Qe.a,null),n.a.createElement($e.a,{variant:"permanent",open:!0,className:Object(He.a)(r.drawer,(e={},Object(Se.a)(e,r.drawerOpen,this.props.resize),Object(Se.a)(e,r.drawerClose,!this.props.resize),e)),classes:{paper:Object(He.a)((t={},Object(Se.a)(t,r.drawerOpen,this.props.resize),Object(Se.a)(t,r.drawerClose,!this.props.resize),t))}},n.a.createElement(nt,{isMenuLogo:!0,link:"/dashboard/".concat(s.employee_id)}),n.a.createElement(Ae.a,{className:r.divider}),n.a.createElement(gt,{loadedUser:this.props.loadedUser,resize:this.props.resize}),n.a.createElement(Ae.a,{className:r.divider}),n.a.createElement("div",null,n.a.createElement(nt,{text:"Dashboard",resize:this.props.resize,link:"/dashboard/".concat(s.employee_id)}),n.a.createElement(nt,{text:"Timesheet",resize:this.props.resize,link:"/dashboard/timesheet"}),n.a.createElement(nt,{text:"Projects",resize:this.props.resize,link:"/dashboard/projects"}))))}}]),a}(r.Component),Et=Object(L.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar,paper:{width:ft,height:"100%"},divider:{backgroundColor:"light gray",width:"90%",margin:"0 auto"},drawerOpen:{width:ft,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{width:bt,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})}}}),{withTheme:!0})(vt),jt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("main",{className:e.content},n.a.createElement("div",{className:e.toolbar}),this.props.routes)}}]),a}(r.Component),yt=Object(L.a)((function(e){return{root:{display:"flex"},content:{flexGrow:10,padding:e.spacing(5)},toolbar:e.mixins.toolbar}}),{withTheme:!0})(jt),kt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={loaded_user:{},resize:!0,breadCrumbs:r.props.location},r.resizeDashboard=r.resizeDashboard.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"resizeDashboard",value:function(){this.setState({resize:!this.state.resize})}},{key:"render",value:function(){var e,t=this,a=this.props.classes,r=n.a.createElement(Sr,Object.assign({},this.props,{config:(e="dashboard",{option:e,loadedUser:t.props.loadedUser,logoutHandler:t.props.logoutHandler,sessionLogoutHandler:t.props.sessionLogoutHandler}),logoutHandler:this.props.logoutHandler,sessionLogoutHandler:this.props.sessionLogoutHandler,token:this.props.token}));return n.a.createElement(D.a,null,n.a.createElement("div",{className:a.root},n.a.createElement(Xe,Object.assign({},this.props.location,{loadedUser:this.props.loadedUser,resizeDashboard:this.resizeDashboard,resize:this.state.resize,logoutHandler:this.props.logoutHandler})),n.a.createElement(Et,{loadedUser:this.props.loadedUser,resizeDashboard:this.resizeDashboard,resize:this.state.resize}),n.a.createElement(yt,{routes:r})))}}]),a}(r.Component),wt=Object(L.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar}}),{withTheme:!0})(kt),Ot=a(971),_t=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleClick=function(){console.log("click!",r.props.selectedRows)},r.state={type:e.type},r.handleClick=r.handleClick.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"render",value:function(){return n.a.createElement("div",null,"Mine"===this.state.type&&n.a.createElement(Ot.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},n.a.createElement(H.a,{onClick:this.handleClick},"Archive"),n.a.createElement(H.a,null,"Close")),"Archived"===this.state.type&&n.a.createElement(Ot.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},n.a.createElement(H.a,null,"Open"),n.a.createElement(H.a,null,"Close")),"Closed"===this.state.type&&n.a.createElement(Ot.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},n.a.createElement(H.a,null,"Archive"),n.a.createElement(H.a,null,"Open")))}}]),a}(n.a.Component),St=(a(752),["ID","Name","Manager"]),Nt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[],type:""},r.options={print:!1,responsive:"scroll",selectableRows:!0,customToolbarSelect:function(e){return n.a.createElement(_t,{selectedRows:e,type:r.state.type})},onRowClick:function(e,t){r.props.history.push({pathname:"/projectDetails",state:{projectID:e[0]}})}},r}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data,type:e.type})}},{key:"render",value:function(){return n.a.createElement(P.a,{className:"projects",title:"Projects",columns:St,options:this.options,data:this.state.data})}}]),a}(n.a.Component),xt=(a(753),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[],allProj:[],mineProj:[],archivedProj:[],closedProj:[],type:"All"},r.setData=r.setData.bind(Object(m.a)(r)),r.allProjects=r.allProjects.bind(Object(m.a)(r)),r.mineProjects=r.mineProjects.bind(Object(m.a)(r)),r.archivedProjects=r.archivedProjects.bind(Object(m.a)(r)),r.closedProjects=r.closedProjects.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setData();case 2:this.allProjects();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"allProjects",value:function(){this.setState({data:this.state.allProj,type:"All"})}},{key:"mineProjects",value:function(){this.setState({data:this.state.mineProj,type:"Mine"})}},{key:"archivedProjects",value:function(){this.setState({data:this.state.archivedProj,type:"Archived"})}},{key:"closedProjects",value:function(){this.setState({data:this.state.closedProj,type:"Closed"})}},{key:"setData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,p,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),a=localStorage.getItem("token"),r=t.employee_id,console.log(t),e.next=6,_.getProjectsForUser(r,a);case 6:for(n=e.sent,console.log(n),s=[],o=[],i=[],c=[],u=[],p=0;p<n.length;p++)s=[],console.log(n[p]),s.push(n[p].project_code),s.push(n[p].project_name),m=n[p].project_manager_id.first_name+" "+n[p].project_manager_id.last_name,s.push(m),n[p].project_manager_id.employee_id===parseInt(r)&&i.push(s),"COMPLETE"===n[p].status&&u.push(s),"ARCHIVED"===n[p].status&&c.push(s),o.push(s);this.setState({allProj:o,mineProj:i,closedProj:u,archivedProj:c});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(et.a,{justify:"space-between",container:!0,spacing:1,className:"btnProjects"},n.a.createElement(et.a,{item:!0},n.a.createElement(Ot.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},n.a.createElement(H.a,{onClick:this.allProjects},"All"),n.a.createElement(H.a,{onClick:this.mineProjects},"Mine"),n.a.createElement(H.a,{onClick:this.archivedProjects},"Archived"),n.a.createElement(H.a,{onClick:this.closedProjects},"Closed"))),n.a.createElement(et.a,{item:!0},n.a.createElement(H.a,{variant:"contained",color:"secondary",component:D.b,to:"/createProject"},"+ Create"))),n.a.createElement(Nt,{data:this.state.data,type:this.state.type,history:this.props.history}))}}]),a}(n.a.Component)),Ct=a(53),Dt=a(417),Tt=a(986),It=a(984),Pt=a(985),At=a(34),Lt=(a(438),Object(Dt.a)((function(e){return{projInfo:{width:"280px"}}}))),Ht=function(e){var t,a,r,s=Lt();return n.a.createElement("form",null,n.a.createElement(At.TextValidator,(t={component:"span",className:"margin",label:"Project ID",name:"projectID",value:e.projectID,onChange:e.handleChange},Object(Se.a)(t,"className",s.projInfo),Object(Se.a)(t,"validators",["isRequired"]),Object(Se.a)(t,"errorMessages",["Input is required."]),t)),n.a.createElement("br",null),n.a.createElement(At.TextValidator,(a={component:"span",className:"margin",label:"Project Name",name:"projectName",value:e.projectName,onChange:e.handleChange},Object(Se.a)(a,"className",s.projInfo),Object(Se.a)(a,"validators",["isRequired"]),Object(Se.a)(a,"errorMessages",["Input is required."]),a)),n.a.createElement("br",null),n.a.createElement(At.TextValidator,(r={component:"span",className:"margin",label:"Project Manager",name:"projectManager",value:e.projectManager,onChange:e.handleChange},Object(Se.a)(r,"className",s.projInfo),Object(Se.a)(r,"validators",["isRequired"]),Object(Se.a)(r,"errorMessages",["Input is required."]),r)),n.a.createElement("br",null))},Rt=(a(317),function(e){var t={projDesc:{width:"310px"}};return n.a.createElement("form",{autoComplete:"off"},n.a.createElement(At.TextValidator,{className:t.projDesc,id:"outlined-multiline-static",label:"Project Description",multiline:!0,rows:"8",variant:"outlined",name:"Desc",value:e.Desc,onChange:e.handleChange,validators:["isRequired"],errorMessages:["Input is required."]}))}),Ft=function(e){var t,a={budgetInfo:{width:"280px"}};return n.a.createElement("form",{autoComplete:"off"},n.a.createElement(At.TextValidator,(t={component:"span",className:"margin",id:"standard-basic",label:"Cost",value:e.cost,name:"cost",onChange:e.handleChange,disabled:e.isDisabled},Object(Se.a)(t,"className",a.budgetInfo),Object(Se.a)(t,"validators",["isRequired"]),Object(Se.a)(t,"errorMessages",["Input is required."]),t)))},Mt=a(517),Wt=a(75),Bt=a(991),Ut=Object(Dt.a)((function(e){return{scheduleInfo:{width:"280px"}}})),Vt=function(e){var t=Ut(),a=Object(r.useState)({}),s=Object(ie.a)(a,2),o=(s[0],s[1],Object(r.useState)({})),i=Object(ie.a)(o,2);i[0],i[1];return n.a.createElement("form",{autoComplete:"off"},n.a.createElement(Wt.a,{utils:Mt.a},n.a.createElement(Bt.a,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",margin:"normal",label:"Start Date",name:"startDate",value:e.startDate,onChange:e.handleStartChange,className:t.scheduleInfo,disabled:e.isDisabled}),n.a.createElement("br",null),n.a.createElement(Bt.a,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",margin:"normal",label:"End Date",name:"endDate",value:e.endDate,onChange:e.handleEndChange,className:t.scheduleInfo,disabled:e.isDisabled})))},zt=Object(Dt.a)((function(e){return{root:{width:"1100px"},stepper:{padding:"40px 0",border:"1px solid lightgray"},backButton:{margin:"0 7px 0 0"},nextButton:{margin:"0 0 0 7px"},instructionsContainer:{display:"flex",justifyContent:"center",padding:"25px 0"},instructions:{backgroundColor:"white",width:"400px",display:"flex",justifyContent:"center",alignItems:"center",height:"280px",padding:"0 0 10px 0",borderTop:"3px solid lightgray"},backNextButtonContainer:{display:"flex",justifyContent:"center",margin:"20px 0 0 0"},endMessage:{display:"flex",flexDirection:"column"},createProjAgain:{margin:"15px 0",padding:"15px"}}}));function Gt(){var e=zt(),t=JSON.parse(sessionStorage.getItem("user")),a=Object(r.useState)({projectID:"",projectName:"",projectManager:t.first_name+" "+t.last_name,Desc:"",startDate:new Date,endDate:new Date,cost:""}),s=Object(ie.a)(a,2),o=s[0],i=s[1];Object(r.useEffect)((function(){At.ValidatorForm.addValidationRule("isRequired",(function(e){return 0===e.length?(console.log(m),h(!1),!1):(h(!0),!0)}))}),[]);var u=Object(r.useState)(!1),p=Object(ie.a)(u,2),m=p[0],h=p[1],d=Object(r.useState)(!1),g=Object(ie.a)(d,2),f=g[0],b=g[1],v=Object(r.useState)(!1),E=Object(ie.a)(v,2),j=E[0],y=E[1],k=function(){var e=Object(c.a)(l.a.mark((function e(){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),r={project_code:o.projectID,project_manager_id:{employee_id:t.employee_id},project_name:o.projectName,status:"OPEN",start_date:o.startDate.toISOString().split("T",1)[0],end_date:o.endDate.toISOString().split("T",1)[0],description:o.Desc,budget_dollar:o.cost,employees:[{employee_id:t.employee_id}]},e.prev=2,e.next=5,_.createProject(r,a);case 5:b(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),y(!0);case 11:setTimeout((function(){y(!1),b(!1)}),1e3);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),w=n.a.useState(0),O=Object(ie.a)(w,2),S=O[0],N=O[1],x=["Project Information","Project Description","Budget","Schedule"];return n.a.createElement("div",{className:e.root},j?n.a.createElement(M,{config:{message:"Failed to Create Project",variant:"error"}}):null,f?n.a.createElement(M,{config:{message:"Project Created!",variant:"success"}}):null,n.a.createElement(At.ValidatorForm,{onSubmit:k},n.a.createElement(Tt.a,{activeStep:S,alternativeLabel:!0,className:e.stepper},x.map((function(e){return n.a.createElement(It.a,{key:e},n.a.createElement(Pt.a,null,e))}))),n.a.createElement("div",{className:e.instructionsContainer},S===x.length?n.a.createElement("div",{className:e.endMessage},n.a.createElement(Te.a,{component:"span",className:e.instructions},"Project Created."),n.a.createElement(H.a,{onClick:function(){N(0)}},"Create another project")):n.a.createElement("div",null,n.a.createElement(Te.a,{component:"span",className:e.instructions},function(e,t,a,r,s){switch(e){case 0:return n.a.createElement(Ht,{projectID:t.projectID,projectName:t.projectName,projectManager:t.projectManager,handleChange:a});case 1:return n.a.createElement(Rt,{Desc:t.Desc,handleChange:a});case 2:return n.a.createElement(Ft,{cost:t.cost,handleChange:a});case 3:return n.a.createElement(Vt,{startDate:t.startDate,endDate:t.endDate,handleStartChange:r,handleEndChange:s});default:return n.a.createElement(n.a.Fragment,null)}}(S,o,(function(e){var t=e.target,a=t.name,r=t.value;i(Object(Ct.a)({},o,Object(Se.a)({},a,r)))}),(function(e){i(Object(Ct.a)({},o,{startDate:e}))}),(function(e){i(Object(Ct.a)({},o,{endDate:e}))}))),n.a.createElement("div",{className:e.backNextButtonContainer},n.a.createElement(H.a,{disabled:0===S,onClick:function(){N((function(e){return e-1}))},className:e.backButton},"Back"),S===x.length-1&&n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:k,className:e.nextButton},"Finish"),S!=x.length-1&&n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:function(){N((function(e){return e+1})),h(!1)},disabled:!m},"Next"))))))}a(760);var Kt=a(427),qt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).gotoProjectDetail=r.gotoProjectDetail.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"gotoProjectDetail",value:function(){this.props.history.push({pathname:"/projectDetails",state:{projectID:this.props.projName}})}},{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(ee.a,{className:t.projDetail,elevation:2,onClick:function(){return e.gotoProjectDetail()}},n.a.createElement("div",{className:t.projName},this.props.projName),n.a.createElement("div",{className:t.dueDateRow},n.a.createElement("div",{className:t.dueDate},"Due Date:"),n.a.createElement("div",{className:t.dueDateVal},"\xa0\xa0\xa0",this.props.dueDate)),n.a.createElement("div",{className:t.projManagerRow},n.a.createElement(fe.a,{className:t.circleStyle}),n.a.createElement("div",{className:t.projManagerName},this.props.projManagerName)))}}]),a}(r.Component),Jt=Object(L.a)((function(){return{root:{backgroundColor:Kt.a},projDetail:{width:"90%",height:"105px",margin:"25px auto"},projName:{fontWeight:"bold",margin:"2px 0 0 5px"},dueDateRow:{margin:"8px 0 0 10px"},dueDate:{color:"grey",float:"left"},dueDateVal:{marginLeft:"5px"},projManagerRow:{margin:"10px 0 0 20px",color:"darkGrey"},circleStyle:{display:"inline-block",borderRadius:"50%",width:35,height:35,float:"left"},projManagerName:{margin:"10px 0 0 15px",float:"left"}}}),{withTheme:!0})(qt),Yt=(a(761),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={loadedUser:{},projects:[],overTime:0,flexTime:0},r.getProject=r.getProject.bind(Object(m.a)(r)),r.formatWeekEnding=r.formatWeekEnding.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"formatWeekEnding",value:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth(),n=("0"+t.getDate()).slice(-2);return["January","February","March","April","May","June","July","August","September","October","November","December"][r]+" "+n+", "+a}},{key:"getProject",value:function(e,t,a){for(var r=[],n=0;n<e.length;n++)"OPEN"==e[n].status&&r.push(e[n]);(e=r).sort((function(e,t){return e.end_date-t.end_date}));var s=a.split("|"),o=parseFloat(s[0]),i=parseFloat(s[1]);this.setState({projects:e,loadedUser:t,overTime:o,flexTime:i}),0==this.state.projects.length&&(document.getElementById("recentNewProjTitle").innerHTML="You don't have any open projects")}},{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("div",{className:t.root},n.a.createElement("div",{className:t.topContainer},n.a.createElement(ee.a,{className:t.leftPaper,elevation:2},n.a.createElement("div",{className:t.projTitle,id:"recentNewProjTitle"},"Recent / New Projects"),0==this.state.projects.length?"":this.state.projects.map((function(a,r){return n.a.createElement("div",{className:t.projInfo,key:r},n.a.createElement(Jt,{key:a.project_code,history:e.props.history,projName:a.project_code,dueDate:e.formatWeekEnding(a.end_date),projManagerName:a.project_manager_id.first_name+" "+a.project_manager_id.last_name}))}))),n.a.createElement("div",null,n.a.createElement("div",{id:"timesheetDetailContainer",className:t.timesheetDetailContainer},n.a.createElement(oe,{fetchProject:this.getProject,history:this.props.history,dashboardTimesheet:!0,userId:this.props.match.params.id,token:this.props.token})),n.a.createElement("div",{className:t.flexVancationContainer},n.a.createElement(ee.a,{className:t.bottomLeftPaper,elevation:2},n.a.createElement("div",{className:t.title},"Overtime"),n.a.createElement("hr",{className:t.seperator}),n.a.createElement("div",{className:t.vacDays},this.state.overTime)),n.a.createElement(ee.a,{className:t.bottomMidPaper,elevation:2},n.a.createElement("div",{className:t.title},"Vacation Days"),n.a.createElement("hr",{className:t.seperator}),n.a.createElement("div",{className:t.vacDays},this.state.loadedUser.vacation)),n.a.createElement(ee.a,{className:t.bottomRightPaper,elevation:2},n.a.createElement("div",{className:t.title},"Flextime"),n.a.createElement("hr",{className:t.seperator}),n.a.createElement("div",{className:t.vacDays},this.state.flexTime))))))}}]),a}(r.Component)),Zt=Object(L.a)((function(){var e;return{root:{flexGrow:1},leftPanelContainer:{width:"360px"},leftPaper:(e={overflow:"scroll",maxHeight:"800px"},Object(Se.a)(e,"overflow","auto"),Object(Se.a)(e,"width","310px"),Object(Se.a)(e,"margin","0 20px 0 0"),Object(Se.a)(e,"boxShadow","none"),Object(Se.a)(e,"border","solid 1px lightgray"),Object(Se.a)(e,"borderRadius","5px"),e),rightTopPaper:{height:500},bottomLeftPaper:{height:200,width:302,textAlign:"center",boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px"},bottomMidPaper:{height:200,width:302,textAlign:"center",boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px",marginLeft:45},bottomRightPaper:{height:200,width:302,textAlign:"center",boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px",marginLeft:45},title:{display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",margin:"10px 0 0 0"},seperator:{borderTop:"1px solid lightgray"},projTitle:{margin:"20px 0 0 20px",fontWeight:700},CircularProgressbar:{width:"40%",marginTop:"18px"},topContainer:{display:"flex"},flexVancationContainer:{display:"flex",margin:"22px 0 0 4px"},timesheetDetailContainer:{border:"solid 1px lightgray",minWidth:"1000px",textAlign:"center",height:"500px",fontSize:"18pt",borderRadius:"5px",cursor:"pointer"},projInfo:{cursor:"pointer"},vacDays:{fontSize:"80pt",color:"lightgray"}}}),{withTheme:!0})(Yt),Xt=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).clickRemove=function(){e.props.history.push("/dashboard/supervisor/remove")},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{title:"Assign an employee to a project"},n.a.createElement(H.a,{className:e.iconButton,onClick:this.clickRemove,color:"primary",variant:"contained"},"Remove")))}}]),a}(n.a.Component),Qt=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(Xt),$t=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).clickAssign=function(){e.props.history.push("/dashboard/supervisor/assign")},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{title:"Assign an employee to a project"},n.a.createElement(H.a,{className:e.iconButton,onClick:this.clickAssign,color:"primary",variant:"contained"},"Assign")))}}]),a}(n.a.Component),ea=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})($t),ta=[{name:"employeeId",label:"Employee ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"}],aa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[],errorAlert:!1},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getEmployees",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),e.prev=2,e.next=5,w.getEmployeesBySupervisor(a.employee_id,t);case 5:r=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),this.setState({errorAlert:!0}),setTimeout((function(){n.setState({errorAlert:!1}),n.props.history.push("/dashboard/".concat(a.employee_id))}),1e3),e.abrupt("return",[]);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,this.getEmployees();case 3:for(t=e.sent,a=[],r=0;r<t.length;r++)n=t[r].employee_id,s=t[r].first_name,o=t[r].last_name,(i=[]).push(n),i.push(s),i.push(o),a.push(i);this.setState({data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.props.classes;return n.a.createElement("div",null,this.state.errorAlert?n.a.createElement(M,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("h1",null,"Employees"),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,customToolbar:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Qt,{history:e.props.history}),n.a.createElement(ea,{history:e.props.history}))},onRowClick:function(t,a){localStorage.setItem("name",t[1]+" "+t[2]),e.props.history.push("/dashboard/supervisor/".concat(t[0]))}}),columns:ta,data:this.state.data}))}}]),a}(r.Component),ra=a(992),na=Object(Dt.a)((function(e){return{root:{flexGrow:1},supervisorMargin:{margin:10},supervisorPaper:{height:750,padding:50},supervisorButton:{width:"fit-content"}}})),sa=function(e){var t=na(),a=localStorage.getItem("token"),s=JSON.parse(sessionStorage.getItem("user")),o=n.a.useState(),i=Object(ie.a)(o,2),u=i[0],p=i[1],m=n.a.useState(),h=Object(ie.a)(m,2),d=h[0],g=h[1],f=n.a.useState(),b=Object(ie.a)(f,2),v=b[0],E=b[1],j=n.a.useState(!1),y=Object(ie.a)(j,2),k=y[0],w=y[1],O=n.a.useState(!1),S=Object(ie.a)(O,2),N=S[0],x=S[1],C=n.a.useState([]),D=Object(ie.a)(C,2),T=D[0],I=D[1],P=function(){var t=Object(c.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.getProjectsForSupervisor(s.employee_id,a);case 3:r=t.sent,t.next=11;break;case 6:t.prev=6,t.t0=t.catch(0),w(!1),x(!0),setTimeout((function(){x(!1),w(!1),e.history.push("/dashboard/supervisor")}),1e3);case 11:return E(r),t.abrupt("return",r);case 13:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=u){e.next=2;break}return e.abrupt("return");case 2:return t=u.employees.filter((function(e){return null==e.end_date&&e.supervisor_id==s.employee_id})),I(t),e.abrupt("return",T);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){A()}),[u]);var L=function(){var t=Object(c.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),null!=u&&null!=d){t.next=3;break}return t.abrupt("return",null);case 3:return u.employees=u.employees.filter((function(e){return d.indexOf(e)<0})),t.prev=4,t.next=7,_.updateProject(u,a);case 7:w(!0),x(!1),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),x(!0),w(!1);case 15:setTimeout((function(){x(!1),w(!1),e.history.push("/dashboard/supervisor")}),1e3);case 16:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(){return t.apply(this,arguments)}}();return n.a.createElement("div",{className:t.root},N?n.a.createElement(M,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,k?n.a.createElement(M,{config:{message:"Success!",variant:"success"}}):null,n.a.createElement(ee.a,{className:t.supervisorPaper,elevation:2},n.a.createElement(et.a,{container:!0,direction:"column"},n.a.createElement(Te.a,{variant:"h4"},"Remove From Project"),n.a.createElement(Ae.a,{className:"supervisorMargin"}),n.a.createElement(ra.a,{className:t.supervisorMargin,options:v,getOptionLabel:function(e){return e.project_code},style:{width:700},onChange:function(e,t){return p(t)},renderInput:function(e){return n.a.createElement(ne.a,Object.assign({},e,{variant:"standard",label:"Project ID"}))}}),n.a.createElement(ra.a,{multiple:!0,className:t.supervisorMargin,options:T,getOptionLabel:function(e){return e.first_name+" "+e.last_name},style:{width:700},onChange:function(e,t){return g(t)},renderInput:function(e){return n.a.createElement(ne.a,Object.assign({},e,{variant:"standard",label:"Add employees",placeholder:"Search for an employee"}))}}),n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:function(){return L()},style:{width:700}},"Remove"))))},oa=Object(Dt.a)((function(e){return{root:{flexGrow:1},supervisorMargin:{margin:10},supervisorPaper:{height:750,padding:50},supervisorButton:{width:"fit-content"}}})),ia=function(e){var t=oa(),a=localStorage.getItem("token"),s=n.a.useState(),o=Object(ie.a)(s,2),i=o[0],u=o[1],p=n.a.useState([]),m=Object(ie.a)(p,2),h=m[0],d=m[1],g=n.a.useState([]),f=Object(ie.a)(g,2),b=f[0],v=f[1],E=n.a.useState([]),j=Object(ie.a)(E,2),y=j[0],k=j[1],O=n.a.useState(!1),S=Object(ie.a)(O,2),N=S[0],x=S[1],C=n.a.useState(!1),D=Object(ie.a)(C,2),T=D[0],I=D[1],P=function(){var t=Object(c.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.getAllProjects(a);case 3:r=(r=t.sent).filter((function(e){return"OPEN"==e.status})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),x(!1),I(!0),setTimeout((function(){I(!1),x(!1),e.history.push("/dashboard/supervisor")}),1e3);case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(c.a)(l.a.mark((function t(){var r,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.parse(sessionStorage.getItem("user")),t.prev=1,t.next=4,w.getEmployeesBySupervisor(r.employee_id,a);case 4:n=t.sent,t.next=13;break;case 7:return t.prev=7,t.t0=t.catch(1),x(!1),I(!0),setTimeout((function(){I(!1),x(!1),e.history.push("/dashboard/supervisor")}),1e3),t.abrupt("return",[]);case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,P();case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=k,e.next=8,A();case 8:e.t3=e.sent,(0,e.t2)(e.t3);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var L=function(){var t=Object(c.a)(l.a.mark((function t(){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),null!=i){t.next=3;break}return t.abrupt("return",null);case 3:if(0!=h.length){t.next=5;break}return t.abrupt("return",null);case 5:for(r=0;r<h.length;r++)i.employees.push(h[r]);return t.prev=6,t.next=9,_.updateProject(i,a);case 9:x(!0),I(!1),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),I(!0),x(!1);case 17:setTimeout((function(){I(!1),x(!1),e.history.push("/dashboard/supervisor")}),1e3);case 18:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(){return t.apply(this,arguments)}}();return n.a.createElement("div",{className:t.root},T?n.a.createElement(M,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,N?n.a.createElement(M,{config:{message:"Success!",variant:"success"}}):null,n.a.createElement(ee.a,{className:t.supervisorPaper,elevation:2},n.a.createElement(et.a,{container:!0,direction:"column"},n.a.createElement(Te.a,{variant:"h4"},"Assign To Project"),n.a.createElement(Ae.a,{className:"supervisorMargin"}),n.a.createElement(ra.a,{className:t.supervisorMargin,options:b,getOptionLabel:function(e){return e.project_code},style:{width:700},onChange:function(e,t){return u(t)},renderInput:function(e){return n.a.createElement(ne.a,Object.assign({},e,{variant:"standard",label:"Project ID"}))}}),n.a.createElement(ra.a,{multiple:!0,className:t.supervisorMargin,options:y,getOptionLabel:function(e){return e.first_name+" "+e.last_name},style:{width:700},onChange:function(e,t){return d(t)},renderInput:function(e){return n.a.createElement(ne.a,Object.assign({},e,{variant:"standard",label:"Add employees",placeholder:"Search for an employee"}))}}),n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:L,style:{width:700}},"Assign"))))},la=[{name:"projectId",label:"Project ID",className:"column"},{name:"projectName",label:"Project Name",className:"column"},{name:"projectManager",label:"Project Manager",className:"column"},{name:"projectStatus",label:"Status",className:"column"}],ca=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[],errorAlert:!1},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getProjects",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,_.getProjectsForUser(this.props.match.params.id,t);case 4:a=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),this.setState({errorAlert:!0}),setTimeout((function(){r.setState({errorAlert:!1}),r.props.history.push("/dashboard/supervisor")}),1e3),e.abrupt("return",[]);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,this.getProjects();case 3:for(t=e.sent,a=[],r=0;r<t.length;r++)n=t[r].project_code,s=t[r].project_name,o=t[r].project_manager_id.first_name+" "+t[r].project_manager_id.last_name,i=t[r].status,(c=[]).push(n),c.push(s),c.push(o),c.push(i),a.push(c);this.setState({data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.state.errorAlert?n.a.createElement(M,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("h1",null,"Projects Assigned To ",localStorage.name),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1}),columns:la,data:this.state.data}))}}]),a}(r.Component),ua=a(492),pa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.loadedUser;return n.a.createElement(n.a.Fragment,null,r?n.a.createElement(et.a,{item:!0,xs:2,className:a.container},n.a.createElement(be.a,{className:a.avatar,alt:"employee photo"},n.a.createElement(fe.a,{className:a.faceIcon})),n.a.createElement("div",{className:a.textContainer},n.a.createElement(Te.a,{className:a.textHeader},"Employee ID"),n.a.createElement(ne.a,{className:a.text,name:"employeeId",onChange:function(t){return e.props.formHandler(t)},disabled:!this.props.hr,defaultValue:r.employee_id,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),n.a.createElement("div",{className:a.textContainerChips},this.props.isHr?n.a.createElement(ua.a,{className:a.chip,icon:n.a.createElement(fe.a,null),label:"HR"}):null,this.props.isAdmin?n.a.createElement(ua.a,{className:a.chip,icon:n.a.createElement(fe.a,null),label:"Admin"}):null,this.props.isSuperTimesheetApprover?n.a.createElement(ua.a,{className:a.chip,icon:n.a.createElement(fe.a,null),label:"Super Timesheet Approver"}):null)):null)}}]),a}(r.Component),ma=Object(L.a)((function(){var e;return e={container:{marginTop:20},avatar:{marginTop:30,marginBottom:20,width:100,height:100,margin:"0 auto"},textContainer:{margin:"0 auto",width:120,padding:10},textHeader:{color:"gray"},text:{borderBottom:"1px solid lightgray"},chip:{margin:5},textContainerChips:{margin:"0 auto",width:135,height:100,marginTop:15}},Object(Se.a)(e,"avatar",{width:100,height:100,margin:"0 auto"}),Object(Se.a)(e,"faceIcon",{width:"100%",height:"100%"}),e}),{withTheme:!0})(pa),ha=a(974),da=a(975),ga=a(976),fa=a(977),ba=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleClickOpen=function(){r.setState({open:!0})},r.handleClose=function(){r.setState({open:!1})},r.state={open:!1,employees:[],searchList:[]},r.handleClickOpen=r.handleClickOpen.bind(Object(m.a)(r)),r.handleClose=r.handleClose.bind(Object(m.a)(r)),r.createData=r.createData.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"createData",value:function(e,t,a,r){return{image:e,id:t,name:a,select:r}}},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,w.getAllEmployees(t);case 3:a=e.sent,this.setState({searchList:a}),a.forEach((function(e){r.state.employees.push(r.createData(n.a.createElement(fe.a,null),e.employee_id,e.first_name+" "+e.last_name,n.a.createElement(H.a,{style:{marginLeft:"20px"},variant:"outlined",color:"primary",onClick:function(){r.props.selectSupervisor(e.employee_id,e.first_name,e.last_name),r.handleClose()}}," Select")))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",null,n.a.createElement(H.a,{disabled:!this.props.hr,variant:"outlined",color:"primary",className:e.button,onClick:this.handleClickOpen},"Choose Supervisor"),n.a.createElement(ha.a,{className:e.container,disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.state.open,onClose:this.handleClose},n.a.createElement(fa.a,null,"Select a Supervisor"),n.a.createElement(ga.a,null,n.a.createElement(ra.a,{disableClearable:!0,options:this.state.searchList.map((function(e){return e.first_name+" "+e.last_name})),renderInput:function(e){return n.a.createElement(ne.a,Object.assign({},e,{label:"Search for a Supervisor",margin:"normal",variant:"outlined",name:"name",InputProps:Object(Ct.a)({},e.InputProps,{type:"search"})}))}}),n.a.createElement(z.a,{className:e.table},n.a.createElement(J.a,null,n.a.createElement(Y.a,null,n.a.createElement(K.a,null," Photo "),n.a.createElement(K.a,null," ID "),n.a.createElement(K.a,null," Name "),n.a.createElement(K.a,null," Select "))),n.a.createElement(G.a,null,this.state.employees.map((function(e,t){return n.a.createElement(Y.a,{key:t},n.a.createElement(K.a,{align:"left"},e.image),n.a.createElement(K.a,{align:"left"},e.id),n.a.createElement(K.a,{align:"left"},"".concat(e.name)),n.a.createElement(K.a,{align:"left"},e.select))}))))),n.a.createElement(da.a,null,n.a.createElement(H.a,{onClick:this.handleClose,color:"primary"},"Cancel"),n.a.createElement(H.a,{onClick:this.handleClose,color:"primary"},"Ok"))))}}]),a}(r.Component),va=Object(L.a)((function(e){return{container:{height:700,minWidth:350,minHeight:400},button:{marginBottom:10,display:"inline-block",width:210}}}),{withTheme:!0})(ba),Ea=a(996),ja=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("div",{className:t.field},n.a.createElement("div",null,n.a.createElement(Te.a,{className:t.title,variant:"h6"}," Labor Grade "),this.props.marksValue||void 0==this.props.marksValue?n.a.createElement(Ea.a,{defaultValue:this.props.hr?0:parseInt(this.props.marksValue),valueLabelFormat:function(t){return e.props.valueLabelFormat(t)},onChange:function(t,a){return e.props.getSliderValue(a)},"aria-labelledby":"discrete-slider-restrict",className:t.slider,step:null,valueLabelDisplay:"auto",marks:this.props.marks,disabled:!this.props.hr,max:7}):n.a.createElement(de.a,null)))}}]),a}(r.Component),ya=Object(L.a)((function(){return{title:{marginBottom:5},field:{marginTop:50},slider:{width:"90%"}}}),{withTheme:!0})(ja),ka=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.supervisor;return n.a.createElement(n.a.Fragment,null,r?n.a.createElement(et.a,{item:!0,xs:4,className:a.container},n.a.createElement("div",{className:a.field},n.a.createElement(Te.a,{className:a.title,variant:"h6"}," Basic Information "),n.a.createElement(ne.a,{className:a.input,disabled:!this.props.hr,defaultValue:this.props.loadedUser.first_name,helperText:"First Name",onChange:function(t){return e.props.formHandler(t)},name:"firstName",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(ne.a,{className:a.input,disabled:!this.props.hr,defaultValue:this.props.loadedUser.last_name,helperText:"Last Name",name:"lastName",onChange:function(t){return e.props.formHandler(t)},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),n.a.createElement("div",{className:a.field},n.a.createElement(ya,{valueLabelFormat:this.props.valueLabelFormat,getSliderValue:this.props.getSliderValue,marks:this.props.marks,hr:this.props.hr,marksValue:this.props.marksValue})),n.a.createElement("div",{className:a.field},n.a.createElement(et.a,{container:!0,spacing:1,className:a.container},n.a.createElement(et.a,{item:!0,xs:6},n.a.createElement(va,{hr:this.props.hr,selectSupervisor:this.props.selectSupervisor})),n.a.createElement(et.a,{item:!0,xs:6},n.a.createElement(ua.a,{className:a.chip,icon:n.a.createElement(fe.a,null),label:this.props.supervisorName})))),n.a.createElement("div",{className:a.field},n.a.createElement(Te.a,{className:a.title,variant:"h6"}," Vacation Days "),n.a.createElement(ne.a,{className:a.input,disabled:!this.props.hr,defaultValue:this.props.loadedUser.vacation,helperText:"Vacation Days",onChange:function(t){return e.props.formHandler(t)},name:"vacation",type:"number",margin:"normal",InputLabelProps:{shrink:!0}}))):null)}}]),a}(r.Component),wa=Object(L.a)((function(){return{title:{marginBottom:5},paper:{height:600},input:{display:"inline-block",width:"90%"},field:{marginTop:50},avatar:{display:"inline-block",marginRight:"5%"},inputSupervisor:{width:"77%"}}}),{withTheme:!0})(ka),Oa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(et.a,{item:!0,xs:4,className:t.container},n.a.createElement(At.ValidatorForm,{onSubmit:this.props.handleSubmit},n.a.createElement("div",{className:t.field},n.a.createElement(Te.a,{className:t.title,variant:"h6"}," Change Password "),this.props.hr?null:n.a.createElement(At.TextValidator,{value:this.props.oldPassword,autoComplete:this.props.oldPassword,className:t.input,name:"oldPassword",type:"password",helperText:"Old Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0},validators:["isPassword"],errorMessages:["Password length has to be greater than 6"]}),n.a.createElement(At.TextValidator,{className:t.input,name:"newPassword",type:"password",helperText:"New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0},value:this.props.newPassword,validators:["isPassword"],errorMessages:["Password length has to be greater than 6"]}),n.a.createElement(At.TextValidator,{className:t.input,name:"confirmPassword",type:"password",helperText:"Confirm New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0},value:this.props.confirmPassword,validators:["isPassword"],errorMessages:["Password length has to be greater than 6"]})),n.a.createElement(H.a,{variant:"contained",color:"primary",type:"submit",className:t.button},"Submit"))))}}]),a}(r.Component),_a=Object(L.a)((function(){return{container:{marginTop:20},title:{marginBottom:5},input:{display:"block",width:"90%"},field:{marginTop:30},button:{width:"90%",marginTop:20}}}),{withTheme:!0})(Oa),Sa=a(439),Na=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={loadedUser:null,supervisor:null,isAdmin:!1,isHr:!1,isSuperTimesheetApprover:!1,marks:Sa,laborGradeId:"",laborGradeName:"",vacation:"",supervisorSelected:!1,supervisorFirstName:"",supervisorLastName:"",oldPassword:"",newPassword:"",confirmPassword:"",marksValue:0,passwordChange:!1},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r.formHandler=r.formHandler.bind(Object(m.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(m.a)(r)),r.selectSupervisor=r.selectSupervisor.bind(Object(m.a)(r)),r.valueLabelFormat=r.valueLabelFormat.bind(Object(m.a)(r)),r.getSliderValue=r.getSliderValue.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.fetchData(e),this.setState({errorAlert:!1,successAlert:!1,passwordChange:!1}),At.ValidatorForm.addValidationRule("isPassword",(function(e){return!(e.length<6&&e.length>0)}))}},{key:"componentWillUnmount",value:function(){At.ValidatorForm.removeValidationRule("isPassword")}},{key:"valueLabelFormat",value:function(e){return this.state.marks[e].label}},{key:"getSliderValue",value:function(e){this.setState({laborGradeId:this.state.marks[e].label,laborGradeName:this.state.marks[e].name})}},{key:"selectSupervisor",value:function(e,t,a){this.setState({supervisorId:e,supervisorFirstName:t,supervisorLastName:a})}},{key:"formHandler",value:function(e){this.setState(Object(Se.a)({},e.target.name,e.target.value)),(this.state.newPassword.length>0||this.state.confirmPassword.length>0||this.state.oldPassword.length>0)&&this.setState({passwordChange:!0})}},{key:"handleSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,p,m,h,d=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token"),a=this.state.loadedUser,r=this.state,n=r.firstName,s=r.lastName,o=r.laborGradeId,i=r.laborGradeName,c=r.supervisorId,u=r.vacation,p=r.oldPassword,m=r.newPassword,h=r.confirmPassword,e.prev=3,!(p.length>0||m.length>0||h.length>0)){e.next=38;break}if(!this.props.hr){e.next=22;break}if(m===h){e.next=10;break}this.setState({errorAlert:!0}),e.next=20;break;case 10:return a.first_name=n,a.last_name=s,a.labor_grade_id.labor_grade_id=o,a.labor_grade_id.labor_grade_name=i,a.vacation=u,a.supervisor_id=c,a.password=m,e.next=19,w.updateEmployee(this.props.loadedUser.employee_id,t,a);case 19:this.setState({successAlert:!0,errorAlert:!1,passwordChange:!1});case 20:e.next=36;break;case 22:if(p===a.password&&m===h){e.next=26;break}this.setState({errorAlert:!0}),e.next=36;break;case 26:return a.first_name=n,a.last_name=s,a.labor_grade_id.labor_grade_id=o,a.labor_grade_id.labor_grade_name=i,a.vacation=u,a.supervisor_id=c,a.password=m,e.next=35,w.updateEmployee(this.props.loadedUser.employee_id,t,a);case 35:this.setState({successAlert:!0,errorAlert:!1,passwordChange:!1});case 36:e.next=47;break;case 38:return a.first_name=n,a.last_name=s,a.labor_grade_id.labor_grade_id=o,a.labor_grade_id.labor_grade_name=i,a.vacation=u,a.supervisor_id=c,e.next=46,w.updateEmployee(this.props.loadedUser.employee_id,t,a);case 46:this.setState({successAlert:!0,errorAlert:!1});case 47:e.next=52;break;case 49:e.prev=49,e.t0=e.catch(3),this.setState({successAlert:!1,errorAlert:!0});case 52:setTimeout((function(){d.setState({successAlert:!1,errorAlert:!1})}),1e3);case 53:case"end":return e.stop()}}),e,this,[[3,49]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getEmployeeById(this.props.match.params.id,t);case 3:return a=e.sent,e.next=6,w.getEmployeeById(a.supervisor_id,t);case 6:for(n in r=e.sent,this.setState({loadedUser:a,firstName:a.first_name,lastName:a.last_name,laborGradeId:a.labor_grade_id.labor_grade_id,laborGradeName:a.labor_grade_id.labor_grade_name,supervisorId:a.supervisor_id,isAdmin:a.is_admin,isHr:a.is_hr_staff,vacation:a.vacation,isSuperTimesheetApprover:a.is_super_timesheet_approver,oldPassword:"",newPassword:"",confirmPassword:"",supervisor:r,supervisorFirstName:r.first_name,supervisorLastName:r.last_name,passwordChange:!1}),this.state.marks)this.state.marks[n].label===this.state.laborGradeId&&this.setState({marksValue:n});e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response.status===ye.UNAUTHORIZED&&this.props.sessionLogoutHandler();case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.hr,r=this.state,s=r.loadedUser,o=r.supervisor;return n.a.createElement("div",{className:t.root},this.state.errorAlert?n.a.createElement(M,{config:{message:"error",variant:"error"}}):null,this.state.successAlert?n.a.createElement(M,{config:{message:"success",variant:"success"}}):null,s&&o?n.a.createElement(ee.a,{className:t.paper,elevation:2},n.a.createElement(et.a,{container:!0,spacing:1},n.a.createElement(ma,{loadedUser:s,isHr:this.state.isHr,isAdmin:this.state.isAdmin,isSuperTimesheetApprover:this.state.isSuperTimesheetApprover}),n.a.createElement(Ae.a,{orientation:"vertical",flexItem:!0,className:t.divider}),n.a.createElement(wa,{loadedUser:s,supervisor:o,hr:a,formHandler:this.formHandler,value:this.state.value,selectSupervisor:this.selectSupervisor,supervisorName:"".concat(this.state.supervisorFirstName," ").concat(this.state.supervisorLastName),valueLabelFormat:this.valueLabelFormat,getSliderValue:this.getSliderValue,marks:this.state.marks,marksValue:this.state.marksValue}),n.a.createElement(Ae.a,{orientation:"vertical",flexItem:!0,className:t.divider}),n.a.createElement(_a,{loadedUser:s,hr:a,formHandler:this.formHandler,handleSubmit:this.handleSubmit,oldPassword:this.state.oldPassword,newPassword:this.state.newPassword,confirmPassword:this.state.confirmPassword}))):n.a.createElement(de.a,null))}}]),a}(r.Component),xa=Object(L.a)((function(){return{root:{flexGrow:1},paper:{height:750},divider:{margin:45,height:690}}}),{withTheme:!0})(Na),Ca=a(987),Da=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(et.a,{item:!0,xs:2,className:t.container},n.a.createElement(be.a,{className:t.avatar,alt:"employee photo"},n.a.createElement(fe.a,{className:t.faceIcon})),n.a.createElement("div",{className:t.textContainer},n.a.createElement(Te.a,{className:t.textHeader},"Employee ID"),n.a.createElement(ne.a,{className:t.text,name:"employeeId",onChange:function(t){return e.props.formHandler(t)},disabled:!0,fullWidth:!0,InputLabelProps:{shrink:!0}})),n.a.createElement("div",{className:t.textContainer},n.a.createElement(Te.a,{className:t.textHeaderRole},"Role"),n.a.createElement(et.a,{container:!0,spacing:1},n.a.createElement(et.a,{item:!0,xs:6},n.a.createElement("p",null,"HR")),n.a.createElement(et.a,{item:!0,xs:6},n.a.createElement(Ca.a,{checked:this.props.isHr,name:"isHr",color:"primary",onClick:this.props.isHrSwitch})),n.a.createElement(et.a,{item:!0,xs:6},n.a.createElement("p",null,"Admin")),n.a.createElement(et.a,{item:!0,xs:6},n.a.createElement(Ca.a,{checked:this.props.isAdmin,name:"isHr",color:"primary",onClick:this.props.isAdminSwitch})),n.a.createElement(et.a,{item:!0,xs:6},n.a.createElement("p",null,"Super Timesheet Approver")),n.a.createElement(et.a,{item:!0,xs:6},n.a.createElement(Ca.a,{checked:this.props.isSuperTimesheetApprover,name:"isHr",color:"primary",onClick:this.props.isSuperTimesheetApproverSwitch}))))))}}]),a}(r.Component),Ta=Object(L.a)((function(){return{container:{marginTop:20},avatar:{width:100,height:100,margin:"0 auto"},textContainer:{margin:"0 auto",width:135},textHeader:{color:"black",marginBottom:10,marginTop:10},textHeaderRole:{marginTop:50,marginBottom:25},text:{borderBottom:"1px solid lightgray"},faceIcon:{width:"100%",height:"100%"},switch:{color:"green",marginLeft:100}}}),{withTheme:!0})(Da),Ia=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(et.a,{item:!0,xs:4,className:t.container},n.a.createElement("div",{className:t.field},n.a.createElement(Te.a,{className:t.title,variant:"h6"}," Basic Information "),n.a.createElement(ne.a,{className:t.input,disabled:!this.props.hr,helperText:"First Name",onChange:function(t){return e.props.formHandler(t)},name:"firstName",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(ne.a,{className:t.input,disabled:!this.props.hr,helperText:"Middle Name",onChange:function(t){return e.props.formHandler(t)},name:"middleName",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(ne.a,{className:t.input,disabled:!this.props.hr,helperText:"Last Name",name:"lastName",onChange:function(t){return e.props.formHandler(t)},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),n.a.createElement("div",{className:t.field},n.a.createElement(ya,{marks:this.props.marks,getSliderValue:this.props.getSliderValue,valueLabelFormat:this.props.valueLabelFormat,hr:this.props.hr})),n.a.createElement("div",{className:t.field},n.a.createElement(et.a,{container:!0,spacing:1,className:t.container},n.a.createElement(et.a,{item:!0,xs:6},n.a.createElement(va,{hr:this.props.hr,selectSupervisor:this.props.selectSupervisor})),n.a.createElement(et.a,{item:!0,xs:6},this.props.supervisorSelected?n.a.createElement(ua.a,{className:t.chip,icon:n.a.createElement(fe.a,null),label:this.props.supervisorName}):null),n.a.createElement(et.a,{item:!0,xs:6},n.a.createElement("div",{className:t.fieldVacation},n.a.createElement(Te.a,{className:t.title,variant:"h6"},"Vacation Days"),n.a.createElement(ne.a,{className:t.input,helperText:"Vacation Days",type:"number",name:"vacation",onChange:function(t){return e.props.formHandler(t)},disabled:!this.props.hr,margin:"normal",InputLabelProps:{shrink:!0}})))))))}}]),a}(r.Component),Pa=Object(L.a)((function(){return{title:{marginBottom:5},paper:{height:600},input:{display:"inline-block",width:"90%"},field:{marginTop:50},fieldVacation:{marginTop:25},slider:{width:"90%"},supervisorField:{marginTop:20,marginBottom:20},supervisorName:{display:"inline"},formControl:{width:"50%",marginTop:10}}}),{withTheme:!0})(Ia),Aa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(et.a,{item:!0,xs:4,className:t.container},n.a.createElement(At.ValidatorForm,{onSubmit:this.props.handleSubmit},n.a.createElement("div",{className:t.field},n.a.createElement(Te.a,{className:t.title,variant:"h6"}," Password "),n.a.createElement(At.TextValidator,{className:t.input,name:"newPassword",type:"password",helperText:"New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0},value:this.props.newPassword,validators:["isPassword"],errorMessages:["Password length has to be greater than 6"]}),n.a.createElement(At.TextValidator,{className:t.input,name:"confirmPassword",type:"password",helperText:"Confirm New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0},value:this.props.confirmPassword,validators:["isPassword"],errorMessages:["Password length has to be greater than 6"]})),n.a.createElement(H.a,{variant:"contained",color:"primary",className:t.button,type:"submit"},"Submit"))))}}]),a}(r.Component),La=Object(L.a)((function(){return{container:{marginTop:20},title:{marginBottom:5},input:{display:"block",width:"90%"},field:{marginTop:30},button:{width:"90%",marginTop:20}}}),{withTheme:!0})(Aa),Ha=a(439);a(433);var Ra=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={isHr:!1,isAdmin:!1,isSuperTimesheetApprover:!1,vacation:0,supervisorId:"",labelGradeId:"",labelGradeName:"",newPassword:"",confirmPassword:"",supervisorFirstName:"",supervisorLastName:"",supervisorSelected:!1,marks:Ha},r.valueLabelFormat=r.valueLabelFormat.bind(Object(m.a)(r)),r.getSliderValue=r.getSliderValue.bind(Object(m.a)(r)),r.formHandler=r.formHandler.bind(Object(m.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(m.a)(r)),r.isHrSwitch=r.isHrSwitch.bind(Object(m.a)(r)),r.isAdminSwitch=r.isAdminSwitch.bind(Object(m.a)(r)),r.isSuperTimesheetApproverSwitch=r.isSuperTimesheetApproverSwitch.bind(Object(m.a)(r)),r.selectSupervisor=r.selectSupervisor.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setState({firstName:"",middleName:"",lastName:"",supervisorId:"",newPassword:"",confirmPassword:"",isHr:!1,isAdmin:!1,isSuperTimesheetApprover:!1,vacation:0,laborGradeId:Ha[0].label,laborGradeName:"",errorAlert:!1,successAlert:!1,marks:Ha,supervisorSelected:!1,supervisorFirstName:"",supervisorLastName:""}),At.ValidatorForm.addValidationRule("isPassword",(function(e){return!(e.length<6&&e.length>0)}))}},{key:"componentWillUnmount",value:function(){At.ValidatorForm.removeValidationRule("isPassword")}},{key:"valueLabelFormat",value:function(e){return this.state.marks[e].label}},{key:"getSliderValue",value:function(e){this.setState({laborGradeId:this.state.marks[e].label,laborGradeName:this.state.marks[e].name})}},{key:"formHandler",value:function(e){e.preventDefault(),this.setState(Object(Se.a)({},e.target.name,e.target.value))}},{key:"isHrSwitch",value:function(){this.setState({isHr:!this.state.isHr})}},{key:"isAdminSwitch",value:function(){this.setState({isAdmin:!this.state.isAdmin})}},{key:"isSuperTimesheetApproverSwitch",value:function(){this.setState({isSuperTimesheetApprover:!this.state.isSuperTimesheetApprover})}},{key:"selectSupervisor",value:function(e,t,a){this.setState({supervisorId:e,supervisorFirstName:t,supervisorLastName:a,supervisorSelected:!0})}},{key:"handleSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,p,m,h,d,g,f=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),a=this.state,r=a.firstName,n=a.middleName,s=a.lastName,o=a.supervisorId,i=a.laborGradeId,c=a.laborGradeName,u=a.confirmPassword,p=a.isHr,m=a.isAdmin,h=a.isSuperTimesheetApprover,d=a.vacation,g={supervisor_id:o,labor_grade_id:{labor_grade_id:i,labor_grade_name:c},password:u,first_name:r,middle_name:n,last_name:s,start_date:(new Date).getTime(),end_date:null,is_admin:m,is_hr_staff:p,is_super_timesheet_approver:h,is_secondary_approver:!1,vacation:d},e.next=6,w.createEmployee(t,g);case 6:this.setState({successAlert:!0,errorAlert:!1}),setTimeout((function(){f.setState({successAlert:!1,errorAlert:!1})}),1e3),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response.status===ye.UNAUTHORIZED&&this.props.sessionLogoutHandler();case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.hr;return n.a.createElement("div",{className:t.root},this.state.errorAlert?n.a.createElement(M,{config:{message:"Submission Failed",variant:"error"}}):null,this.state.successAlert?n.a.createElement(M,{config:{message:"Submission Success!",variant:"success"}}):null,n.a.createElement(ee.a,{className:t.paper,elevation:2},n.a.createElement(et.a,{container:!0,spacing:1},n.a.createElement(Ta,{hr:a,formHandler:this.formHandler,isHrSwitch:this.isHrSwitch,isHr:this.state.isHr,isAdminSwitch:this.isAdminSwitch,isAdmin:this.state.isAdmin,isSuperTimesheetApproverSwitch:this.isSuperTimesheetApproverSwitch,isSuperTimesheetApprover:this.state.isSuperTimesheetApprover}),n.a.createElement(Ae.a,{orientation:"vertical",flexItem:!0,className:t.divider}),n.a.createElement(Pa,{hr:a,formHandler:this.formHandler,valueLabelFormat:this.valueLabelFormat,marks:this.state.marks,laborGradeId:this.state.laborGradeId,selectSupervisor:this.selectSupervisor,supervisorName:"".concat(this.state.supervisorFirstName," ").concat(this.state.supervisorLastName),supervisorSelected:this.state.supervisorSelected,getSliderValue:this.getSliderValue}),n.a.createElement(Ae.a,{orientation:"vertical",flexItem:!0,className:t.divider}),n.a.createElement(La,{hr:a,formHandler:this.formHandler,handleSubmit:this.handleSubmit,newPassword:this.state.newPassword,confirmPassword:this.state.confirmPassword}))))}}]),a}(r.Component),Fa=Object(L.a)((function(){return{root:{flexGrow:1},paper:{height:750},divider:{margin:45,height:690}}}),{withTheme:!0})(Ra),Ma=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:r.props.data,wp:r.props.wp,sumbitAlert:!1,successAlert:!1},r.handleSubmit=r.handleSubmit.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"handleSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log(this.state.data),t=[],a=[],r=[],this.state.data.forEach((function(e){var n=t.indexOf(e[2]);-1===n?(t.push(e[2]),a.push(parseInt(e[3])),r.push(1)):(a[n]+=parseInt(e[3]),r[n]+=1)})),n=[],s=this.state.wp.workPackagePlanCollection[0],t.forEach((function(e,t){var o={};o.project_code=s.project_code,o.work_package_id=s.work_package_id,o.type="ESTIMATE",o.start_date=(new Date).toISOString().split("T",1)[0],o.end_date=s.end_date,o.revision=i.props.revision,o.labor_grade_id=e,o.quantity=r[t],o.plan_hour=a[t],o.project_wp=s.project_wp,n.push(o)})),console.log(n),o=localStorage.getItem("token"),n.forEach(function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.createNewPlan(t,o);case 3:"exception throw"!=(a=e.sent)&&i.setState({successAlert:!0}),console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),console.log(r),console.log(t),console.log(a)}catch(u){console.error(u),this.setState({sumbitAlert:!0}),this.props.sessionLogoutHandler()}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{title:"Submit the plan"},n.a.createElement(H.a,{className:e.iconButton,color:"primary",variant:"contained",onClick:this.handleSubmit},"Submit")),this.state.sumbitAlert?n.a.createElement(M,{config:{message:"Submission Failed!",variant:"error"}}):null,this.state.successAlert?n.a.createElement(M,{config:{message:"Submission Successful!",variant:"success"}}):null)}}]),a}(n.a.Component),Wa=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(Ma),Ba=function(e,t){var a=e.history;return{selectableRows:!1,search:!1,print:!1,download:!1,filter:!1,customToolbar:function(){if(t.data.length>0)return n.a.createElement(Wa,{history:a,data:t.data,wp:t.wp,revision:t.revision})}}},Ua=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[],wp:r.props.location.wp,revision:0,errorAlert:!1,successAlert:!1},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){try{console.log(this.state.wp);var e=[],t=0;this.state.wp.employees.forEach((function(t){var a=[];a.push(t.employee_id),a.push(t.first_name+" "+t.last_name),a.push(t.labor_grade_id.labor_grade_id),e.push(a)}));var a=!1,r=0;if(this.state.wp.workPackagePlanCollection.forEach((function(t){console.log("WP!"),"ESTIMATE"===t.type&&(a=!0,t.revision>r&&(r=t.revision,e.forEach((function(e){console.log("in here"),e[2]===t.labor_grade_id&&(e[3]=t.plan_hour/t.quantity)}))))})),t=r+1,!a){t=1,console.log("BUDGET");var n=0;this.state.wp.workPackagePlanCollection.forEach((function(t){t.revision>n&&(console.log("Found Revision"),n=t.revision,e.forEach((function(e){console.log("Data"),console.log(e[2]),console.log(t.labor_grade_id),e[2]===t.labor_grade_id&&(console.log(t.plan_hour),e[3]=t.plan_hour/t.quantity)})))}))}this.setState({data:e,revision:t}),console.log(e)}catch(s){console.error(s),this.setState({errorAlert:!0}),this.props.sessionLogoutHandler()}}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.state.errorAlert?n.a.createElement(M,{config:{message:"WorkPackage API Call Failed",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("h1",null," Iteration Progress"),options:Ba(this.props,this.state),columns:(e=this,[{name:"empId",label:"Employee ID",className:"column"},{name:"empName",label:"Employee Name",className:"column"},{name:"LG",label:"Labor Grade",className:"column"},{name:"Hours",label:"Hours",className:"column",options:{customBodyRender:function(t,a,r){return n.a.createElement("div",null,n.a.createElement("input",{type:"number",value:e.state.data[a.rowIndex][a.columnIndex],onChange:function(t){var n=e.state.data;n[a.rowIndex][a.columnIndex]=t.target.value,r(t.target.value),e.setState({data:n})}}))}}}]),data:this.state.data}));var e}}]),a}(n.a.Component),Va=(a(762),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleClickOpen=function(){r.setState({setOpen:!0})},r.handleClickClose=function(){r.setState({setOpen:!1})},r.state={setOpen:!1,open:!1,members:[]},r.handleClickOpen=r.handleClickOpen.bind(Object(m.a)(r)),r.handleClickClose=r.handleClickClose.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({members:e.members,setOpen:e.open})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(ha.a,{open:this.state.setOpen,keepMounted:!0,onClose:this.handleClickClose},n.a.createElement(ga.a,{className:"modal-container"},n.a.createElement("div",null,n.a.createElement("p",{className:"modal-title"},"Team Members")),this.state.members.map((function(e){return n.a.createElement(et.a,{container:!0,direction:"row",alignItems:"center"},n.a.createElement(et.a,{item:!0,className:"projectDetailsMargin2"},n.a.createElement(be.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},e.first_name.slice(0,1).toUpperCase(),e.last_name.slice(0,1).toUpperCase())),n.a.createElement(et.a,{item:!0},n.a.createElement(Te.a,null,e.first_name+" "+e.last_name)))})))))}}]),a}(r.Component)),za=(a(241),["ID","Name","Supervisor","Team"]),Ga=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={wpList:e.wpList,data:[]},r.options={print:!1,responsive:"scroll",selectableRows:!1,onRowClick:function(e,t){console.log(e);var a=null;r.state.wpList.forEach((function(t){t.work_package_id===e[0]&&(a=t)})),r.props.history.push({pathname:"/workpackageDetail",state:{wp:a}})}},r.setData=r.setData.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setData(this.state.wpList)}},{key:"setData",value:function(e){var t,a=[];e.map((function(e){(t=[]).push(e.work_package_id),t.push(e.description.split(":",1)[0]),t.push(e.responsible_person_id.first_name+" "+e.responsible_person_id.last_name),t.push(e.employees.length),a.push(t)})),this.setState({data:a})}},{key:"render",value:function(){return n.a.createElement(P.a,{className:"WorkpackageListDT",title:"Work Packages",columns:za,options:this.options,data:this.state.data})}}]),a}(n.a.Component),Ka=a(989),qa=a(990),Ja=a(504),Ya=a.n(Ja),Za=a(348),Xa=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={wpList:[],data:[]},r.setData=r.setData.bind(Object(m.a)(r)),r.addChildren=r.addChildren.bind(Object(m.a)(r)),r.renderTree=r.renderTree.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this;console.log("Received props"),this.setState({wpList:e.wpList},(function(){return t.setData(t.state.wpList)}))}},{key:"setData",value:function(e){var t=this,a=[],r="",n="",s=[],o={};e.sort((function(e,t){return parseInt(e.higher_work_package_id)-parseInt(t.higher_work_package_id)})),console.log(e),e.map((function(e){o={},s=[],r=e.work_package_id,n=e.description,o.id=r,o.name=n,o.children=s,"0"===e.higher_work_package_id?a.push(o):t.addChildren(a,e.higher_work_package_id,o)})),this.setState({data:a})}},{key:"addChildren",value:function(e,t,a){for(var r in e){var n=!1;e[r].id===t&&(e[r].children.push(a),n=!0),n||this.addChildren(e[r].children,t,a)}}},{key:"renderLabel",value:function(e){var t=this;return n.a.createElement(Za.a,{display:"flex",onClick:function(a){var r=null;t.state.wpList.forEach((function(t){t.work_package_id===e.id&&(r=t)})),t.props.history.push({pathname:"/workpackageDetail",state:{wp:r,isPM:!0}}),a.stopPropagation(),a.preventDefault()}},n.a.createElement(Te.a,null,"WP"+e.id+": "+e.name.split(":",1)[0]))}},{key:"renderTree",value:function(e){var t=this;return console.log(e),n.a.createElement(Ka.a,{key:e.id,nodeId:e.id,label:this.renderLabel(e)},n.a.createElement(Te.a,{variant:"h5"},Array.isArray(e.children)?e.children.map((function(e){return t.renderTree(e)})):null))}},{key:"handleToggle",value:function(e,t){e.preventDefault(),console.log(t)}},{key:"render",value:function(){var e=this;return n.a.createElement(qa.a,{className:"PDWPTreeView",defaultCollapseIcon:n.a.createElement(pt.a,null),defaultExpandIcon:n.a.createElement(Ya.a,null)},this.state.data.map((function(t){return e.renderTree(t)})))}}]),a}(n.a.Component),Qa=a(60),$a=(a(204),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={wpList:r.props.wpList,data:[]},r.setData=r.setData.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(this.props.wpList),t=[],a=[],r=[],this.props.wpList.forEach((function(e){e.work_package_id.includes("L")&&(a.push(e),e.employees.forEach((function(e){-1===t.indexOf(e.employee_id)&&t.push(e.employee_id)})))})),n=[],!(t.length>0)){e.next=11;break}return s=localStorage.getItem("token"),e.next=10,S.getTimesheetsByEmps(t.toString(),s);case 10:n=e.sent;case 11:o={},a.forEach((function(e){(o={}).wp=e.work_package_id,o.employees=[];var t={};e.employees.forEach((function(a){(t={}).id=a.employee_id,t.name=a.first_name+" "+a.last_name,t.hours=0,n.forEach((function(r){r.employee.employee_id===a.employee_id&&r.details.forEach((function(a){a.project_wp===e.project.project_code+"_"+e.work_package_id&&(t.hours+=a.saturday+a.sunday+a.monday+a.tuesday+a.wednesday+a.thursday+a.friday)}))})),o.employees.push(t)})),r.push(o)})),this.setState({data:r}),console.log(n),console.log(a),console.log(t),console.log(r);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Qa.e.create({container:{display:"flex",flexDirection:"row",padding:5},image:{height:30,width:30},title:{alignSelf:"center",marginLeft:5,fontSize:18},report:{marginLeft:100},date:{marginLeft:100},dataContainer:{display:"flex",alignItems:"center",flexDirection:"column",padding:20},employeesRow:{display:"flex",flexDirection:"row"},margin:{marginTop:10,marginLeft:20,marginRight:20},marginB:{marginLeft:50,marginRight:50}});return n.a.createElement(Qa.a,null,n.a.createElement(Qa.d,null,n.a.createElement(Qa.g,{style:e.container},n.a.createElement(Qa.b,{style:e.image,src:"https://cors-anywhere.herokuapp.com/https://i.imgur.com/zzNGGGB.jpg"}),n.a.createElement(Qa.f,{style:e.title},"Timely"),n.a.createElement(Qa.f,{style:e.report},"Report for ",this.state.wpList[0].project.project_code),n.a.createElement(Qa.f,{style:e.date},(new Date).toDateString())),this.state.data?this.state.data.map((function(t){return n.a.createElement(Qa.g,{style:e.dataContainer},n.a.createElement(Qa.f,null,"Work Package: ",t.wp),n.a.createElement(Qa.g,{style:e.employeesRow},n.a.createElement(Qa.f,{style:e.margin},"Employee ID"),n.a.createElement(Qa.f,{style:e.margin},"Employee Name"),n.a.createElement(Qa.f,{style:e.margin},"Hours")),t.employees?t.employees.map((function(t){return n.a.createElement(Qa.g,{style:e.employeesRow},n.a.createElement(Qa.f,{style:e.marginB},t.id),n.a.createElement(Qa.f,{style:e.marginB},t.name),n.a.createElement(Qa.f,{style:e.marginB},t.hours))})):"")})):""))}}]),a}(n.a.Component)),er=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={projectID:r.props.location.state.projectID,project:{},wpList:[],isProjManager:null,openModal:!1},r.openModal=r.openModal.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"openModal",value:function(){this.setState({openModal:!0})}},{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,_.getDetailsById(this.state.projectID,t);case 3:a=e.sent,console.log(a),this.setState({project:a.project,wpList:a.wpList,isProjManager:a.projManager}),console.log(this.state.project.project_manager_id.first_name);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(et.a,{container:!0,spacing:3},n.a.createElement(et.a,{item:!0,xs:12,sm:6,className:"gridBorder"},n.a.createElement(Te.a,{variant:"h4"},this.state.project.project_name),n.a.createElement(Te.a,{variant:"h6"},this.state.project.description)),this.state.project.hasOwnProperty("project_manager_id")&&n.a.createElement(n.a.Fragment,null,n.a.createElement(et.a,{item:!0,xs:12,sm:3},n.a.createElement(Te.a,{variant:"h6"},"Project Manager:"),n.a.createElement(et.a,{container:!0,direction:"row",alignItems:"center"},n.a.createElement(et.a,{item:!0,className:"projectDetailsMargin"},n.a.createElement(be.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},this.state.project.project_manager_id.first_name.slice(0,1).toUpperCase(),this.state.project.project_manager_id.last_name.slice(0,1).toUpperCase())),n.a.createElement(et.a,{item:!0},n.a.createElement(Te.a,null,this.state.project.project_manager_id.first_name+" "+this.state.project.project_manager_id.last_name)))),n.a.createElement(et.a,{item:!0,xs:6,sm:3},n.a.createElement(Te.a,{variant:"h6"},"Team:"),n.a.createElement(et.a,{container:!0,direction:"row",alignItems:"center"},this.state.project.employees.slice(0,5).map((function(e){return n.a.createElement(et.a,{item:!0,className:"projectDetailsMargin"},n.a.createElement(A.a,{title:e.first_name+" "+e.last_name},n.a.createElement(be.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},e.first_name.slice(0,1).toUpperCase(),e.last_name.slice(0,1).toUpperCase())))})),this.state.project.employees.length>5&&n.a.createElement(n.a.Fragment,null,n.a.createElement(H.a,{onClick:this.openModal},"Show More"),n.a.createElement(Va,{open:this.state.openModal,members:this.state.project.employees})))))),this.state.isProjManager&&n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(et.a,{justify:"space-between",container:!0,spacing:1},n.a.createElement(et.a,{item:!0},n.a.createElement(Te.a,{variant:"h6"},n.a.createElement("b",null,"Budget:")," $",this.state.project.budget_dollar),n.a.createElement(Te.a,{variant:"h6"},n.a.createElement("b",null,"Start Date:")," ",new Date(this.state.project.start_date).toDateString().split(" ").slice(1).join(" ")," ","\xa0 \xa0",n.a.createElement("b",null,"End Date:")," ",new Date(this.state.project.end_date).toDateString().split(" ").slice(1).join(" "))),n.a.createElement(et.a,{item:!0},n.a.createElement(H.a,{variant:"contained",color:"primary",component:D.b,to:{pathname:"/createWorkpackage",project:this.state.project,wpList:this.state.wpList},style:{marginRight:"5%"}},n.a.createElement("b",null,"+ Create Work Package"))))),!1===this.state.isProjManager?n.a.createElement(Ga,{history:this.props.history,type:this.state.isProjManager?"PM":"Emp",wpList:this.state.wpList}):n.a.createElement(et.a,{container:!0,justify:"center",className:"PDWorkpackageTree",direction:"column"},n.a.createElement(et.a,{item:!0},n.a.createElement(Xa,{wpList:this.state.wpList,history:this.props.history})),n.a.createElement("br",null),this.state.wpList.length>0&&n.a.createElement(et.a,{item:!0},n.a.createElement(Qa.c,{document:n.a.createElement($a,{wpList:this.state.wpList}),fileName:this.state.projectID+"_report.pdf",style:{textDecoration:"none",padding:"10px",color:"#4a4a4a",backgroundColor:"#f2f2f2",border:"1px solid #4a4a4a"}},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Loading document...":"Get Report"})))))}}]),a}(n.a.Component),tr=[{name:"WpId",label:"WorkPackage ID",className:"column"},{name:"PM",label:"Project Manager",className:"column"},{name:"Members",label:"Members",className:"column"}],ar=function(e,t){e.history;return{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,onRowClick:function(a,r){console.log(a);var n=null;t.forEach((function(e){e.work_package_id===a[0]&&(n=e)})),e.history.push({pathname:"/workpackageDetail",state:{wp:n,isPM:!1,isRE:!0}})},textLabels:{body:{noMatch:n.a.createElement("p",null,"Sorry, you are not responsible for any work pacakges.")}}}},rr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[],token:null,wpList:[],errorAlert:!1},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.setState({token:e}),this.fetchData(e)}},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.props.classes,a=JSON.parse(sessionStorage.getItem("user")),r=a.employee_id,e.next=6,x.getAllWorkpackageFromRE(r,t);case 6:null!=(n=e.sent)&&this.setState({wpList:n}),s=[],n.forEach(function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.work_package_id,r=t.project.project_manager_id.first_name+" "+t.project.project_manager_id.last_name,n=t.employees.length,o=[],a.endsWith("L")&&(o.push(a),o.push(r),o.push(n),s.push(o));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({data:s}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),this.setState({errorAlert:!0}),this.props.sessionLogoutHandler();case 18:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.state.errorAlert?n.a.createElement(M,{config:{message:"WorkPackage API Call Failed",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("h1",null," WorkPackage Reports"),options:ar(this.props,this.state.wpList),columns:tr,data:this.state.data}))}}]),a}(r.Component),nr=a(490),sr=a(428),or=(a(347),function(e){var t=[];e.project.employees.map((function(e){var a={};a.value=e.employee_id,a.label=e.first_name+" "+e.last_name,t.push(a)}));var a=[];return a.push({value:0,label:"Project Level"}),e.wpList.map((function(e){if("L"!==e.work_package_id.substring(e.work_package_id.length-1)){var t={};t.value=e.work_package_id,t.label="WP"+e.work_package_id+": "+e.description,a.push(t)}})),n.a.createElement("form",{autoComplete:"off"},n.a.createElement(et.a,{container:!0,direction:"column",alignItems:"center"},n.a.createElement(et.a,{item:!0},n.a.createElement(At.TextValidator,{component:"span",className:"WPInfowidth",label:"Work Package ID",name:"wpID",value:"WP"+e.wpID,onChange:e.handleChange,disabled:!0,validators:["isRequired"],errorMessages:["Input is required."]})),n.a.createElement(et.a,{item:!0},n.a.createElement(sr.a,{control:n.a.createElement(nr.a,{checked:e.checkedLower,onChange:e.handleCheckboxChange,name:"checkedLower",required:!0}),label:"Lowest Work Package"})),n.a.createElement("br",null),n.a.createElement(et.a,{item:!0},n.a.createElement(At.TextValidator,{component:"span",className:"WPInfowidth",label:"Work Package Name",name:"wpName",value:e.wpName,onChange:e.handleChange,validators:["isRequired"],errorMessages:["Input is required."]})),n.a.createElement("br",null),n.a.createElement(et.a,{item:!0},n.a.createElement(At.TextValidator,{select:!0,label:"Responsible Engineer",className:"WPInfowidth",name:"wpRE",value:e.wpRE,onChange:e.handleChange,validators:["isRequired"],errorMessages:["Input is required."]},t.map((function(e){return n.a.createElement(re.a,{key:e.value,value:e.value},e.label)})))),n.a.createElement("br",null),n.a.createElement(et.a,{item:!0},n.a.createElement(At.TextValidator,{component:"span",className:"WPInfowidth",label:"Parent Project",value:e.project.project_code+": "+e.project.project_name,onChange:e.handleChange,disabled:!0,validators:["isRequired"],errorMessages:["Input is required."]})),n.a.createElement("br",null),n.a.createElement(et.a,{item:!0},n.a.createElement(At.TextValidator,{select:!0,label:"Parent Work Package",className:"WPInfowidth",name:"wpParent",value:e.wpParent,onChange:e.handleChange,validators:["isRequired"],errorMessages:["Input is required."]},a.map((function(e){return n.a.createElement(re.a,{key:e.value,value:e.value},e.label)}))))))}),ir=function(e){return n.a.createElement(ra.a,{multiple:!0,options:e.emps?e.project.employees.filter((function(t){return-1===e.emps.map((function(e){return e.employee_id})).indexOf(t.employee_id)})):e.project.employees,onChange:function(t,a){return e.handleTagsChange(a)},getOptionLabel:function(e){return e.first_name+" "+e.last_name+" ("+e.labor_grade_id.labor_grade_id+")"},disabled:e.isDisabled,renderInput:function(e){return n.a.createElement(ne.a,Object.assign({},e,{variant:"standard",label:"Select Employees"}))}})},lr=Object(Dt.a)((function(e){return{root:{width:"100%"},backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));function cr(e){var t=lr(),a=(JSON.parse(sessionStorage.getItem("user")),Object(r.useState)({wpID:"",wpName:"",wpRE:"",wpParent:"",Desc:"",cost:"",startDate:new Date,endDate:new Date,checkedLower:!1,wpList:e.location.wpList,project:e.location.project,wpEmps:[]})),s=Object(ie.a)(a,2),o=s[0],i=s[1];Object(r.useEffect)((function(){At.ValidatorForm.addValidationRule("isRequired",(function(e){return console.log(e),0===e.length?(y(!1),!1):(y(!0),!0)}))}),[]);var u=n.a.useState(!1),p=Object(ie.a)(u,2),m=p[0],h=p[1],d=n.a.useState(!1),g=Object(ie.a)(d,2),f=g[0],b=g[1],v=Object(r.useState)(!1),E=Object(ie.a)(v,2),j=E[0],y=E[1],k=function(){var t=Object(c.a)(l.a.mark((function t(){var a,r,n,s,i,c,u,p,m,d,g,f,v;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),console.log(a),!o.checkedLower){t.next=20;break}return t.next=5,N.getYearlyRate(a);case 5:for(p in n=t.sent,console.log(n),s=o.cost,i=[],c={},o.wpEmps)c={},m=o.wpEmps[p].labor_grade_id.labor_grade_id,u=!1,i.forEach((function(e){e.id===m&&(e.count++,u=!0)})),u||(c.id=m,c.count=1,n.forEach((function(e){e.labor_grade_id.labor_grade_id===m&&(c.rate=e.charge_rate)})),i.push(c));d=w(s,i),g={},f=[],i.forEach((function(e){(g={}).project_code=o.project.project_code,g.work_package_id=o.wpID,g.type="BUDGET",g.start_date=o.startDate.toISOString().split("T",1)[0],g.end_date=o.endDate.toISOString().split("T",1)[0],g.revision=1,g.labor_grade_id=e.id,g.quantity=e.count,g.plan_hour=d,g.project_wp=o.project.project_code+"_"+o.wpID,f.push(g)})),v=[],o.wpEmps.forEach((function(e){v.push(e)})),r={project:o.project,work_package_id:o.wpID,higher_work_package_id:o.wpParent,responsible_person_id:{employee_id:o.wpRE},is_open:1,description:o.wpName+": "+o.Desc,project_wp:o.project.project_code+"_"+o.wpID,workPackagePlanCollection:f,employees:v},t.next=21;break;case 20:r={project:o.project,work_package_id:o.wpID,higher_work_package_id:o.wpParent,responsible_person_id:{employee_id:o.wpRE},is_open:1,description:o.wpName+": "+o.Desc,project_wp:o.project.project_code+"_"+o.wpID,employees:[]};case 21:return console.log(JSON.stringify(r)),t.prev=22,t.next=25,x.createWorkpackage(r,a);case 25:h(!0),b(!1),t.next=33;break;case 29:t.prev=29,t.t0=t.catch(22),h(!1),b(!1);case 33:setTimeout((function(){b(!1),h(!1),e.history.push("/dashboard/projects")}),1e3);case 34:case"end":return t.stop()}}),t,null,[[22,29]])})));return function(){return t.apply(this,arguments)}}(),w=function(e,t){var a=0,r=0;return t.forEach((function(e){a+=e.rate*e.count,r+=e.count})),a/=r,(parseInt(e)/a/r).toFixed(2)},O=n.a.useState(0),_=Object(ie.a)(O,2),S=_[0],C=_[1],D=["Work-Package Information","Work-Package Description","Budget","Schedule","Employees"];return n.a.createElement("div",{className:t.root},f?n.a.createElement(M,{config:{message:"Work Package Submission Failed",variant:"error"}}):null,m?n.a.createElement(M,{config:{message:"Work Package Submission Successful!",variant:"success"}}):null,n.a.createElement(At.ValidatorForm,{onSubmit:k},n.a.createElement(Tt.a,{activeStep:S,alternativeLabel:!0},D.map((function(e){return n.a.createElement(It.a,{key:e},n.a.createElement(Pt.a,null,e))}))),n.a.createElement("div",null,S===D.length?n.a.createElement("div",null,n.a.createElement(Te.a,{component:"span",className:t.instructions},"All steps completed"),n.a.createElement(H.a,{onClick:function(){C(0)}},"Reset")):n.a.createElement("div",null,n.a.createElement(Te.a,{component:"span",className:t.instructions},function(e,t,a,r,s,o,i){switch(e){case 0:return n.a.createElement(or,{wpList:t.wpList,project:t.project,wpID:t.wpID,wpName:t.wpName,wpRE:t.wpRE,wpParent:t.wpParent,checkedLower:t.checkedLower,handleChange:a,handleCheckboxChange:o});case 1:return n.a.createElement(Rt,{Desc:t.Desc,handleChange:a});case 2:return n.a.createElement(Ft,{cost:t.cost,handleChange:a,isDisabled:!t.checkedLower});case 3:return n.a.createElement(Vt,{startDate:t.startDate,endDate:t.endDate,handleStartChange:r,handleEndChange:s,isDisabled:!t.checkedLower});case 4:return n.a.createElement(ir,{handleTagsChange:i,project:t.project,wpEmps:t.wpEmps,isDisabled:!t.checkedLower})}}(S,o,(function(e){var t=e.target,a=t.name,r=t.value;if(i(Object(Ct.a)({},o,Object(Se.a)({},a,r))),console.log(j),"wpParent"===a){var n=-1,s=o.wpList;for(var l in s.sort(),s)s[l].work_package_id.startsWith(r)&&parseInt(s[l].work_package_id).toString().length===r.length+1&&(n=parseInt(s[l].work_package_id)+1);0===r&&s.forEach((function(e){1===parseInt(e.work_package_id).toString().length&&(n=parseInt(e.work_package_id)+1)})),-1===n&&(n=10*parseInt(r)+1),console.log(n);var c=n;c+=o.checkedLower?"L":"",console.log(c),i(Object(Ct.a)({},o,{wpID:c,wpParent:""===r?"0":r}))}}),(function(e){i(Object(Ct.a)({},o,{startDate:e})),y(!0)}),(function(e){i(Object(Ct.a)({},o,{endDate:e})),y(!0)}),(function(e){var t;i(Object(Ct.a)({},o,(t={},Object(Se.a)(t,e.target.name,e.target.checked),Object(Se.a)(t,"wpID",e.target.checked?o.wpID+"L":o.wpID.replace("L","")),t)))}),(function(e){e.length>0&&y(!0),i(Object(Ct.a)({},o,{wpEmps:e}))}))),n.a.createElement("div",null,n.a.createElement(H.a,{disabled:0===S,onClick:function(){C((function(e){return e-1}))},className:t.backButton},"Back"),S===D.length-1&&n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:k,disabled:!j},"Finish"),S!=D.length-1&&n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:function(){C((function(e){return e+1})),y(!1)},disabled:!j},"Next"))))))}var ur=a(190),pr=a.n(ur),mr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={options:{chart:{id:"basic-bar"},title:{text:"Employee hours spent",align:"center",margin:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"20px",color:"#263238"}},tooltip:{enabled:!0,x:{show:!0,formatter:function(e,t){return r.state.emps[t.dataPointIndex]}}},xaxis:{categories:[],axisBorder:{show:!0,color:"#78909C",height:1,width:"100%",offsetX:0,offsetY:0},title:{text:"Employees",style:{fontSize:"16px",color:"#263238"}}},yaxis:{axisBorder:{show:!0,color:"#78909C",height:1,offsetX:0,offsetY:0},title:{text:"Hours",style:{fontSize:"16px",color:"#263238"}}}},series:[{name:"Hours",data:[]}],emps:[],week:r.props.week},r.handleWeekChange=r.handleWeekChange.bind(Object(m.a)(r)),r.getWeeksMap=r.getWeeksMap.bind(Object(m.a)(r)),r.setGraphValues=r.setGraphValues.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setGraphValues()}},{key:"setGraphValues",value:function(){var e=this,t=[],a=[];this.props.EmpsX.forEach((function(e){t.push(e.employee_id),a.push(e.first_name+" "+e.last_name+" ("+e.labor_grade_id.labor_grade_id+")")}));var r=this.props.wp.project.project_code,n=this.props.wp.work_package_id,s=[];console.log(this.state.week),t.forEach((function(t){var a=0;e.props.EmpsY.forEach((function(s){s.employee.employee_id===t&&s.week===e.state.week&&s.details.forEach((function(e){e.project_code===r&&e.work_package_id===n&&(a+=e.saturday+e.sunday+e.monday+e.tuesday+e.wednesday+e.thursday+e.friday)}))})),s.push(a)})),console.log(s),this.setState((function(e){return{options:Object(Ct.a)({},e.options,{xaxis:Object(Ct.a)({},e.options.xaxis,{categories:t})}),series:[Object(Ct.a)({},e.series,{data:s})],emps:a}}))}},{key:"handleWeekChange",value:function(e){var t=this;console.log(e.target.value),this.setState({week:e.target.value},(function(){return t.setGraphValues()}))}},{key:"getWeeksMap",value:function(){var e=[],t=new Date(this.props.wp.workPackagePlanCollection[0].start_date),a=new Date(this.props.wp.workPackagePlanCollection[0].end_date);console.log(t),console.log(a);var r=t.getDay();r>-1&&r<6&&t.setDate(t.getDate()+(6-r)),a.getDay()<6&&a.setDate(a.getDate()+(6-a.getDay())),console.log(t),console.log(a);for(var n=t;n<=a;)e.push({label:n.toISOString().split("T",1)[0],value:n.getWeek()}),n.setDate(n.getDate()+7);return e}},{key:"render",value:function(){var e=[];return this.props.wp.workPackagePlanCollection.length>0&&(e=this.getWeeksMap()),n.a.createElement("div",{className:"app"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"mixed-chart"},n.a.createElement(ne.a,{select:!0,label:"Week Ending",className:"WPInfowidth",name:"week",value:this.state.week,onChange:this.handleWeekChange},e.map((function(e){return n.a.createElement(re.a,{key:e.value,value:e.value},e.label)}))),n.a.createElement(pr.a,{options:this.state.options,series:this.state.series,type:"bar",width:"500"}))))}}]),a}(n.a.Component),hr=a(282),dr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={series:[],options:{chart:{height:350,type:"line",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},colors:["#fc0303","#035efc","#17b309"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},title:{text:"Budget vs Actual hours spent per labor grade",align:"center"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}},markers:{size:1},xaxis:{categories:[],title:{text:"Labor Grades"}},yaxis:{title:{text:"Hours"}},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}},wp:r.props.wp,tsheets:r.props.tsheets,startDate:"",endDate:""},r.calcValues=r.calcValues.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.calcValues()}},{key:"calcValues",value:function(){var e=this;console.log(this.state.wp);var t=[],a=[],r=[],n=[];this.state.wp.workPackagePlanCollection.forEach((function(e){var r=0;"BUDGET"===e.type?(t.push(e.labor_grade_id),a.push(parseInt(e.plan_hour))):e.revision>r&&(r=e.revision,n[t.indexOf(e.labor_grade_id)]=parseInt(e.plan_hour))}));for(var s=0;s<t.length;s++)r.push(0);console.log(this.state.tsheets),this.state.tsheets.forEach((function(a){a.details.forEach((function(n){console.log(n.project_wp),console.log(e.state.wp.project_wp),n.project_wp===e.state.wp.project_wp&&(r[t.indexOf(a.employee.labor_grade_id.labor_grade_id)]+=parseInt(n.saturday+n.sunday+n.monday+n.tuesday+n.wednesday+n.thursday+n.friday))}))})),console.log(t),console.log(a),console.log(r),console.log(n);var o=new Date(this.state.wp.workPackagePlanCollection[0].start_date).toISOString().split("T",1)[0],i=new Date(this.state.wp.workPackagePlanCollection[0].end_date).toISOString().split("T",1)[0];this.setState((function(e){return{series:[].concat(Object(hr.a)(e.series),[{name:"Budgeted",data:a},{name:"Done",data:r},{name:"Remaining RE estimate",data:n}]),options:Object(Ct.a)({},e.options,{xaxis:Object(Ct.a)({},e.options.xaxis,{categories:t})}),startDate:o,endDate:i}}))}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(pr.a,{options:this.state.options,series:this.state.series,type:"line",height:"500",width:"800"}),n.a.createElement(Te.a,{variant:"h6"},this.state.startDate," - ",this.state.endDate))}}]),a}(n.a.Component),gr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={series:[],options:{chart:{height:350,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight"},title:{text:"RE estimations",align:"left"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{categories:[],title:{text:"Date"}},yaxis:{title:{text:"Hours"}},tooltip:{enabled:!0,y:{show:!0,formatter:function(e,t){return e+" hrs "+r.state.graphValueObj[t.dataPointIndex]}}}},wp:r.props.wp,graphValueObj:[]},r.calcGraphValus=r.calcGraphValus.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.calcGraphValus()}},{key:"calcGraphValus",value:function(){var e=[],t=[],a=[],r={};this.state.wp.workPackagePlanCollection.forEach((function(n){if("ESTIMATE"===n.type){r={};var s=new Date(n.start_date).toISOString().split("T",1)[0];-1===e.indexOf(s)&&(e.push(s),t[e.indexOf(s)]=0,a.push([])),t[e.indexOf(s)]+=n.plan_hour,r.id=n.labor_grade_id,r.hours=n.plan_hour,a[e.indexOf(s)].push(r)}}));var n=[];a.forEach((function(e){var t="";e.forEach((function(e){t+=e.id+": "+e.hours})),n.push(t)})),this.setState((function(a){return{series:[].concat(Object(hr.a)(a.series),[{name:"RE estimate",data:t}]),options:Object(Ct.a)({},a.options,{xaxis:Object(Ct.a)({},a.options.xaxis,{categories:e})}),graphValueObj:n}})),console.log(e),console.log(t),console.log(a)}},{key:"render",value:function(){return n.a.createElement(pr.a,{options:this.state.options,series:this.state.series,type:"line",height:"500",width:"800"})}}]),a}(n.a.Component),fr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).handleTagsChange=function(e){console.log(e),r.setState({selectEmps:e},console.log(r.state.selectEmps))},r.state={wp:r.props.location.state.wp,isProjManager:r.props.location.state.isPM,isRE:!!r.props.location.state.isRE&&r.props.location.state.isRE,emps:[],timesheets:[],week:0,openModal:!1,selectDisabled:!0,selectEmps:[]},r.openModal=r.openModal.bind(Object(m.a)(r)),r.calcValuesEmpHours=r.calcValuesEmpHours.bind(Object(m.a)(r)),r.handleTagsChange=r.handleTagsChange.bind(Object(m.a)(r)),r.submitNewEmployees=r.submitNewEmployees.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"openModal",value:function(){this.setState({openModal:!0})}},{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.wp.work_package_id.includes("L")){e.next=3;break}return e.next=3,this.calcValuesEmpHours();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calcValuesEmpHours",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=[],this.state.wp.employees.forEach((function(e){a.push(e.employee_id)})),e.next=5,S.getTimesheetsByEmps(a.toString(),t);case 5:r=e.sent,n=new Date,s=n.getWeek(),n.getDay()>0&&n.getDay()<6&&s--,this.setState({emps:this.state.wp.employees,week:s,timesheets:r}),console.log(r);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"submitNewEmployees",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SUbmit"),t=this.state.wp,this.state.selectEmps.forEach((function(e){return t.employees.push(e)})),console.log(t),this.setState({wp:t,selectDisabled:!0},console.log(this.state.wp)),a=localStorage.getItem("token"),e.next=8,x.updateWorkpackage(t,a);case 8:r=e.sent,console.log(r);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(et.a,{container:!0,spacing:3},n.a.createElement(et.a,{item:!0,xs:12,sm:6,className:"gridBorder"},n.a.createElement(Te.a,{variant:"h4"},this.state.wp.description.split(":",1)[0]),n.a.createElement(Te.a,{variant:"h6"},this.state.wp.description.split(":",2)[1]?this.state.wp.description.split(":",2)[1]:"")),n.a.createElement(n.a.Fragment,null,n.a.createElement(et.a,{item:!0,xs:12,sm:3},n.a.createElement(Te.a,{variant:"h6"},"Responsible Engineer:"),n.a.createElement(et.a,{container:!0,direction:"row",alignItems:"center"},n.a.createElement(et.a,{item:!0,className:"projectDetailsMargin"},n.a.createElement(be.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},this.state.wp.responsible_person_id.first_name.slice(0,1).toUpperCase(),this.state.wp.responsible_person_id.last_name.slice(0,1).toUpperCase())),n.a.createElement(et.a,{item:!0},n.a.createElement(Te.a,null,this.state.wp.responsible_person_id.first_name+" "+this.state.wp.responsible_person_id.last_name)))),n.a.createElement(et.a,{item:!0,xs:6,sm:3},n.a.createElement(Te.a,{variant:"h6"},"Team:"),n.a.createElement(et.a,{container:!0,direction:"row",alignItems:"center"},this.state.wp.employees.slice(0,5).map((function(e){return n.a.createElement(et.a,{item:!0,className:"projectDetailsMargin"},n.a.createElement(A.a,{title:e.first_name+" "+e.last_name},n.a.createElement(be.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},e.first_name.slice(0,1).toUpperCase(),e.last_name.slice(0,1).toUpperCase())))})),this.state.wp.employees.length>5&&n.a.createElement(n.a.Fragment,null,n.a.createElement(H.a,{onClick:this.openModal},"Show More"),n.a.createElement(Va,{open:this.state.openModal,members:this.state.wp.employees})),this.state.selectDisabled&&this.state.isProjManager&&this.state.wp.work_package_id.includes("L")&&n.a.createElement(H.a,{onClick:function(){console.log("clicked"),e.setState({selectDisabled:!1})}},"Assign Employees"),!this.state.selectDisabled&&this.state.isProjManager&&this.state.wp.work_package_id.includes("L")&&n.a.createElement(n.a.Fragment,null,n.a.createElement(ir,{handleTagsChange:this.handleTagsChange,project:this.state.wp.project,isDisabled:!1,emps:this.state.emps}),n.a.createElement(H.a,{onClick:this.submitNewEmployees},"Add")))))),this.state.isProjManager&&this.state.emps.length>0&&this.state.wp.work_package_id.includes("L")&&n.a.createElement(n.a.Fragment,null,n.a.createElement(mr,{EmpsX:this.state.emps,week:this.state.week,EmpsY:this.state.timesheets,wp:this.state.wp}),n.a.createElement("br",null),n.a.createElement(dr,{tsheets:this.state.timesheets,wp:this.state.wp}),n.a.createElement("br",null)),this.state.isRE&&n.a.createElement(n.a.Fragment,null,n.a.createElement(dr,{tsheets:this.state.timesheets,wp:this.state.wp}),n.a.createElement("br",null),n.a.createElement(gr,{wp:this.state.wp}),n.a.createElement("br",null),n.a.createElement(H.a,{color:"primary",component:D.b,to:{pathname:"/newIterationPlan",wp:this.state.wp}},"New Plan")))}}]),a}(n.a.Component),br=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).clickAssign=function(){e.props.history.push("/dashboard/tsapprover/assign")},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{title:"Assign an employee to as a timesheet approver"},n.a.createElement(H.a,{className:e.iconButton,onClick:this.clickAssign,color:"primary",variant:"contained"},"Assign")))}}]),a}(n.a.Component),vr=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(br),Er=[{name:"employeeId",label:"Employee ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"}],jr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[],errorAlert:!1},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getEmployees",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),r=[],!sessionStorage.getItem("is_supervisor")){e.next=16;break}return e.prev=4,e.next=7,w.getEmployeesBySupervisor(a.employee_id,t);case 7:n=e.sent,e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(4),this.setState({errorAlert:!0}),setTimeout((function(){i.setState({errorAlert:!1}),i.props.history.push("/dashboard/".concat(a.employee_id))}),1e3),e.abrupt("return",[]);case 15:for(s=0;s<n.length;s++)r.push(n[s]);case 16:if(1!=a.is_secondary_approver){e.next=29;break}return e.prev=17,e.next=20,w.getEmployeesBySupervisor(a.supervisor_id,t);case 20:o=e.sent,e.next=28;break;case 23:return e.prev=23,e.t1=e.catch(17),this.setState({errorAlert:!0}),setTimeout((function(){i.setState({errorAlert:!1}),i.props.history.push("/dashboard/".concat(a.employee_id))}),1e3),e.abrupt("return",[]);case 28:for(s=0;s<o.length;s++)r.push(o[s]);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,this,[[4,10],[17,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,this.getEmployees();case 3:for(t=e.sent,a=[],r=0;r<t.length;r++)n=t[r].employee_id,s=t[r].first_name,o=t[r].last_name,(i=[]).push(n),i.push(s),i.push(o),a.push(i);this.setState({data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.props.classes;return n.a.createElement("div",null,this.state.errorAlert?n.a.createElement(M,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("h1",null,"Employees"),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,onRowClick:function(t,a){localStorage.setItem("name",t[1]+" "+t[2]),e.props.history.push("/dashboard/tsapprover/".concat(t[0]))},customToolbar:function(){if("true"==sessionStorage.getItem("is_supervisor"))return n.a.createElement(n.a.Fragment,null,n.a.createElement(vr,{history:e.props.history}))}}),columns:Er,data:this.state.data}))}}]),a}(r.Component),yr=[{name:"timesheetid",label:"Timesheet ID",className:"column",options:{filter:!1}},{name:"weeknumber",label:"Week Number",className:"column",options:{filter:!1}},{name:"weekending",label:"Week Ending",className:"column",options:{sort:!0,filter:!1}}],kr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={timesheets:[],loadedUserID:{},errorAlert:!1},r.fetchTimesheets=r.fetchTimesheets.bind(Object(m.a)(r)),r.formatWeekEnding=r.formatWeekEnding.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchTimesheets(),this.formatWeekEnding()}},{key:"fetchTimesheets",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,u,p=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=this.props.match.params.id,e.prev=2,e.next=5,S.getAllCloseTimesheetsByEmp(a,t);case 5:r=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),this.setState({errorAlert:!0}),setTimeout((function(){p.setState({errorAlert:!1}),p.props.history.push("/dashboard/tsapprover/")}),1e3),e.abrupt("return",[]);case 13:if(0!=r.length){for(n=[],s=0;s<r.length;s++)o=r[s].timesheet_id,i=r[s].week,c=this.formatWeekEnding(r[s].week_ending),(u=[]).push(o),u.push(i),u.push(c),n.push(u);n.sort((function(e,t){return t[1]-e[1]})),this.setState({timesheets:n,loadedUserID:a})}else console.log("no timesheets");case 14:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"formatWeekEnding",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.state.errorAlert?n.a.createElement(M,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("h1",null,"Timesheets To Approve For ",localStorage.name),options:(e=this.props,this.state,this.fetchTimesheets,{selectableRows:!1,search:!0,print:!1,download:!1,rowHover:!0,onRowClick:function(t){e.history.push("/dashboard/tsapprover/".concat(e.match.params.id,"/").concat(t[0])),localStorage.setItem("timesheetId",t[0])}}),columns:yr,data:this.state.timesheets}));var e}}]),a}(r.Component),wr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={errorAlert:!1},r.getCurrentDate=r.getCurrentDate.bind(Object(m.a)(r)),r.approveTimesheet=r.approveTimesheet.bind(Object(m.a)(r)),r.rejectTimesheet=r.rejectTimesheet.bind(Object(m.a)(r)),r.errorHandling=r.errorHandling.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"getCurrentDate",value:function(){return(new Date).getTime()}},{key:"errorHandling",value:function(){var e=this;this.setState({errorAlert:!0}),setTimeout((function(){e.setState({errorAlert:!1}),e.props.history.push("/dashboard/tsapprover/".concat(e.props.match.params.id))}),1e3)}},{key:"approveTimesheet",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),r=this.props.match.params,e.prev=3,e.next=6,S.getTimesheetById(r.id,t,r.tsid);case 6:n=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),this.errorHandling(),e.abrupt("return");case 13:return n.status="APPROVED",n.approver_id=a.employee_id,n.approve_date=this.getCurrentDate(),e.prev=16,e.next=19,S.updateTimesheetById(r.id,t,r.tsid,n);case 19:e.next=25;break;case 21:return e.prev=21,e.t1=e.catch(16),this.errorHandling(),e.abrupt("return");case 25:this.props.history.push("/dashboard/tsapprover/".concat(r.id));case 26:case"end":return e.stop()}}),e,this,[[3,9],[16,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"rejectTimesheet",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),r=this.props.match.params,e.prev=3,e.next=6,S.getTimesheetById(r.id,t,r.tsid);case 6:n=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),this.errorHandling(),e.abrupt("return");case 13:return n.status="OPEN",n.approver_id=a.employee_id,n.approve_date=this.getCurrentDate(),e.prev=16,e.next=19,S.updateTimesheetById(r.id,t,r.tsid,n);case 19:e.sent,e.next=26;break;case 22:return e.prev=22,e.t1=e.catch(16),this.errorHandling(),e.abrupt("return");case 26:this.props.history.push("/dashboard/tsapprover/".concat(r.id));case 27:case"end":return e.stop()}}),e,this,[[3,9],[16,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.state.errorAlert?n.a.createElement(M,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,n.a.createElement(oe,Object.assign({loadedUser:this.props.match.params.tsid},this.props)),n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:this.approveTimesheet},"Approve"),n.a.createElement(H.a,{variant:"contained",color:"secondary",onClick:this.rejectTimesheet},"Reject"))}}]),a}(r.Component),Or=[{name:"employeeId",label:"Employee ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"},{name:"approverStatus",label:"Approver Status",className:"column"},{name:"assign",label:"Assign",className:"column"}],_r=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={data:[],errorAlert:!1},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r.errorHandling=r.errorHandling.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"errorHandling",value:function(){var e=this;this.setState({errorAlert:!0}),setTimeout((function(){e.setState({errorAlert:!1}),e.props.history.push("/dashboard/tsapprover/")}),1e3)}},{key:"getEmployees",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),e.prev=2,e.next=5,w.getEmployeesBySupervisor(a.employee_id,t);case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),this.errorHandling(),e.abrupt("return",[]);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"setApprover",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.is_secondary_approver=!0,a=localStorage.getItem("token"),e.prev=2,e.next=5,w.updateEmployee(t.employee_id,a,t);case 5:e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),this.errorHandling(),e.abrupt("return");case 12:this.props.history.push("/dashboard/tsapprover/");case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeApprover",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.is_secondary_approver=!1,a=localStorage.getItem("token"),e.prev=2,e.next=5,w.updateEmployee(t.employee_id,a,t);case 5:e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),this.errorHandling(),e.abrupt("return");case 12:this.props.history.push("/dashboard/tsapprover/");case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,s,o=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,this.getEmployees();case 3:for(t=e.sent,a=[],r=function(e){var r=t[e].employee_id,s=t[e].first_name,i=t[e].last_name,l=t[e].is_secondary_approver.toString(),c=[];c.push(r),c.push(s),c.push(i),c.push(l),t[e].is_secondary_approver?c.push(n.a.createElement(H.a,{variant:"contained",color:"secondary",onClick:function(){return o.removeApprover(t[e])}},"Remove")):c.push(n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:function(){return o.setApprover(t[e])}},"Assign")),a.push(c)},s=0;s<t.length;s++)r(s);this.setState({data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){this.props.classes;return n.a.createElement("div",null,this.state.errorAlert?n.a.createElement(M,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("h1",null,"Secondary Timesheet Approver"),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1}),columns:Or,data:this.state.data}))}}]),a}(r.Component),Sr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e,t=this;switch(this.props.config.option){case"dashboard":e=n.a.createElement(T.d,null,n.a.createElement(T.b,{path:"/dashboard/timesheet",exact:!0,render:function(e){return n.a.createElement(V,Object.assign({},e,{sessionLogoutHandler:t.props.config.sessionLogoutHandler}))}}),n.a.createElement(T.b,{path:"/dashboard/timesheet/:id",exact:!0,render:function(e){return n.a.createElement(oe,Object.assign({loadedUser:t.props.config.loadedUser,logoutHandler:t.props.logoutHandler,sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/hr",exact:!0,render:function(e){return n.a.createElement(_e,Object.assign({loadedUser:t.props.config.loadedUser,sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/profile/:id",exact:!0,render:function(e){return n.a.createElement(xa,Object.assign({hr:!1,loadedUser:t.props.config.loadedUser,sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{exact:!0,path:"/dashboard/hr/create",render:function(e){return n.a.createElement(Fa,Object.assign({hr:!0,createEmployee:!0,loadedUser:t.props.config.loadedUser,sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/hr/:id",exact:!0,render:function(e){return n.a.createElement(xa,Object.assign({hr:!0,createEmployee:!1,loadedUser:t.props.config.loadedUser,sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/supervisor",exact:!0,render:function(e){return n.a.createElement(aa,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/supervisor/remove",exact:!0,render:function(e){return n.a.createElement(sa,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/supervisor/assign",exact:!0,render:function(e){return n.a.createElement(ia,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/supervisor/:id",exact:!0,render:function(e){return n.a.createElement(ca,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/tsapprover",exact:!0,render:function(e){return n.a.createElement(jr,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/tsapprover/assign",exact:!0,render:function(e){return n.a.createElement(_r,e)}}),n.a.createElement(T.b,{path:"/dashboard/tsapprover/:id",exact:!0,render:function(e){return n.a.createElement(kr,e)}}),n.a.createElement(T.b,{path:"/dashboard/tsapprover/:id/:tsid",exact:!0,render:function(e){return n.a.createElement(wr,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/projects",exact:!0,render:function(e){return n.a.createElement(xt,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/createProject",exact:!0,render:function(e){return n.a.createElement(Gt,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/projectDetails",exact:!0,render:function(e){return n.a.createElement(er,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/createWorkpackage",exact:!0,render:function(e){return n.a.createElement(cr,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/workpackageDetail",exact:!0,render:function(e){return n.a.createElement(fr,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/newIterationPlan",exact:!0,render:function(e){return n.a.createElement(Ua,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/lead",exact:!0,render:function(e){return n.a.createElement(rr,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/:id",exact:!0,render:function(e){return n.a.createElement(Zt,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler,token:t.props.token},e))}}));break;case"login":e=n.a.createElement(T.d,null,n.a.createElement(T.b,{path:"/",exact:!0,render:function(e){return n.a.createElement(Ne,Object.assign({},e,{loginHandler:t.props.config.loginHandler}))}}));break;case"authentication":e=n.a.createElement(T.d,null,n.a.createElement(T.b,{path:"/dashboard",render:function(e){return n.a.createElement(wt,Object.assign({token:t.props.token},e,{sessionLogoutHandler:t.props.config.sessionLogoutHandler,logoutHandler:t.props.config.logoutHandler,loadedUser:t.props.config.loadedUser,breadCrumbs:t.props.config.breadCrumbs}))}}));break;default:e=n.a.createElement(T.d,null,n.a.createElement(T.b,{path:"/",exact:!0,render:function(e){return n.a.createElement(Ne,Object.assign({},e,{loginHandler:t.props.config.loginHandler}))}}))}return n.a.createElement("div",null,e)}}]),a}(r.Component),Nr=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={isAuth:!1,loadedUser:null,token:null,errorAlert:!1,successAlert:!1,sessionAlert:!1},r.loginHandler=r.loginHandler.bind(Object(m.a)(r)),r.logoutHandler=r.logoutHandler.bind(Object(m.a)(r)),r.setAutoLogout=r.setAutoLogout.bind(Object(m.a)(r)),r.sessionHandler=r.sessionHandler.bind(Object(m.a)(r)),r.sessionLogoutHandler=r.sessionLogoutHandler.bind(Object(m.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.sessionHandler()}},{key:"sessionHandler",value:function(){var e=sessionStorage.getItem("logged"),t=localStorage.getItem("token"),a=localStorage.getItem("expiryDate");if(e){if(!t||!a)return this.setState({isAuth:!1}),void this.sessionLogoutHandler();var r=new Date(a).getTime()-(new Date).getTime();this.setAutoLogout(r),this.setState({isAuth:!0,loadedUser:JSON.parse(sessionStorage.getItem("user"))})}else this.logoutHandler()}},{key:"loginHandler",value:function(){var e=Object(c.a)(l.a.mark((function e(t,a){var r,n,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.login(a);case 4:r=e.sent,this.setState({isAuth:!0,loadedUser:r.loadedUser,token:r.token,errorAlert:!1,successAlert:!0}),36e5,n=new Date((new Date).getTime()+36e5),localStorage.setItem("expiryDate",n.toISOString()),localStorage.setItem("token",r.token),sessionStorage.setItem("user",JSON.stringify(r.loadedUser)),sessionStorage.setItem("is_supervisor",r.is_supervisor),sessionStorage.setItem("logged",!0),this.setAutoLogout(36e5),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),e.t0.response.status!==ye.BAD_REQUEST&&e.t0.response.status!==ye.UNAUTHORIZED||this.setState({errorAlert:!0,successAlert:!1});case 19:setTimeout((function(){s.setState({successAlert:!1,errorAlert:!1})}),1e3);case 20:case"end":return e.stop()}}),e,this,[[1,16]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"sessionLogoutHandler",value:function(){var e=this;this.setState({isAuth:!1,loadedUser:null,sessionAlert:!0}),localStorage.removeItem("expiryDate"),localStorage.removeItem("token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("logged"),setTimeout((function(){e.setState({sessionAlert:!1,errorAlert:!1})}),1e3)}},{key:"logoutHandler",value:function(){this.setState({isAuth:!1,loadedUser:null}),localStorage.removeItem("expiryDate"),localStorage.removeItem("token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("logged")}},{key:"setAutoLogout",value:function(e){var t=this;setTimeout((function(){t.logoutHandler()}),e)}},{key:"render",value:function(){var e,t=this,a=function(e){return{option:e,loginHandler:t.loginHandler,logoutHandler:t.logoutHandler,loadedUser:t.state.loadedUser,sessionLogoutHandler:t.sessionLogoutHandler}};if(this.state.isAuth){var r=null;r=null==localStorage.getItem("token")?this.state.token:localStorage.getItem("token"),e=n.a.createElement(Sr,Object.assign({},this.props,{config:a("authentication"),token:r}))}else e=n.a.createElement(Sr,Object.assign({},this.props,{config:a("login")}));return n.a.createElement("div",{className:"App"},this.state.sessionAlert?n.a.createElement(M,{config:{message:"Session Expired",variant:"error"}}):null,this.state.errorAlert?n.a.createElement(M,{config:{message:"Login Failed",variant:"error"}}):null,this.state.successAlert?n.a.createElement(M,{config:{message:"Login Success!",variant:"success"}}):null,n.a.createElement(D.a,null,this.state.isAuth?n.a.createElement(T.a,{to:"/dashboard/".concat(this.state.loadedUser.employee_id)}):n.a.createElement(T.a,{to:"/"}),e))}}]),a}(r.Component);o.a.render(n.a.createElement(Nr,null),document.getElementById("root"))}},[[530,1,2]]]);
//# sourceMappingURL=main.fe51d37f.chunk.js.map