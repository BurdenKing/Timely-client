(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{243:function(e,t,a){},244:function(e,t,a){},257:function(e,t,a){e.exports=a.p+"static/media/logo.91005679.png"},319:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){},438:function(e,t,a){},443:function(e,t,a){},444:function(e,t){e.exports=[{value:0,label:"P6",name:"P-level 6"},{value:1,label:"P5",name:"P-level 5"},{value:2,label:"P4",name:"P-level 4"},{value:3,label:"P3",name:"P-level 3"},{value:4,label:"P2",name:"P-level 2"},{value:5,label:"P1",name:"P-level 1"},{value:6,label:"DS",name:"DS level"},{value:7,label:"JS",name:"JS level"}]},532:function(e,t,a){e.exports=a(950)},537:function(e,t,a){},580:function(e,t,a){},581:function(e,t,a){},584:function(e,t,a){},586:function(e,t,a){var r={"./af-ZA.js":587,"./ar-AE.js":588,"./ar-BH.js":589,"./ar-DZ.js":590,"./ar-EG.js":591,"./ar-IQ.js":592,"./ar-JO.js":593,"./ar-KW.js":594,"./ar-LB.js":595,"./ar-LY.js":596,"./ar-MA.js":597,"./ar-OM.js":598,"./ar-QA.js":599,"./ar-SA.js":600,"./ar-SY.js":601,"./ar-TN.js":602,"./ar-YE.js":603,"./az-Cyrl-AZ.js":604,"./az-Latn-AZ.js":605,"./be-BY.js":606,"./bg-BG.js":607,"./bs-Latn-BA.js":608,"./ca-ES.js":609,"./cs-CZ.js":610,"./cy-GB.js":611,"./da-DK.js":612,"./de-AT.js":613,"./de-CH.js":614,"./de-DE.js":615,"./de-LI.js":616,"./de-LU.js":617,"./dv-MV.js":618,"./el-GR.js":619,"./en-029.js":620,"./en-AU.js":621,"./en-BZ.js":622,"./en-CA.js":623,"./en-GB.js":624,"./en-IE.js":625,"./en-JM.js":626,"./en-NZ.js":627,"./en-PH.js":628,"./en-TT.js":629,"./en-ZA.js":630,"./en-ZW.js":631,"./es-AR.js":632,"./es-BO.js":633,"./es-CL.js":634,"./es-CO.js":635,"./es-CR.js":636,"./es-DO.js":637,"./es-EC.js":638,"./es-ES.js":639,"./es-GT.js":640,"./es-HN.js":641,"./es-MX.js":642,"./es-NI.js":643,"./es-PA.js":644,"./es-PE.js":645,"./es-PR.js":646,"./es-PY.js":647,"./es-SV.js":648,"./es-UY.js":649,"./es-VE.js":650,"./et-EE.js":651,"./eu-ES.js":652,"./fa-IR.js":653,"./fi-FI.js":654,"./fo-FO.js":655,"./fr-BE.js":656,"./fr-CA.js":657,"./fr-CH.js":658,"./fr-FR.js":659,"./fr-LU.js":660,"./fr-MC.js":661,"./gl-ES.js":662,"./gu-IN.js":663,"./he-IL.js":664,"./hi-IN.js":665,"./hr-BA.js":666,"./hr-HR.js":667,"./hu-HU.js":668,"./hy-AM.js":669,"./id-ID.js":670,"./is-IS.js":671,"./it-CH.js":672,"./it-IT.js":673,"./ja-JP.js":674,"./ka-GE.js":675,"./kk-KZ.js":676,"./kn-IN.js":677,"./ko-KR.js":678,"./kok-IN.js":679,"./ky-KG.js":680,"./lt-LT.js":681,"./lv-LV.js":682,"./mi-NZ.js":683,"./mk-MK.js":684,"./mn-MN.js":685,"./mr-IN.js":686,"./ms-BN.js":687,"./ms-MY.js":688,"./mt-MT.js":689,"./nb-NO.js":690,"./nl-BE.js":691,"./nl-NL.js":692,"./nn-NO.js":693,"./ns-ZA.js":694,"./pa-IN.js":695,"./pl-PL.js":696,"./pt-BR.js":697,"./pt-PT.js":698,"./quz-BO.js":699,"./quz-EC.js":700,"./quz-PE.js":701,"./ro-RO.js":702,"./ru-RU.js":703,"./sa-IN.js":704,"./se-FI.js":705,"./se-NO.js":706,"./se-SE.js":707,"./sk-SK.js":708,"./sl-SI.js":709,"./sma-NO.js":710,"./sma-SE.js":711,"./smj-NO.js":712,"./smj-SE.js":713,"./smn-FI.js":714,"./sms-FI.js":715,"./sq-AL.js":716,"./sr-Cyrl-BA.js":717,"./sr-Cyrl-CS.js":718,"./sr-Latn-BA.js":719,"./sr-Latn-CS.js":720,"./sv-FI.js":721,"./sv-SE.js":722,"./sw-KE.js":723,"./syr-SY.js":724,"./ta-IN.js":725,"./te-IN.js":726,"./th-TH.js":727,"./tn-ZA.js":728,"./tr-TR.js":729,"./tt-RU.js":730,"./uk-UA.js":731,"./ur-PK.js":732,"./uz-Cyrl-UZ.js":733,"./uz-Latn-UZ.js":734,"./vi-VN.js":735,"./xh-ZA.js":736,"./zh-CN.js":737,"./zh-HK.js":738,"./zh-MO.js":739,"./zh-SG.js":740,"./zh-TW.js":741,"./zu-ZA.js":742};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=586},754:function(e,t,a){},755:function(e,t,a){e.exports=a.p+"static/media/sideBarBackgroundImage.6b5281c0.png"},756:function(e,t,a){},764:function(e,t,a){},765:function(e,t,a){},766:function(e,t,a){},767:function(e,t,a){},772:function(e,t){},774:function(e,t){},812:function(e,t){},813:function(e,t){},945:function(e,t,a){},947:function(e,t,a){},948:function(e,t,a){},949:function(e,t,a){},950:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(32),o=a.n(s),i=(a(537),a(9)),l=a.n(i),c=a(21),p=a(12),u=a(13),m=a(8),d=a(14),h=a(15),f=a(141),g=a.n(f);g.a.defaults.baseURL="http://localhost:8080/timely/api/",g.a.defaults.baseURL="http://timely-server-timely-wildfly.apps.shift.infoteach.ca/api/";var b=function(e){return e.data},v=function(e){return{headers:{Authorization:"Bearer "+e}}},j=function(e,t){return g.a.get(e,v(t)).then(b)},E=function(e,t,a){return g.a.post(e,a,v(t)).then(b)},y=function(e,t,a){return g.a.put(e,a,v(t)).then(b)},k=function(e,t){return g.a.post(e,t).then(b)},w={getEmployeeById:function(e,t){return j("/emps/".concat(e),t)},getAllEmployees:function(e){return j("/emps",e)},createEmployee:function(e,t){return E("/emps/",e,t)},updateEmployee:function(e,t,a){return y("/emps/".concat(e),t,a)},getCurrentUser:function(e,t){return j("/emps/".concat(e),t)},getEmployeesBySupervisor:function(e,t){return j("/emps/supervisor/".concat(e),t)}},x={login:function(e){return k("/tokens",e)}},O={getAllProjects:function(e){return j("/projects",e)},getProjectsForUser:function(e,t){return j("/projects/emp/".concat(e),t)},getProjectsForSupervisor:function(e,t){return j("projects/supervisor/".concat(e),t)},createProject:function(e,t){return E("/projects/createProject",t,e)},updateProject:function(e,t){return E("/projects/updateProject/",t,e)},getDetailsById:function(e,t){return j("/projects/projectDetails/".concat(e),t)},getById:function(e,t){return j("/projects/".concat(e),t)}},N={getAllTimesheetsByEmp:function(e,t){return j("/emps/".concat(e,"/timesheets/"),t)},getAllCloseTimesheetsByEmp:function(e,t){return j("/emps/".concat(e,"/close_timesheets"),t)},getTimesheetById:function(e,t,a){return j("/emps/".concat(e,"/timesheets/").concat(a),t)},createCurrentWeekTimesheet:function(e,t,a){return E("emps/".concat(e,"/timesheets/"),t,a)},getTimesheetsByEmps:function(e,t){return j("/timesheets/getForEmps/".concat(e),t)},updateTimesheetById:function(e,t,a,r){return y("/emps/".concat(e,"/timesheets/").concat(a),t,r)}},S={getYearlyRate:function(e){return j("/yearlyRate",e)}},_={createWorkpackage:function(e,t){return E("/workpackages/createWP",t,e)},updateWorkpackage:function(e,t){return y("/workpackages",t,e)},getAllWorkpackageFromRE:function(e,t){return j("/workpackages/RE/".concat(e),t)}},C={createNewPlan:function(e,t){return E("/workpackageplans",t,e)}},D=a(52),T=a(138),I=a(55),P=a.n(I),A=a(427),L=a(7),H=a(354),M=a(370);function R(e){var t=Object(M.useSnackbar)().enqueueSnackbar,a=e.config,r=t(a.message,{variant:a.variant,autoHideDuration:2500});return n.a.createElement(n.a.Fragment,null,r)}function W(e){return n.a.createElement(M.SnackbarProvider,{preventDuplicate:!0},n.a.createElement(R,e))}var F=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).handleClick=function(){if(0==r.props.states.timesheets.length)r.createCurrentTimesheet();else if(r.hasCurrentTimesheet()){var e=r.props.states.timesheets[0][0],t=r.props.states.timesheets[0][1],a=r.props.states.timesheets[0][2];r.props.history.push("/dashboard/timesheet/".concat(e)),localStorage.setItem("timesheetId",e),localStorage.setItem("weekNumber",t),localStorage.setItem("weekEnding",a)}else r.createCurrentTimesheet()},r.state={errorAlert:!1},r.createCurrentTimesheet=r.createCurrentTimesheet.bind(Object(m.a)(r)),r.hasCurrentTimesheet=r.hasCurrentTimesheet.bind(Object(m.a)(r)),r.currentDate=r.currentDate.bind(Object(m.a)(r)),r.handleClick=r.handleClick.bind(Object(m.a)(r)),r.currentWeekNumber=r.currentWeekNumber.bind(Object(m.a)(r)),r.getFridayOfCurrentWeek=r.getFridayOfCurrentWeek.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"currentDate",value:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}},{key:"getFridayOfCurrentWeek",value:function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1),a=t.getDate()-t.getDay()-1+6;return new Date(e.setDate(a))}},{key:"currentWeekNumber",value:function(){var e=new Date,t=new Date(e.getFullYear(),0,1),a=(e.getTime()-t.getTime())/864e5;return Math.ceil((a+t.getDay()+1.1)/7)}},{key:"hasCurrentTimesheet",value:function(){var e=this.props.states.timesheets;return!(this.currentWeekNumber()-e[0][1]>0)}},{key:"createCurrentTimesheet",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,p,u=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),a=localStorage.getItem("token"),r=t.employee_id,e.prev=3,e.next=6,w.getCurrentUser(r,a);case 6:n=e.sent,e.next=14;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({errorAlert:!0}),setTimeout((function(){u.setState({errorAlert:!1})}),1e3),this.props.sessionLogoutHandler();case 14:return s=n.labor_grade_id.labor_grade_id,o=(new Date).getFullYear(),i=this.currentWeekNumber(),c=this.getFridayOfCurrentWeek(),p={labor_grade_id:s,year:o,week:i,week_ending:c,status:"OPEN",approver_id:3,approve_date:null,attribute1:null,details:[{project_code:" ",work_package_id:" ",saturday:0,sunday:0,monday:0,tuesday:0,wednesday:0,thursday:0,friday:0,notes:"",project_wp:"PJT38001_1L"}]},e.prev=19,e.next=22,N.createCurrentWeekTimesheet(r,a,p);case 22:e.sent,this.props.fetchTimesheets(),e.next=31;break;case 26:e.prev=26,e.t1=e.catch(19),this.setState({errorAlert:!0}),setTimeout((function(){u.setState({errorAlert:!1})}),1e3),this.props.sessionLogoutHandler();case 31:case"end":return e.stop()}}),e,this,[[3,9],[19,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,this.state.errorAlert?n.a.createElement(W,{config:{message:"Fetching Timesheets API Call Failed",variant:"error"}}):null,n.a.createElement(A.a,{title:"Create Current Timesheet"},n.a.createElement(H.a,{className:e.iconButton,onClick:this.handleClick,color:"primary",variant:"contained"},"Current Timesheet")))}}]),a}(n.a.Component),U=Object(L.a)({iconButton:{marginLeft:30}},{name:"CurrentTimesheetToolBar"})(F),B=(a(580),a(262)),z=a(981),V=[{name:"timesheetid",label:"Timesheet ID",className:"column",options:{filter:!1}},{name:"weeknumber",label:"Week Number",className:"column",options:{filter:!1}},{name:"weekending",label:"Week Ending",className:"column",options:{sort:!0,filter:!1}}],G=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).getCustomTheme=function(){return Object(B.a)({overrides:{MUIDataTable:{paper:{padding:"45px"}},MUIDataTableToolbar:{root:{padding:"0 0 0 15px"},titleText:{fontSize:"16px",fontWeight:"bold"}},MUIDataTableHeadCell:{data:{fontSize:"16px"}},MUIDataTableBodyCell:{root:{fontSize:"16px"}}}})},r.state={timesheets:[],loadedUserID:{},errorAlert:!1},r.fetchTimesheets=r.fetchTimesheets.bind(Object(m.a)(r)),r.formatWeekEnding=r.formatWeekEnding.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchTimesheets(),this.formatWeekEnding()}},{key:"fetchTimesheets",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,p,u,m,d=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),a=localStorage.getItem("token"),r=t.employee_id,e.prev=3,e.next=6,N.getAllTimesheetsByEmp(r,a);case 6:if(0!=(n=e.sent).length){for(s=[],o=0;o<n.length;o++)i=n[o].timesheet_id,c=n[o].week,p=this.formatWeekEnding(n[o].week_ending),u=n[o].status,(m=[]).push(i),m.push(c),m.push(p),m.push(u),s.push(m);s.sort((function(e,t){return t[1]-e[1]})),this.setState({timesheets:s,loadedUserID:r})}e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({errorAlert:!0}),this.props.sessionLogoutHandler();case 14:setTimeout((function(){d.setState({errorAlert:!1})}),1e3);case 15:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"formatWeekEnding",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"render",value:function(){return n.a.createElement("div",{className:"timesheetPortal-container"},n.a.createElement(z.a,{theme:this.getCustomTheme()},this.state.errorAlert?n.a.createElement(W,{config:{message:"Fetching Timesheets API Call Failed",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:"Timesheet Information",options:(e=this.props,t=this.state,a=this.fetchTimesheets,{selectableRows:!1,search:!0,print:!1,download:!1,rowHover:!0,onRowClick:function(t){e.history.push("/dashboard/timesheet/".concat(t[0])),localStorage.setItem("timesheetId",t[0])},customToolbar:function(){return n.a.createElement(U,Object.assign({},e,{fetchTimesheets:a,states:t}))}}),columns:V,data:this.state.timesheets})));var e,t,a}}]),a}(r.Component),K=a(422),q=a(423),J=a(424),Y=a(1e3),Z=a(426),X=a(425),Q=(a(581),a(361)),$=a.n(Q),ee=a(503),te=a.n(ee),ae=a(105),re=a.n(ae),ne=a(429),se=a(436),oe=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).addRow=function(){var e=r.state.timesheetrows,t=[];t.push(""),t.push(""),t.push(""),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(""),t.push("PJT19257_2"),e.push(t),r.setState({timesheetrows:e})},r.deleteRow=function(e){var t=r.state.timesheetrows.filter((function(t,a){return a!==e})),a=r.totalHourWeek(t),n=[r.totalSat(t),r.totalSun(t),r.totalMon(t),r.totalTue(r.state.timesheetrows),r.totalWed(t),r.totalThu(t),r.totalFri(t)];r.setState({timesheetrows:t,totalWeek:a,totalDay:n})},r.gotoTimesheetDetail=function(){if(1==r.props.dashboardTimesheet&&0!=r.state.timesheetrows.length){var e=r.state.loadedTimesheet.timesheet_id;localStorage.setItem("timesheetId",e),r.props.history.push("/dashboard/timesheet/".concat(e))}},r.timesheetRow=function(e,t){return n.a.createElement(X.a,{key:t},n.a.createElement(J.a,{scope:"row"},r.state.isEditable?r.state.projectCodes.length>0?n.a.createElement(se.a,{select:!0,className:"projCode",id:"projCode"+t,value:e[1],onChange:function(a){return r.onProjCodeSelect(a,e,1,t)}},r.state.projectCodes.map((function(e,t){return n.a.createElement(ne.a,{key:e,value:e},e)}))):"No Project":e[1]),n.a.createElement(J.a,{align:"right"},r.state.isEditable?r.state.projectCodes.length>0?n.a.createElement(se.a,{select:!0,className:"wpId",id:"wpId"+t,value:e[2],onChange:function(a){return r.onWpIdSelect(a,e,2,t)}},r.state.wpIds.map((function(e,t){return n.a.createElement(ne.a,{key:e,value:e},e)}))):"No WorkPackages":e[2]),n.a.createElement(J.a,{align:"right"},r.ccyFormat(e[3])),n.a.createElement(J.a,{align:"right"},r.state.isEditable?n.a.createElement(re.a,{html:r.ccyFormat(e[4]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,4)}}):r.ccyFormat(e[4])),n.a.createElement(J.a,{align:"right"},r.state.isEditable?n.a.createElement(re.a,{html:r.ccyFormat(e[5]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,5)}}):r.ccyFormat(e[5])),n.a.createElement(J.a,{align:"right"},r.state.isEditable?n.a.createElement(re.a,{html:r.ccyFormat(e[6]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,6)}}):r.ccyFormat(e[6])),n.a.createElement(J.a,{align:"right"},r.state.isEditable?n.a.createElement(re.a,{html:r.ccyFormat(e[7]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,7)}}):r.ccyFormat(e[7])),n.a.createElement(J.a,{align:"right"},r.state.isEditable?n.a.createElement(re.a,{html:r.ccyFormat(e[8]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,8)}}):r.ccyFormat(e[8])),n.a.createElement(J.a,{align:"right"},r.state.isEditable?n.a.createElement(re.a,{html:r.ccyFormat(e[9]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,9)}}):r.ccyFormat(e[9])),n.a.createElement(J.a,{align:"right"},r.state.isEditable?n.a.createElement(re.a,{html:r.ccyFormat(e[10]),"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,10)}}):r.ccyFormat(e[10])),n.a.createElement(J.a,{align:"right"},r.state.isEditable?n.a.createElement(re.a,{html:e[11],"data-column":"item",className:"content-editable",onKeyDown:r.checkKey,onChange:function(a){return r.handleContentChange(a,e,t,11)}}):e[11]),r.state.isEditable?n.a.createElement(J.a,{align:"right"},n.a.createElement($.a,{onClick:function(){r.deleteRow(t)}})):null)},r.state={timesheetrows:[],loadUser:{},totalWeek:{},totalDay:[],totalOver:{},totalOverDays:[],loadedTimesheet:{},isEditable:{},overtime:0,flextime:0,projectCodes:[],wpIds:[],errorAlert:!1,successAlert:!1,projWpDontMatch:!1},r.fetchTimesheetRows=r.fetchTimesheetRows.bind(Object(m.a)(r)),r.addRow=r.addRow.bind(Object(m.a)(r)),r.totalHourRow=r.totalHourRow.bind(Object(m.a)(r)),r.totalSat=r.totalSat.bind(Object(m.a)(r)),r.totalSun=r.totalSun.bind(Object(m.a)(r)),r.totalMon=r.totalMon.bind(Object(m.a)(r)),r.totalTue=r.totalTue.bind(Object(m.a)(r)),r.totalWed=r.totalWed.bind(Object(m.a)(r)),r.totalThu=r.totalThu.bind(Object(m.a)(r)),r.totalFri=r.totalFri.bind(Object(m.a)(r)),r.totalHourWeek=r.totalHourWeek.bind(Object(m.a)(r)),r.ccyFormat=r.ccyFormat.bind(Object(m.a)(r)),r.formatWeekEnding=r.formatWeekEnding.bind(Object(m.a)(r)),r.gotoTimesheetDetail=r.gotoTimesheetDetail.bind(Object(m.a)(r)),r.isEditable=r.isEditable.bind(Object(m.a)(r)),r.deleteRow=r.deleteRow.bind(Object(m.a)(r)),r.updateTS=r.updateTS.bind(Object(m.a)(r)),r.submitTS=r.submitTS.bind(Object(m.a)(r)),r.handleContentChange=r.handleContentChange.bind(Object(m.a)(r)),r.handleOverFlexTime=r.handleOverFlexTime.bind(Object(m.a)(r)),r.checkKey=r.checkKey.bind(Object(m.a)(r)),r.hasProject=r.hasProject.bind(Object(m.a)(r)),r.onProjCodeSelect=r.onProjCodeSelect.bind(Object(m.a)(r)),r.onWpIdSelect=r.onWpIdSelect.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchTimesheetRows()}},{key:"isEditable",value:function(){var e=!1;"OPEN"===this.state.loadedTimesheet.status&&void 0===this.props.dashboardTimesheet&&(e=!0),this.setState({isEditable:e})}},{key:"fetchTimesheetRows",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,p,u,m,d,h,f,g,b,v,j,E,y,k,x,S,_,C,D,T,I,P,A,L,H,M,R,W,F,U,B,z,V,G,K,q,J,Y,Z,X;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.props.dashboardTimesheet){e.next=9;break}n=JSON.parse(sessionStorage.getItem("user")),t=n.employee_id,a=localStorage.getItem("token"),r=localStorage.getItem("timesheetId"),this.setState({loadUser:n}),e.next=35;break;case 9:if(null==this.props.token){e.next=35;break}return t=this.props.userId,a=this.props.token,e.prev=12,e.next=15,O.getProjectsForUser(t,a);case 15:return s=e.sent,e.next=18,w.getCurrentUser(this.props.userId,this.props.token);case 18:o=e.sent,this.setState({loadUser:o}),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(12),console.log(this.props),this.props.sessionLogoutHandler();case 26:return e.prev=26,e.next=29,N.getAllTimesheetsByEmp(t,a);case 29:if(0!=(i=e.sent).length){for(c=[],p=0;p<i.length;p++)u=i[p].timesheet_id,m=i[p].week,d=this.formatWeekEnding(i[p].week_ending),h=i[p].status,f=null==i[p].attribute1?"0|0":i[p].attribute1,(g=[]).push(u),g.push(m),g.push(d),g.push(h),g.push(f),c.push(g);c.sort((function(e,t){return t[1]-e[1]})),r=c[0][0],this.props.fetchProject(s,o,c[0][4])}else this.props.fetchProject(s,o,"0|0");e.next=35;break;case 33:e.prev=33,e.t1=e.catch(26);case 35:if(null==t||null==a||null==r){e.next=68;break}return e.next=38,N.getTimesheetById(t,a,r);case 38:if(b=e.sent,v=null==b.attribute1?"0|0":b.attribute1,j=v.split("|"),E=parseFloat(j[0]),y=parseFloat(j[1]),this.setState({loadedTimesheet:b,overtime:E,flextime:y}),this.isEditable(),0!=b.details.length){for(k=b.details,x=[],S=0;S<k.length;S++)_=k[S].timesheet_row_id,C=k[S].project_code,D=k[S].work_package_id,T=k[S].saturday,I=k[S].sunday,P=k[S].monday,A=k[S].tuesday,L=k[S].wednesday,H=k[S].thursday,M=k[S].friday,R=k[S].notes,W=k[S].project_wp,F=this.totalHourRow(T,I,P,A,L,H,M),(U=[]).push(_),U.push(C),U.push(D),U.push(F),U.push(T),U.push(I),U.push(P),U.push(A),U.push(L),U.push(H),U.push(M),U.push(R),U.push(W),x.push(U);this.setState({timesheetrows:x}),B=this.totalHourWeek(this.state.timesheetrows),z=[this.totalSat(this.state.timesheetrows),this.totalSun(this.state.timesheetrows),this.totalMon(this.state.timesheetrows),this.totalTue(this.state.timesheetrows),this.totalWed(this.state.timesheetrows),this.totalThu(this.state.timesheetrows),this.totalFri(this.state.timesheetrows)],this.setState({totalWeek:B,totalDay:z})}if(!this.state.isEditable){e.next=66;break}return e.next=49,O.getProjectsForUser(t,a);case 49:for(V=e.sent,G=[],K=0;K<V.length;K++)"OPEN"==V[K].status&&G.push(V[K].project_code);if(!(G.length>0)){e.next=66;break}this.setState({projectCodes:G}),q=[],J=[],Y=0;case 56:if(!(Y<G.length)){e.next=65;break}return e.next=59,O.getDetailsById(G[Y],a);case 59:for(Z=e.sent,X=0;X<Z.wpList.length;X++)1==Z.wpList[X].is_open&&"L"==Z.wpList[X].work_package_id.substring(Z.wpList[X].work_package_id.length-1)&&J.push(Z.wpList[X].work_package_id);J.length>0&&(q=J);case 62:Y++,e.next=56;break;case 65:this.setState({wpIds:q});case 66:e.next=69;break;case 68:document.getElementById("timesheetDetailContainer").innerHTML="Sorry, you don't have any timesheet records in the database!";case 69:case"end":return e.stop()}}),e,this,[[12,22],[26,33]])})));return function(){return e.apply(this,arguments)}}()},{key:"ccyFormat",value:function(e){return(Math.round(10*e)/10).toFixed(1)}},{key:"totalHourRow",value:function(e,t,a,r,n,s,o){return e+t+a+r+n+s+o}},{key:"totalSat",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][4];return t}},{key:"totalSun",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][5];return t}},{key:"totalMon",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][6];return t}},{key:"totalTue",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][7];return t}},{key:"totalWed",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][8];return t}},{key:"totalThu",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][9];return t}},{key:"totalFri",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][10];return t}},{key:"totalHourWeek",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a][3];return t}},{key:"formatWeekEnding",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"updateTS",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,p,u,m,d,h,f,g,b,v,j,E,y,k=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],r=0;r<this.state.timesheetrows.length;r++)n=this.state.timesheetrows[r][0],s=this.state.timesheetrows[r][1],o=this.state.timesheetrows[r][2],i=this.state.timesheetrows[r][4],c=this.state.timesheetrows[r][5],p=this.state.timesheetrows[r][6],u=this.state.timesheetrows[r][7],m=this.state.timesheetrows[r][8],d=this.state.timesheetrows[r][9],h=this.state.timesheetrows[r][10],f=this.state.timesheetrows[r][11],a=""!=n?{timesheet_row_id:n,project_code:s,work_package_id:o,saturday:i,sunday:c,monday:p,tuesday:u,wednesday:m,thursday:d,friday:h,notes:f,project_wp:s+"_"+o}:{project_code:s,work_package_id:o,saturday:i,sunday:c,monday:p,tuesday:u,wednesday:m,thursday:d,friday:h,notes:f,project_wp:s+"_"+o},t.push(a);return g=this.state.overtime+"|"+this.state.flextime,b={timesheet_id:this.state.loadedTimesheet.timesheet_id,labor_grade_id:this.state.loadedTimesheet.labor_grade_id,year:this.state.loadedTimesheet.year,week:this.state.loadedTimesheet.week,week_ending:this.state.loadedTimesheet.week_ending,status:"OPEN",approver_id:this.state.loadedTimesheet.approver_id,approve_date:this.state.loadedTimesheet.approve_date,attribute1:g,details:t},v=this.state.loadUser.employee_id,j=localStorage.getItem("token"),E=this.state.loadedTimesheet.timesheet_id,e.prev=7,e.next=10,N.updateTimesheetById(v,j,E,b);case 10:"exception throw"!=(y=e.sent)&&this.setState({successAlert:!0}),"exception throw"==y&&this.setState({projWpDontMatch:!0}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),this.setState({errorAlert:!0}),this.props.sessionLogoutHandler();case 19:setTimeout((function(){k.setState({successAlert:!1,errorAlert:!1,projWpDontMatch:!1})}),2e3);case 20:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"submitTS",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,p,u,m,d,h,f,g,b,v,j,E,y,k=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],r=0;r<this.state.timesheetrows.length;r++)n=this.state.timesheetrows[r][0],s=this.state.timesheetrows[r][1],o=this.state.timesheetrows[r][2],i=this.state.timesheetrows[r][4],c=this.state.timesheetrows[r][5],p=this.state.timesheetrows[r][6],u=this.state.timesheetrows[r][7],m=this.state.timesheetrows[r][8],d=this.state.timesheetrows[r][9],h=this.state.timesheetrows[r][10],f=this.state.timesheetrows[r][11],a=""!=n?{timesheet_row_id:n,project_code:s,work_package_id:o,saturday:i,sunday:c,monday:p,tuesday:u,wednesday:m,thursday:d,friday:h,notes:f,project_wp:s+"_"+o}:{project_code:s,work_package_id:o,saturday:i,sunday:c,monday:p,tuesday:u,wednesday:m,thursday:d,friday:h,notes:f,project_wp:s+"_"+o},t.push(a);return g=this.state.overtime+"|"+this.state.flextime,b={timesheet_id:this.state.loadedTimesheet.timesheet_id,labor_grade_id:this.state.loadedTimesheet.labor_grade_id,year:this.state.loadedTimesheet.year,week:this.state.loadedTimesheet.week,week_ending:this.state.loadedTimesheet.week_ending,status:"CLOSE",approver_id:this.state.loadedTimesheet.approver_id,approve_date:this.state.loadedTimesheet.approve_date,attribute1:g,details:t},v=this.state.loadUser.employee_id,j=localStorage.getItem("token"),E=this.state.loadedTimesheet.timesheet_id,e.prev=7,e.next=10,N.updateTimesheetById(v,j,E,b);case 10:"exception throw"!=(y=e.sent)&&(this.fetchTimesheetRows(),this.setState({successAlert:!0}),setTimeout((function(){k.setState({successAlert:!1,errorAlert:!1,projWpDontMatch:!1}),k.props.history.push("/dashboard/timesheet/")}),1500)),"exception throw"==y&&this.setState({projWpDontMatch:!0}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),this.setState({errorAlert:!0}),this.props.sessionLogoutHandler();case 19:setTimeout((function(){k.setState({successAlert:!1,errorAlert:!1,projWpDontMatch:!1})}),2e3);case 20:case"end":return e.stop()}}),e,this,[[7,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleContentChange",value:function(e,t,a,r){if(r>3&&r<11){t[r]=parseFloat(this.ccyFormat(e.target.value)),t[3]=t[4]+t[5]+t[6]+t[7]+t[8]+t[9]+t[10];var n=this.totalHourWeek(this.state.timesheetrows),s=[this.totalSat(this.state.timesheetrows),this.totalSun(this.state.timesheetrows),this.totalMon(this.state.timesheetrows),this.totalTue(this.state.timesheetrows),this.totalWed(this.state.timesheetrows),this.totalThu(this.state.timesheetrows),this.totalFri(this.state.timesheetrows)];this.setState({totalWeek:n,totalDay:s})}else t[r]=e.target.value}},{key:"checkKey",value:function(e){13===e.keyCode&&e.preventDefault()}},{key:"hasProject",value:function(){return this.state.projectCodes.length>0}},{key:"onProjCodeSelect",value:function(e,t,a,r){t[a]=e.target.value,this.setState({})}},{key:"onWpIdSelect",value:function(e,t,a,r){t[a]=e.target.value,this.setState({})}},{key:"handleOverFlexTime",value:function(e,t){"over"==t&&this.setState({overtime:e.target.value}),"flex"==t&&this.setState({flextime:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("div",{className:"tsDetail-outerContainer"},n.a.createElement("div",{className:"container",onClick:function(){e.gotoTimesheetDetail()}},this.state.projWpDontMatch?n.a.createElement(W,{config:{message:"Project and WP Don't Match. Please Check Again!",variant:"Warning"}}):null,this.state.errorAlert?n.a.createElement(W,{config:{message:"Failed",variant:"error"}}):null,this.state.successAlert?n.a.createElement(W,{config:{message:"Successful!",variant:"success"}}):null,n.a.createElement("div",{className:"timesheetTitle"},n.a.createElement("div",{className:"attributeRow"},n.a.createElement("div",{className:"empNumContainer"},n.a.createElement("div",{className:"tsDetail-empNumContainer"},n.a.createElement("div",{className:"empNumTitle"},"Employee Number:"),n.a.createElement("div",{className:"empNum"},this.state.loadUser.employee_id)),this.props.dashboardTimesheet?null:n.a.createElement("div",{className:"empNameAttribute"},n.a.createElement("div",{className:"empNameTitle"},"Name:"),n.a.createElement("div",{className:"empName"},this.state.loadUser.first_name," ",this.state.loadUser.last_name))),n.a.createElement("div",{className:"weekNumEndingIcon-container"},n.a.createElement("div",{class:"weekNumbEnd-container"},n.a.createElement("div",{className:"weekNumContainer"},n.a.createElement("div",{className:"weekNumTitle"},"Week Number:"),n.a.createElement("div",{className:"weekNum"},this.state.loadedTimesheet.week)),n.a.createElement("div",{className:"weekEndContainer"},n.a.createElement("div",{className:"weekEndTitle"},"Week Ending:"),n.a.createElement("div",{className:"weekEnd"},this.formatWeekEnding(this.state.loadedTimesheet.week_ending)))),n.a.createElement("div",{className:"tsDetail-iconContainer"},this.state.isEditable?n.a.createElement(te.a,{fontSize:"large",onClick:this.addRow,color:"primary",variant:"contained"}):null))),n.a.createElement(Y.a,{className:t.timesheetTable},n.a.createElement(K.a,{className:t.table,"aria-label":"simple table"},n.a.createElement(Z.a,null,n.a.createElement(X.a,null,n.a.createElement(J.a,{id:"proj",className:t.tableTitle},"Project"),n.a.createElement(J.a,{id:"wp",align:"right",className:t.tableTitle},"WP"),n.a.createElement(J.a,{id:"tol",align:"right",className:t.tableTitle},"Total"),n.a.createElement(J.a,{id:"sat",align:"right",className:t.tableTitle},"Sat"),n.a.createElement(J.a,{id:"sun",align:"right",className:t.tableTitle},"Sun"),n.a.createElement(J.a,{id:"mon",align:"right",className:t.tableTitle},"Mon"),n.a.createElement(J.a,{id:"tue",align:"right",className:t.tableTitle},"Tue"),n.a.createElement(J.a,{id:"wed",align:"right",className:t.tableTitle},"Wed"),n.a.createElement(J.a,{id:"thu",align:"right",className:t.tableTitle},"Thu"),n.a.createElement(J.a,{id:"fri",align:"right",className:t.tableTitle},"Fri"),n.a.createElement(J.a,{id:"notes",align:"right",className:t.tableTitle},"Notes"))),n.a.createElement(q.a,null,this.state.timesheetrows.map((function(t,a){return e.timesheetRow(t,a)})),n.a.createElement(X.a,null,n.a.createElement(J.a,{className:t.tableTitle},"Total"),n.a.createElement(J.a,{colSpan:2,align:"right",className:t.projHours},this.ccyFormat(this.state.totalWeek)),n.a.createElement(J.a,{align:"right",className:t.projHours},this.ccyFormat(this.state.totalDay[0])),n.a.createElement(J.a,{align:"right",className:t.projHours},this.ccyFormat(this.state.totalDay[1])),n.a.createElement(J.a,{align:"right",className:t.projHours},this.ccyFormat(this.state.totalDay[2])),n.a.createElement(J.a,{align:"right",className:t.projHours},this.ccyFormat(this.state.totalDay[3])),n.a.createElement(J.a,{align:"right",className:t.projHours},this.ccyFormat(this.state.totalDay[4])),n.a.createElement(J.a,{align:"right",className:t.projHours},this.ccyFormat(this.state.totalDay[5])),n.a.createElement(J.a,{align:"right",className:t.projHours},this.ccyFormat(this.state.totalDay[6]))),n.a.createElement(X.a,null,n.a.createElement(J.a,{colSpan:2,className:t.tableTitle},"Overtime"),n.a.createElement(J.a,{align:"right"},this.state.isEditable?n.a.createElement(re.a,{html:this.ccyFormat(this.state.overtime),"data-column":"item",className:"content-editable",onKeyDown:this.checkKey,onChange:function(t){return e.handleOverFlexTime(t,"over")}}):this.ccyFormat(this.state.overtime))),n.a.createElement(X.a,null,n.a.createElement(J.a,{colSpan:2,className:t.tableTitle},"Flextime"),n.a.createElement(J.a,{align:"right"},this.state.isEditable?n.a.createElement(re.a,{html:this.ccyFormat(this.state.flextime),"data-column":"item",className:"content-editable",onKeyDown:this.checkKey,onChange:function(t){return e.handleOverFlexTime(t,"flex")}}):this.ccyFormat(this.state.flextime)))))),this.state.isEditable&&this.hasProject()?n.a.createElement("div",{className:t.updateSubmitButton},n.a.createElement(H.a,{onClick:this.updateTS,color:"primary",variant:"contained"},"Update"),n.a.createElement(H.a,{className:t.submitButton,onClick:this.submitTS,color:"secondary",variant:"contained"},"Submit")):null)))}}]),a}(r.Component),ie=Object(L.a)((function(e){return{table:{width:"93%"},timesheetTable:{width:"100%",maxHeight:"420px",display:"flex",justifyContent:"center"},tableTitle:{fontWeight:"bold",fontSize:"16px !important"},updateSubmitButton:{position:"absolute",margin:"0 0 0 780px"},submitButton:{marginLeft:25},projHours:{}}}),{withTheme:!0})(oe),le=a(38),ce=a(502),pe=a(504),ue=a.n(pe);function me(e){var t=n.a.useState(null),a=Object(le.a)(t,2),r=a[0],s=a[1],o=function(){s(null)};return n.a.createElement("div",null,n.a.createElement(ue.a,{onClick:function(e){s(e.currentTarget)},"aria-controls":"simple-menu","aria-haspopup":"true"}),n.a.createElement(ce.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:o},n.a.createElement(D.b,{to:e.link,style:{textDecoration:"none",color:"black"}},n.a.createElement(ne.a,null," Edit ")," "),null==e.employee.end_date?n.a.createElement(ne.a,{onClick:function(){e.handleArchive(e.id,e.employee),o()}},"Archive"):n.a.createElement(ne.a,{onClick:function(){e.handleOpen(e.id,e.employee),o()}},"Open")))}var de=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{title:"Add an Employee"},n.a.createElement(H.a,{className:e.iconButton,onClick:this.props.handleCreate,color:"primary",variant:"contained"},"Create")))}}]),a}(n.a.Component),he=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(de),fe=a(985),ge=a(68),be=a.n(ge),ve=a(1006),je=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"face",value:function(e){return n.a.createElement("div",null,n.a.createElement(ve.a,{className:e.avatar,alt:"employee photo"},n.a.createElement(be.a,{onClick:this.props.handleClick,className:e.faceIcon})))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.avatar;return this.face(t,a)}}]),a}(r.Component),Ee=Object(L.a)((function(){return{faceIcon:{width:"100%",height:"100%"}}}),{withTheme:!0})(je),ye={NAVBAR_EXPANDED_WIDTH:230,NAVBAR_SHRINKED_WIDTH:100,DRAWER_EXPANDED_WIDTH:230,DRAWER_SHRINKED_WIDTH:100},ke={OK:200,UNAUTHORIZED:401,NOT_FOUND:404,INTERNAL_SERVER_ERROR:500,SERVICE_UNAVAILABLE:503,BAD_REQUEST:400};a(584);a(437);var we=[{name:"photo",label:"Photo",className:"column"},{name:"employeeId",label:"ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"},{name:"startDate",label:"Start Date",className:"column"},{name:"endDate",label:"End Date",className:"column"},{name:"laborGrade",label:"Labor Grade",className:"column"},{name:"vacation",label:"Vacation Days",className:"column"},{name:"supervisor",label:"Supervisor",className:"column"},{name:"edit",label:"Edit",className:"column"}],xe=function(e,t){var a=e.history;return{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,customToolbar:function(){return n.a.createElement(he,{history:a,handleCreate:t,className:"customToolBarContainer"})},textLabels:{body:{noMatch:n.a.createElement(fe.a,null)}}}},Oe=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).getCustomTheme=function(){return Object(B.a)({overrides:{MUIDataTableHeadCell:{data:{fontSize:"15px"}},MUIDataTableBodyCell:{root:{fontSize:"14px"}},MUIDataTableToolbar:{root:{padding:"0px 0 0 16px"}},MUIDataTable:{paper:{margin:"0 0 45px 0"}}}})},r.handleCreate=function(){r.props.history.push("/dashboard/hr/create")},r.handleArchive=function(){var e=Object(c.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(new Date).getTime(),a.end_date=n,e.next=5,w.updateEmployee(t,r.state.token,a);case 5:r.fetchData(r.state.token),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response.status===ke.UNAUTHORIZED&&r.props.sessionLogoutHandler();case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),r.handleOpen=function(){var e=Object(c.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.end_date=null,e.next=4,w.updateEmployee(t,r.state.token,a);case 4:r.fetchData(r.state.token),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response.status===ke.UNAUTHORIZED&&r.props.sessionLogoutHandler();case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),r.state={data:[],token:null},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r.handleCreate=r.handleCreate.bind(Object(m.a)(r)),r.handleArchive=r.handleArchive.bind(Object(m.a)(r)),r.handleOpen=r.handleOpen.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.setState({token:e}),this.fetchData(e)}},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getAllEmployees(t);case 3:a=e.sent,r=[],a.forEach(function(){var e=Object(c.a)(l.a.mark((function e(t){var a,o,i,c,p,u,m,d,h,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.employee_id,o=t.first_name,i=t.last_name,c=new Date(t.start_date).toString("MMM dd"),p=t.end_date,u=t.labor_grade_id.labor_grade_id,m=t.vacation,d=t.supervisor_id,h=null==p?n.a.createElement("p",{style:{color:"green"}}," Currently Employed "):n.a.createElement("p",{style:{color:"red"}}," Archived "),(f=[]).push(n.a.createElement(Ee,{avatar:{width:25,height:25,margin:"0 auto"}})),f.push(a),f.push(o),f.push(i),f.push(c),f.push(h),f.push(u),f.push(m),f.push(d),f.push(n.a.createElement(me,{link:"/dashboard/hr/".concat(a),id:a,employee:t,handleArchive:s.handleArchive,handleOpen:s.handleOpen})),r.push(f);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({data:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response.status===ke.UNAUTHORIZED&&this.props.sessionLogoutHandler();case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"hrPortal-container"},n.a.createElement(z.a,{theme:this.getCustomTheme()},n.a.createElement(P.a,{className:"hrPortal-datatable",title:n.a.createElement("div",{className:"hrPortal-title"}," Manage Employees"),options:xe(this.props,this.handleCreate),columns:we,data:this.state.data})))}}]),a}(r.Component),Ne=a(25),Se=(a(754),a(257)),_e=a.n(Se),Ce=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={employee_id:null,password:""},r.updateInputValue=r.updateInputValue.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"updateInputValue",value:function(e){e.preventDefault(),this.setState(Object(Ne.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"login-container"},n.a.createElement("div",{className:"loginText"},n.a.createElement("img",{className:"login-logo",src:_e.a}),n.a.createElement("span",{className:"text-title"},"S",n.a.createElement("span",{className:"lowercaseText"},"ign")," I",n.a.createElement("span",{className:"lowercaseText"},"n"))),n.a.createElement("form",{onSubmit:function(t){return e.props.loginHandler(t,{id:e.state.employee_id,password:e.state.password})}},n.a.createElement("div",{className:"inputFields"},n.a.createElement(se.a,{className:"textfields",id:"standard-basic",label:"Employee ID",name:"employee_id",onChange:this.updateInputValue})),n.a.createElement("div",{className:"inputFields"},n.a.createElement(se.a,{className:"textfields",id:"standard-password-input",label:"Password",name:"password",onChange:this.updateInputValue,type:"password"})),n.a.createElement("div",{className:"button-container"},n.a.createElement(H.a,{className:"loginButton",variant:"contained",color:"primary",type:"submit"},"Login"))))}}]),a}(r.Component),De=a(983),Te=a(430),Ie=a(104),Pe=a(991);function Ae(e){var t=n.a.useState(null),a=Object(le.a)(t,2),r=a[0],s=a[1],o=function(){s(null)};return n.a.createElement("div",null,n.a.createElement(Ee,{handleClick:function(e){s(e.currentTarget)},avatar:{width:30,height:30,margin:"0 auto"}}),n.a.createElement(ce.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:o},n.a.createElement(D.b,{to:"/dashboard/profile/".concat(e.loadedUser.employee_id),style:{textDecoration:"none",color:"black"}},n.a.createElement(ne.a,{onClick:o}," Profile "),n.a.createElement(D.b,{to:"/",style:{textDecoration:"none",color:"black"}},n.a.createElement(ne.a,{onClick:e.logoutHandler}," Logout ")," "))))}var Le=a(3),He=a(360),Me=a.n(He),Re=a(20),We=a(522),Fe=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",{className:e.search},n.a.createElement("div",{className:e.searchIcon},n.a.createElement(Me.a,null)),n.a.createElement(We.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}}))}}]),a}(r.Component),Ue=(Object(L.a)((function(e){return{search:Object(Ne.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Re.d)(e.palette.common.black,.15),"&:hover":{backgroundColor:Object(Re.d)(e.palette.common.black,.15)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"black"},inputRoot:{color:"black"},inputInput:Object(Ne.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}),{withTheme:!0})(Fe),a(1005)),Be=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.location,a=e.loadedUser,r=t.pathname.split("/"),s=[],o="";return r.splice(0,1),r.forEach((function(e,t){o+="/"+e,s.push(o)})),n.a.createElement("div",null,n.a.createElement(Ue.a,null,s.map((function(e,t){return n.a.createElement("div",{key:t},s.length-1===t?n.a.createElement(D.b,{style:{textDecoration:"none"},key:t,to:e},n.a.createElement(Ie.a,{color:"textPrimary"}," ",e.split("/")[t+1]," ")):n.a.createElement(D.b,{key:t,to:"".concat(e,"/").concat(a.employee_id)}," ",e.split("/")[t+1]," "))}))))}}]),a}(r.Component),ze=Object(T.g)(Be),Ve=ye.NAVBAR_EXPANDED_WIDTH,Ge=ye.NAVBAR_SHRINKED_WIDTH,Ke=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"resizeNavbar",value:function(e){return n.a.createElement("div",{className:e.root},n.a.createElement(De.a,{position:"fixed",elevation:0,className:Object(Le.a)(e.appBar,Object(Ne.a)({},e.appBarShift,this.props.resize))},n.a.createElement(Te.a,null,n.a.createElement(Ie.a,{className:e.title,variant:"h6",noWrap:!0},n.a.createElement(ze,this.props)),n.a.createElement(Pe.a,{className:e.divider,orientation:"vertical",flexItem:!0}),n.a.createElement("h4",{className:e.userName}," ",this.props.loadedUser.first_name," ",this.props.loadedUser.last_name),n.a.createElement(Ae,{logoutHandler:this.props.logoutHandler,loadedUser:this.props.loadedUser}))))}},{key:"render",value:function(){var e=this.props.classes;return this.resizeNavbar(e)}}]),a}(r.Component),qe=Object(L.a)((function(e){var t;return{root:{},menuButton:{marginRight:e.spacing(2),color:"black"},title:(t={flexGrow:1,display:"none"},Object(Ne.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(Ne.a)(t,"color","black"),t),userName:{color:"black",paddingRight:e.spacing(3)},divider:{marginRight:e.spacing(3),marginLeft:e.spacing(3)},appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"#fafafa",position:"fixed",width:"calc(100% - ".concat(Ge,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),border:"solid 1px lightgray"},appBarShift:{marginLeft:Ve,backgroundColor:"#fafafa",width:"calc(100% - ".concat(Ve,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}}}),{withTheme:!0})(Ke),Je=a(986),Ye=a(97),Ze=a(993),Xe=(a(243),a(281)),Qe=a.n(Xe),$e=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",{className:"menuItems"},n.a.createElement(D.b,{className:e.link,to:this.props.link},n.a.createElement(Ze.a,{container:!0,direction:"row",alignItems:"center",className:e.menuItem},n.a.createElement(Ze.a,{item:!0},n.a.createElement(Qe.a,{className:"itemIcon"})),n.a.createElement(Ze.a,{item:!0,onClick:this.props.handleClick},n.a.createElement("b",null,this.props.text&&this.props.resize?n.a.createElement("p",{className:e.text}," ",this.props.text," "):null)))))}}]),a}(r.Component),et=Object(L.a)((function(e){return{menuItem:{},text:{color:"white",marginLeft:"55px",fontSize:"15px",fontWeight:"400",letterSpacing:"1.5px"},link:{textDecoration:"none"}}}),{withTheme:!0})($e),tt=a(1007),at=(a(196),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",{className:"menuItems",id:"menuItems-expansion"},n.a.createElement(D.b,{className:e.link,to:this.props.link},n.a.createElement(Ze.a,{container:!0,direction:"row",alignItems:"center",className:e.menuItem},n.a.createElement(Ze.a,{item:!0},n.a.createElement(Qe.a,{className:"itemIcon"})),n.a.createElement(Ze.a,{item:!0,onClick:this.props.handleClick},this.props.text&&this.props.resize?n.a.createElement("p",{className:e.text}," ",this.props.text," "):null))))}}]),a}(r.Component)),rt=Object(L.a)((function(e){return{menuItem:{},text:{marginLeft:50,color:"white",fontWeight:"400"},link:{textDecoration:"none"}}}),{withTheme:!0})(at),nt=a(992),st=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(nt.a,{"aria-controls":"panel1d-content",id:"panel1d-header",className:e.expansionPanelSummary},n.a.createElement("div",{className:e.expansionMenuHeaderContainer},n.a.createElement("div",{className:e.expansionMenuHeaderAvatar},n.a.createElement(ve.a,{variant:"circle",className:e.avatar}))))}}]),a}(r.Component),ot=Object(L.a)((function(){return{text:{marginLeft:30,color:"black"},expansionPanelSummary:{height:"180px",margin:"25px 0 0 0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},expansionMenuHeaderContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},avatar:{width:"80px",height:"80px",margin:"0 0 15px 0"},arrowIconLight:{},materialIconLight:{}}}),{withTheme:!0})(st),it=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return n.a.createElement(tt.a,{elevation:0,className:"expansion-root"},console.log(this.props),n.a.createElement(ot,{loadedUser:this.props.loadedUser,resize:this.props.resize}),n.a.createElement(rt,{text:"Lead Engineer",resize:this.props.resize,link:"/dashboard/lead"}),this.props.loadedUser.is_hr_staff?n.a.createElement(rt,{text:"HR",resize:this.props.resize,link:"/dashboard/hr"}):null,"true"==sessionStorage.is_supervisor?n.a.createElement(rt,{text:"Supervisor",resize:this.props.resize,link:"/dashboard/supervisor"}):null,"true"==sessionStorage.is_supervisor||this.props.loadedUser.is_secondary_approver||this.props.loadedUser.is_super_timesheet_approver?n.a.createElement(rt,{text:"Timesheet Approver",resize:this.props.resize,link:"/dashboard/tsapprover"}):null)}}]),a}(r.Component),lt=Object(L.a)((function(e){return{}}),{withTheme:!0})(it),ct=(a(755),ye.DRAWER_EXPANDED_WIDTH),pt=ye.DRAWER_SHRINKED_WIDTH,ut=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e,t,a=this.props,r=a.classes,s=a.loadedUser;return n.a.createElement("div",Object(Ne.a)({className:r.root},"className","side-root"),n.a.createElement(Je.a,null),n.a.createElement(Ye.a,{variant:"permanent",open:!0,className:Object(Le.a)(r.drawer,(e={},Object(Ne.a)(e,r.drawerOpen,this.props.resize),Object(Ne.a)(e,r.drawerClose,!this.props.resize),e)),classes:{paper:Object(Le.a)((t={},Object(Ne.a)(t,r.drawerOpen,this.props.resize),Object(Ne.a)(t,r.drawerClose,!this.props.resize),t))}},n.a.createElement("p",{className:"side-title"}," ",n.a.createElement("b",null,"Timely")),n.a.createElement(Pe.a,{className:r.divider}),n.a.createElement(lt,{loadedUser:this.props.loadedUser,resize:this.props.resize}),n.a.createElement(Pe.a,{className:r.btnDivider}),n.a.createElement("div",{className:"menuItems-sections"},n.a.createElement(et,{text:"Dashboard",resize:this.props.resize,link:"/dashboard/".concat(s.employee_id)}),n.a.createElement(et,{text:"Timesheet",resize:this.props.resize,link:"/dashboard/timesheet"}),n.a.createElement(et,{text:"Projects",resize:this.props.resize,link:"/dashboard/projects"}))))}}]),a}(r.Component),mt=Object(L.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar,paper:{width:ct,height:"100%"},divider:{backgroundColor:"white",width:"90%",margin:"0 auto"},btnDivider:{backgroundColor:"white",width:"90%",margin:"20px auto 0 auto"},drawerOpen:{backgroundColor:"transparent !important",width:ct,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{backgroundColor:"transparent !important",width:pt,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})}}}),{withTheme:!0})(ut),dt=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("main",{className:e.content},n.a.createElement("div",{className:e.innerContainer},n.a.createElement("div",{className:e.toolbar}),this.props.routes))}}]),a}(r.Component),ht=Object(L.a)((function(e){return{root:{display:"flex"},content:{flexGrow:10},innerContainer:{padding:"35px 0 0 0"},toolbar:e.mixins.toolbar}}),{withTheme:!0})(dt),ft=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={loaded_user:{},resize:!0,breadCrumbs:r.props.location},r.resizeDashboard=r.resizeDashboard.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"resizeDashboard",value:function(){this.setState({resize:!this.state.resize})}},{key:"render",value:function(){var e,t=this,a=this.props.classes,r=n.a.createElement(xr,Object.assign({},this.props,{config:(e="dashboard",{option:e,loadedUser:t.props.loadedUser,logoutHandler:t.props.logoutHandler,sessionLogoutHandler:t.props.sessionLogoutHandler}),logoutHandler:this.props.logoutHandler,sessionLogoutHandler:this.props.sessionLogoutHandler,token:this.props.token}));return n.a.createElement(D.a,null,n.a.createElement("div",{className:a.root},n.a.createElement(qe,Object.assign({},this.props.location,{loadedUser:this.props.loadedUser,resizeDashboard:this.resizeDashboard,resize:this.state.resize,logoutHandler:this.props.logoutHandler})),n.a.createElement(mt,{loadedUser:this.props.loadedUser,resizeDashboard:this.resizeDashboard,resize:this.state.resize}),n.a.createElement(ht,{routes:r})))}}]),a}(r.Component),gt=Object(L.a)((function(e){return{root:{display:"flex"},toolbar:e.mixins.toolbar}}),{withTheme:!0})(ft),bt=a(984),vt=(a(438),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).handleClick=function(){console.log("click!",r.props.selectedRows)},r.state={type:e.type},r.handleClick=r.handleClick.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"customSelectProject-container"},"Mine"===this.state.type&&n.a.createElement(bt.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},n.a.createElement(H.a,{onClick:this.handleClick},"Archive"),n.a.createElement(H.a,null,"Close")),"Archived"===this.state.type&&n.a.createElement(bt.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},n.a.createElement(H.a,null,"Open"),n.a.createElement(H.a,null,"Close")),"Closed"===this.state.type&&n.a.createElement(bt.a,{variant:"contained",color:"primary","aria-label":"contained primary button group"},n.a.createElement(H.a,null,"Archive"),n.a.createElement(H.a,null,"Open")))}}]),a}(n.a.Component)),jt=(a(756),["ID","Name","Manager"]),Et=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).getCustomTheme=function(){return Object(B.a)({overrides:{MUIDataTableToolbarSelect:{root:{height:"80px"}},MUIDataTable:{paper:{border:"none",width:"100%"}},MUIDataTableHeadCell:{data:{fontSize:"16px",fontWeight:"bold"}},MUIDataTableBodyCell:{root:{fontSize:"16px"}},MUIDataTableToolbar:{titleText:{fontSize:"16px",fontWeight:"bold"},root:{padding:"0px"}}}})},r.state={data:[],type:""},r.options={print:!1,responsive:"scroll",selectableRows:!0,customToolbarSelect:function(e){return n.a.createElement(vt,{selectedRows:e,type:r.state.type})},onRowClick:function(e,t){r.props.history.push({pathname:"/projectDetails",state:{projectID:e[0]}})}},r}return Object(u.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data,type:e.type})}},{key:"render",value:function(){return n.a.createElement(z.a,{theme:this.getCustomTheme()},n.a.createElement(P.a,{className:"projects",title:"Projects",columns:jt,options:this.options,data:this.state.data}))}}]),a}(n.a.Component),yt=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={data:[],allProj:[],mineProj:[],archivedProj:[],closedProj:[],type:"All"},r.setData=r.setData.bind(Object(m.a)(r)),r.allProjects=r.allProjects.bind(Object(m.a)(r)),r.mineProjects=r.mineProjects.bind(Object(m.a)(r)),r.archivedProjects=r.archivedProjects.bind(Object(m.a)(r)),r.closedProjects=r.closedProjects.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setData();case 2:this.allProjects();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"allProjects",value:function(){this.setState({data:this.state.allProj,type:"All"})}},{key:"mineProjects",value:function(){this.setState({data:this.state.mineProj,type:"Mine"})}},{key:"archivedProjects",value:function(){this.setState({data:this.state.archivedProj,type:"Archived"})}},{key:"closedProjects",value:function(){this.setState({data:this.state.closedProj,type:"Closed"})}},{key:"setData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,p,u,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),a=localStorage.getItem("token"),r=t.employee_id,console.log(t),e.next=6,O.getProjectsForUser(r,a);case 6:for(n=e.sent,console.log(n),s=[],o=[],i=[],c=[],p=[],u=0;u<n.length;u++)s=[],console.log(n[u]),s.push(n[u].project_code),s.push(n[u].project_name),m=n[u].project_manager_id.first_name+" "+n[u].project_manager_id.last_name,s.push(m),n[u].project_manager_id.employee_id===parseInt(r)&&i.push(s),"COMPLETE"===n[u].status&&p.push(s),"ARCHIVED"===n[u].status&&c.push(s),o.push(s);this.setState({allProj:o,mineProj:i,closedProj:p,archivedProj:c});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"projectPageContainer"},n.a.createElement("div",{className:"projects-paper-container"},n.a.createElement("div",{className:"projects-btnProjects"},n.a.createElement("div",null,n.a.createElement(bt.a,{variant:"contained",color:"primary","aria-label":"contained primary button group",className:"buttonGroup"},n.a.createElement(H.a,{onClick:this.allProjects},"All"),n.a.createElement(H.a,{onClick:this.mineProjects},"Mine"),n.a.createElement(H.a,{onClick:this.archivedProjects},"Archived"),n.a.createElement(H.a,{onClick:this.closedProjects},"Closed"))),n.a.createElement("div",null,n.a.createElement(H.a,{variant:"contained",color:"secondary",component:D.b,to:"/createProject",className:"createButton"},"+ Create"))),n.a.createElement(Et,{data:this.state.data,type:this.state.type,history:this.props.history})))}}]),a}(n.a.Component),kt=a(53),wt=a(421),xt=a(998),Ot=a(996),Nt=a(997),St=a(34),_t=(a(443),Object(wt.a)((function(e){return{projInfo:{width:"280px"}}}))),Ct=function(e){var t,a,r,s=_t();return n.a.createElement("form",null,n.a.createElement(St.TextValidator,(t={component:"span",className:"margin",label:"Project ID",name:"projectID",value:e.projectID,onChange:e.handleChange},Object(Ne.a)(t,"className",s.projInfo),Object(Ne.a)(t,"validators",["isRequired"]),Object(Ne.a)(t,"errorMessages",["Input is required."]),t)),n.a.createElement("br",null),n.a.createElement(St.TextValidator,(a={component:"span",className:"margin",label:"Project Name",name:"projectName",value:e.projectName,onChange:e.handleChange},Object(Ne.a)(a,"className",s.projInfo),Object(Ne.a)(a,"validators",["isRequired"]),Object(Ne.a)(a,"errorMessages",["Input is required."]),a)),n.a.createElement("br",null),n.a.createElement(St.TextValidator,(r={component:"span",className:"margin",label:"Project Manager",name:"projectManager",value:e.projectManager,onChange:e.handleChange},Object(Ne.a)(r,"className",s.projInfo),Object(Ne.a)(r,"validators",["isRequired"]),Object(Ne.a)(r,"errorMessages",["Input is required."]),r)),n.a.createElement("br",null))},Dt=(a(319),Object(wt.a)((function(){return{projDesc:{width:"100%"},projDescContainer:{width:"80%"}}}))),Tt=function(e){var t=Dt();return n.a.createElement("div",{className:t.projDescContainer},n.a.createElement("form",{autoComplete:"off"},n.a.createElement(St.TextValidator,{className:t.projDesc,id:"outlined-multiline-static",label:"Project Description",multiline:!0,rows:"8",variant:"outlined",name:"Desc",value:e.Desc,onChange:e.handleChange,validators:["isRequired"],errorMessages:["Input is required."]})))},It=Object(wt.a)((function(){return{budget_container:{width:"70%"},budgetInfo:{width:"100%",margin:"-15px 0 0 0"}}})),Pt=function(e){var t,a=It();return n.a.createElement("div",{className:a.budget_container},n.a.createElement("form",{autoComplete:"off"},n.a.createElement(St.TextValidator,(t={component:"span",className:"margin",id:"standard-basic",label:"Cost",value:e.cost,name:"cost",onChange:e.handleChange,disabled:e.isDisabled},Object(Ne.a)(t,"className",a.budgetInfo),Object(Ne.a)(t,"validators",["isRequired"]),Object(Ne.a)(t,"errorMessages",["Input is required."]),t))))},At=a(520),Lt=a(73),Ht=a(1003),Mt=Object(wt.a)((function(e){return{scheduleInfo:{width:"280px"}}})),Rt=function(e){var t=Mt(),a=Object(r.useState)({}),s=Object(le.a)(a,2),o=(s[0],s[1],Object(r.useState)({})),i=Object(le.a)(o,2);i[0],i[1];return n.a.createElement("form",{autoComplete:"off"},n.a.createElement(Lt.a,{utils:At.a},n.a.createElement(Ht.a,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",margin:"normal",label:"Start Date",name:"startDate",value:e.startDate,onChange:e.handleStartChange,className:t.scheduleInfo,disabled:e.isDisabled}),n.a.createElement("br",null),n.a.createElement(Ht.a,{disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd",margin:"normal",label:"End Date",name:"endDate",value:e.endDate,onChange:e.handleEndChange,className:t.scheduleInfo,disabled:e.isDisabled})))},Wt=Object(wt.a)((function(e){return{container:{width:"100%",display:"flex",justifyContent:"center"},root:{width:"1100px"},stepper:{padding:"40px 0",border:"1px solid lightgray"},backButton:{margin:"0 7px 0 0"},nextButton:{margin:"0 0 0 7px"},instructionsContainer:{display:"flex",justifyContent:"center",padding:"25px 0"},instructions:{backgroundColor:"white",width:"400px",display:"flex",justifyContent:"center",alignItems:"center",height:"280px",padding:"0 0 10px 0",borderTop:"3px solid lightgray",borderRadius:"5px"},backNextButtonContainer:{display:"flex",justifyContent:"center",margin:"20px 0 0 0"},endMessage:{display:"flex",flexDirection:"column"},createProjAgain:{margin:"15px 0",padding:"15px"}}}));function Ft(){var e=Wt(),t=JSON.parse(sessionStorage.getItem("user")),a=Object(r.useState)({projectID:"",projectName:"",projectManager:t.first_name+" "+t.last_name,Desc:"",startDate:new Date,endDate:new Date,cost:""}),s=Object(le.a)(a,2),o=s[0],i=s[1];Object(r.useEffect)((function(){St.ValidatorForm.addValidationRule("isRequired",(function(e){return 0===e.length?(console.log(m),d(!1),!1):(d(!0),!0)}))}),[]);var p=Object(r.useState)(!1),u=Object(le.a)(p,2),m=u[0],d=u[1],h=Object(r.useState)(!1),f=Object(le.a)(h,2),g=f[0],b=f[1],v=Object(r.useState)(!1),j=Object(le.a)(v,2),E=j[0],y=j[1],k=function(){var e=Object(c.a)(l.a.mark((function e(){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),r={project_code:o.projectID,project_manager_id:{employee_id:t.employee_id},project_name:o.projectName,status:"OPEN",start_date:o.startDate.toISOString().split("T",1)[0],end_date:o.endDate.toISOString().split("T",1)[0],description:o.Desc,budget_dollar:o.cost,employees:[{employee_id:t.employee_id}]},e.prev=2,e.next=5,O.createProject(r,a);case 5:b(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),y(!0);case 11:setTimeout((function(){y(!1),b(!1)}),1e3);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),w=n.a.useState(0),x=Object(le.a)(w,2),N=x[0],S=x[1],_=["Project Information","Project Description","Budget","Schedule"];return n.a.createElement("div",{className:e.container},n.a.createElement("div",{className:e.root},E?n.a.createElement(W,{config:{message:"Failed to Create Project",variant:"error"}}):null,g?n.a.createElement(W,{config:{message:"Project Created!",variant:"success"}}):null,n.a.createElement(St.ValidatorForm,{onSubmit:k},n.a.createElement(xt.a,{activeStep:N,alternativeLabel:!0,className:e.stepper},_.map((function(e){return n.a.createElement(Ot.a,{key:e},n.a.createElement(Nt.a,null,e))}))),n.a.createElement("div",{className:e.instructionsContainer},N===_.length?n.a.createElement("div",{className:e.endMessage},n.a.createElement(Ie.a,{component:"span",className:e.instructions},"Project Created."),n.a.createElement(H.a,{onClick:function(){S(0)}},"Create another project")):n.a.createElement("div",null,n.a.createElement(Ie.a,{component:"span",className:e.instructions},function(e,t,a,r,s){switch(e){case 0:return n.a.createElement(Ct,{projectID:t.projectID,projectName:t.projectName,projectManager:t.projectManager,handleChange:a});case 1:return n.a.createElement(Tt,{Desc:t.Desc,handleChange:a});case 2:return n.a.createElement(Pt,{cost:t.cost,handleChange:a});case 3:return n.a.createElement(Rt,{startDate:t.startDate,endDate:t.endDate,handleStartChange:r,handleEndChange:s});default:return n.a.createElement(n.a.Fragment,null)}}(N,o,(function(e){var t=e.target,a=t.name,r=t.value;i(Object(kt.a)({},o,Object(Ne.a)({},a,r)))}),(function(e){i(Object(kt.a)({},o,{startDate:e}))}),(function(e){i(Object(kt.a)({},o,{endDate:e}))}))),n.a.createElement("div",{className:e.backNextButtonContainer},n.a.createElement(H.a,{disabled:0===N,onClick:function(){S((function(e){return e-1}))},className:e.backButton},"Back"),N===_.length-1&&n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:k,className:e.nextButton},"Finish"),N!=_.length-1&&n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:function(){S((function(e){return e+1})),d(!1)},disabled:!m},"Next")))))))}var Ut=a(139),Bt=(a(763),a(431)),zt=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).gotoProjectDetail=r.gotoProjectDetail.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"gotoProjectDetail",value:function(){this.props.history.push({pathname:"/projectDetails",state:{projectID:this.props.projName}})}},{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(Ut.a,{className:t.projDetail,elevation:2,onClick:function(){return e.gotoProjectDetail()}},n.a.createElement("div",{className:t.projName},this.props.projName),n.a.createElement("div",{className:t.dueDateRow},n.a.createElement("div",{className:t.dueDate},"Due Date:"),n.a.createElement("div",{className:t.dueDateVal},"\xa0\xa0\xa0",this.props.dueDate)),n.a.createElement("div",{className:t.projManagerRow},n.a.createElement(be.a,{className:t.circleStyle}),n.a.createElement("div",{className:t.projManagerName},this.props.projManagerName)))}}]),a}(r.Component),Vt=Object(L.a)((function(){return{root:{backgroundColor:Bt.a},projDetail:{width:"90%",height:"105px",margin:"25px auto"},projName:{fontWeight:"bold",margin:"2px 0 0 5px"},dueDateRow:{margin:"8px 0 0 10px"},dueDate:{color:"grey",float:"left"},dueDateVal:{marginLeft:"5px"},projManagerRow:{margin:"10px 0 0 20px",color:"darkGrey"},circleStyle:{display:"inline-block",borderRadius:"50%",width:35,height:35,float:"left"},projManagerName:{margin:"10px 0 0 15px",float:"left"}}}),{withTheme:!0})(zt),Gt=(a(764),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={loadedUser:{},projects:[],overTime:0,flexTime:0},r.getProject=r.getProject.bind(Object(m.a)(r)),r.formatWeekEnding=r.formatWeekEnding.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"formatWeekEnding",value:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth(),n=("0"+t.getDate()).slice(-2);return["January","February","March","April","May","June","July","August","September","October","November","December"][r]+" "+n+", "+a}},{key:"getProject",value:function(e,t,a){for(var r=[],n=0;n<e.length;n++)"OPEN"==e[n].status&&r.push(e[n]);(e=r).sort((function(e,t){return e.end_date-t.end_date}));var s=a.split("|"),o=parseFloat(s[0]),i=parseFloat(s[1]);this.setState({projects:e,loadedUser:t,overTime:o,flexTime:i}),0==this.state.projects.length&&(document.getElementById("recentNewProjTitle").innerHTML="You don't have any open projects")}},{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("div",{className:t.root},n.a.createElement("div",{className:t.topContainer},n.a.createElement(Ut.a,{className:t.leftPaper,elevation:2},n.a.createElement("div",{className:t.projTitle,id:"recentNewProjTitle"},"Recent / New Projects"),0==this.state.projects.length?"":this.state.projects.map((function(a,r){return n.a.createElement("div",{className:t.projInfo,key:r},n.a.createElement(Vt,{key:a.project_code,history:e.props.history,projName:a.project_code,dueDate:e.formatWeekEnding(a.end_date),projManagerName:a.project_manager_id.first_name+" "+a.project_manager_id.last_name}))}))),n.a.createElement("div",null,n.a.createElement("div",{id:"timesheetDetailContainer",className:t.timesheetDetailContainer},n.a.createElement(ie,{fetchProject:this.getProject,history:this.props.history,dashboardTimesheet:!0,userId:this.props.match.params.id,token:this.props.token})),n.a.createElement("div",{className:t.flexVancationContainer},n.a.createElement(Ut.a,{className:t.bottomLeftPaper,elevation:2},n.a.createElement("div",{className:t.title},"Overtime"),n.a.createElement("hr",{className:t.seperator}),n.a.createElement("div",{className:t.vacDays},this.state.overTime)),n.a.createElement(Ut.a,{className:t.bottomMidPaper,elevation:2},n.a.createElement("div",{className:t.title},"Vacation Days"),n.a.createElement("hr",{className:t.seperator}),n.a.createElement("div",{className:t.vacDays},this.state.loadedUser.vacation)),n.a.createElement(Ut.a,{className:t.bottomRightPaper,elevation:2},n.a.createElement("div",{className:t.title},"Flextime"),n.a.createElement("hr",{className:t.seperator}),n.a.createElement("div",{className:t.vacDays},this.state.flexTime))))))}}]),a}(r.Component)),Kt=Object(L.a)((function(){var e;return{root:{flexGrow:1},leftPanelContainer:{width:"360px"},leftPaper:(e={overflow:"scroll",maxHeight:"800px"},Object(Ne.a)(e,"overflow","auto"),Object(Ne.a)(e,"width","310px"),Object(Ne.a)(e,"margin","0px 20px 0 35px"),Object(Ne.a)(e,"boxShadow","none"),Object(Ne.a)(e,"border","solid 1px lightgray"),Object(Ne.a)(e,"borderRadius","5px"),e),rightTopPaper:{height:500},bottomLeftPaper:{height:200,width:302,textAlign:"center",boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px"},bottomMidPaper:{height:200,width:302,textAlign:"center",boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px",marginLeft:45},bottomRightPaper:{height:200,width:302,textAlign:"center",boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px",marginLeft:45},title:{display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",margin:"10px 0 0 0"},seperator:{borderTop:"1px solid lightgray"},projTitle:{margin:"20px 0 0 20px",fontWeight:700},CircularProgressbar:{width:"40%",marginTop:"18px"},topContainer:{display:"flex"},flexVancationContainer:{display:"flex",margin:"22px 0 0 4px"},timesheetDetailContainer:{minWidth:"1000px",textAlign:"center",height:"500px",fontSize:"18pt",borderRadius:"5px",cursor:"pointer"},projInfo:{cursor:"pointer"},vacDays:{fontSize:"80pt",color:"lightgray"}}}),{withTheme:!0})(Gt),qt=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).clickRemove=function(){e.props.history.push("/dashboard/supervisor/remove")},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{title:"Remove an employee to a project"},n.a.createElement(H.a,{className:e.iconButton,onClick:this.clickRemove,color:"primary",variant:"contained"},"Remove")))}}]),a}(n.a.Component),Jt=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(qt),Yt=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).clickAssign=function(){e.props.history.push("/dashboard/supervisor/assign")},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{title:"Assign an employee to a project"},n.a.createElement(H.a,{className:e.iconButton,onClick:this.clickAssign,color:"primary",variant:"contained"},"Assign")))}}]),a}(n.a.Component),Zt=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(Yt),Xt=(a(765),[{name:"employeeId",label:"Employee ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"}]),Qt=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).getCustomTheme=function(){return Object(B.a)({overrides:{MUIDataTable:{paper:{padding:"45px"}},MUIDataTableHeadCell:{data:{fontSize:"16px",fontWeight:"bold"}},MUIDataTableBodyCell:{root:{fontSize:"16px"}},MUIDataTableToolbar:{root:{padding:"0"}}}})},r.state={data:[],errorAlert:!1},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getEmployees",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),e.prev=2,e.next=5,w.getEmployeesBySupervisor(a.employee_id,t);case 5:r=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),this.setState({errorAlert:!0}),setTimeout((function(){n.setState({errorAlert:!1}),n.props.history.push("/dashboard/".concat(a.employee_id))}),1e3),e.abrupt("return",[]);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,this.getEmployees();case 3:for(t=e.sent,a=[],r=0;r<t.length;r++)n=t[r].employee_id,s=t[r].first_name,o=t[r].last_name,(i=[]).push(n),i.push(s),i.push(o),a.push(i);this.setState({data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.props.classes;return n.a.createElement("div",{className:"supervisorPortal-container"},n.a.createElement(z.a,{theme:this.getCustomTheme()},this.state.errorAlert?n.a.createElement(W,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("div",{className:"supervisorPortal-employeesTitle"},"Employees"),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,customToolbar:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Jt,{history:e.props.history}),n.a.createElement(Zt,{history:e.props.history}))},onRowClick:function(t,a){localStorage.setItem("name",t[1]+" "+t[2]),e.props.history.push("/dashboard/supervisor/".concat(t[0]))}}),columns:Xt,data:this.state.data})))}}]),a}(r.Component),$t=a(1004),ea=Object(wt.a)((function(e){return{root:{width:"1100px",backgroundColor:"white",border:"1px solid lightgray",borderRadius:"5px",padding:"45px",display:"flex",justifyContent:"center"},supervisorButton:{width:"fit-content"},removeFromProjTitle:{fontSize:"16px",fontWeight:"bold",margin:"15px 0 0 0"},removeFromProjContainer:{width:"400px",display:"flex",flexDirection:"column",alignItems:"center"},supervisorMargin:{width:"350px !important"},button:{width:"200px",margin:"35px 0 35px 0"}}})),ta=function(e){var t=ea(),a=localStorage.getItem("token"),s=JSON.parse(sessionStorage.getItem("user")),o=n.a.useState(),i=Object(le.a)(o,2),p=i[0],u=i[1],m=n.a.useState(),d=Object(le.a)(m,2),h=d[0],f=d[1],g=n.a.useState(),b=Object(le.a)(g,2),v=b[0],j=b[1],E=n.a.useState(!1),y=Object(le.a)(E,2),k=y[0],w=y[1],x=n.a.useState(!1),N=Object(le.a)(x,2),S=N[0],_=N[1],C=n.a.useState([]),D=Object(le.a)(C,2),T=D[0],I=D[1],P=function(){var t=Object(c.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.getProjectsForSupervisor(s.employee_id,a);case 3:r=t.sent,t.next=11;break;case 6:t.prev=6,t.t0=t.catch(0),w(!1),_(!0),setTimeout((function(){_(!1),w(!1),e.history.push("/dashboard/supervisor")}),1e3);case 11:return j(r),t.abrupt("return",r);case 13:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var e=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=p){e.next=2;break}return e.abrupt("return");case 2:return t=p.employees.filter((function(e){return null==e.end_date&&e.supervisor_id==s.employee_id})),I(t),e.abrupt("return",T);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){A()}),[p]);var L=function(){var t=Object(c.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),null!=p&&null!=h){t.next=3;break}return t.abrupt("return",null);case 3:return p.employees=p.employees.filter((function(e){return h.indexOf(e)<0})),t.prev=4,t.next=7,O.updateProject(p,a);case 7:w(!0),_(!1),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),_(!0),w(!1);case 15:setTimeout((function(){_(!1),w(!1),e.history.push("/dashboard/supervisor")}),1e3);case 16:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(){return t.apply(this,arguments)}}();return n.a.createElement("div",{className:"removeFromProj-container"},n.a.createElement("div",{className:t.root},S?n.a.createElement(W,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,k?n.a.createElement(W,{config:{message:"Success!",variant:"success"}}):null,n.a.createElement("div",{className:t.removeFromProjContainer},n.a.createElement("div",{className:t.removeFromProjTitle},"Remove From Project"),n.a.createElement($t.a,{className:t.supervisorMargin,options:v,getOptionLabel:function(e){return e.project_code},onChange:function(e,t){return u(t)},renderInput:function(e){return n.a.createElement(se.a,Object.assign({},e,{variant:"standard",label:"Project ID"}))}}),n.a.createElement($t.a,{multiple:!0,className:t.supervisorMargin,options:T,getOptionLabel:function(e){return e.first_name+" "+e.last_name},onChange:function(e,t){return f(t)},renderInput:function(e){return n.a.createElement(se.a,Object.assign({},e,{variant:"standard",label:"Add employees",placeholder:"Search for an employee"}))}}),n.a.createElement(H.a,{className:t.button,variant:"contained",color:"primary",onClick:function(){return L()}},"Remove"))))},aa=Object(wt.a)((function(e){return{assignToProjContainer:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},root:{width:"1100px",backgroundColor:"white",border:"1px solid lightgray",borderRadius:"5px",display:"flex",justifyContent:"center",padding:"45px"},innerAssignToProjContainer:{width:"400px",display:"flex",flexDirection:"column",alignItems:"center"},supervisorButton:{width:"fit-content"},assignToProjTitle:{fontSize:"16px",fontWeight:"bold",margin:"15px 0 0 0"},supervisorMargin:{width:"350px !important"},button:{width:"200px",margin:"35px 0 35px 0"}}})),ra=function(e){var t=aa(),a=localStorage.getItem("token"),s=n.a.useState(),o=Object(le.a)(s,2),i=o[0],p=o[1],u=n.a.useState([]),m=Object(le.a)(u,2),d=m[0],h=m[1],f=n.a.useState([]),g=Object(le.a)(f,2),b=g[0],v=g[1],j=n.a.useState([]),E=Object(le.a)(j,2),y=E[0],k=E[1],x=n.a.useState(!1),N=Object(le.a)(x,2),S=N[0],_=N[1],C=n.a.useState(!1),D=Object(le.a)(C,2),T=D[0],I=D[1],P=function(){var t=Object(c.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.getAllProjects(a);case 3:r=(r=t.sent).filter((function(e){return"OPEN"==e.status})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),_(!1),I(!0),setTimeout((function(){I(!1),_(!1),e.history.push("/dashboard/supervisor")}),1e3);case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(c.a)(l.a.mark((function t(){var r,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.parse(sessionStorage.getItem("user")),t.prev=1,t.next=4,w.getEmployeesBySupervisor(r.employee_id,a);case 4:n=t.sent,t.next=13;break;case 7:return t.prev=7,t.t0=t.catch(1),_(!1),I(!0),setTimeout((function(){I(!1),_(!1),e.history.push("/dashboard/supervisor")}),1e3),t.abrupt("return",[]);case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,P();case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=k,e.next=8,A();case 8:e.t3=e.sent,(0,e.t2)(e.t3);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var L=function(){var t=Object(c.a)(l.a.mark((function t(){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),null!=i){t.next=3;break}return t.abrupt("return",null);case 3:if(0!=d.length){t.next=5;break}return t.abrupt("return",null);case 5:for(r=0;r<d.length;r++)i.employees.push(d[r]);return t.prev=6,t.next=9,O.updateProject(i,a);case 9:_(!0),I(!1),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),I(!0),_(!1);case 17:setTimeout((function(){I(!1),_(!1),e.history.push("/dashboard/supervisor")}),1e3);case 18:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(){return t.apply(this,arguments)}}();return n.a.createElement("div",{className:t.assignToProjContainer},n.a.createElement("div",{className:t.root},T?n.a.createElement(W,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,S?n.a.createElement(W,{config:{message:"Success!",variant:"success"}}):null,n.a.createElement("div",{className:t.innerAssignToProjContainer},n.a.createElement("div",{className:t.assignToProjTitle},"Assign To Project"),n.a.createElement($t.a,{className:t.supervisorMargin,options:b,getOptionLabel:function(e){return e.project_code},onChange:function(e,t){return p(t)},renderInput:function(e){return n.a.createElement(se.a,Object.assign({},e,{variant:"standard",label:"Project ID"}))}}),n.a.createElement($t.a,{multiple:!0,className:t.supervisorMargin,options:y,getOptionLabel:function(e){return e.first_name+" "+e.last_name},onChange:function(e,t){return h(t)},renderInput:function(e){return n.a.createElement(se.a,Object.assign({},e,{variant:"standard",label:"Add employees",placeholder:"Search for an employee"}))}}),n.a.createElement(H.a,{className:t.button,variant:"contained",color:"primary",onClick:L},"Assign"))))},na=[{name:"projectId",label:"Project ID",className:"column"},{name:"projectName",label:"Project Name",className:"column"},{name:"projectManager",label:"Project Manager",className:"column"},{name:"projectStatus",label:"Status",className:"column"}],sa=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={data:[],errorAlert:!1},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getProjects",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,O.getProjectsForUser(this.props.match.params.id,t);case 4:a=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),this.setState({errorAlert:!0}),setTimeout((function(){r.setState({errorAlert:!1}),r.props.history.push("/dashboard/supervisor")}),1e3),e.abrupt("return",[]);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,this.getProjects();case 3:for(t=e.sent,a=[],r=0;r<t.length;r++)n=t[r].project_code,s=t[r].project_name,o=t[r].project_manager_id.first_name+" "+t[r].project_manager_id.last_name,i=t[r].status,(c=[]).push(n),c.push(s),c.push(o),c.push(i),a.push(c);this.setState({data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.state.errorAlert?n.a.createElement(W,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("h1",null,"Projects Assigned To ",localStorage.name),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1}),columns:na,data:this.state.data}))}}]),a}(r.Component),oa=a(497),ia=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.loadedUser;return n.a.createElement(n.a.Fragment,null,r?n.a.createElement("div",{className:a.container},n.a.createElement(ve.a,{className:a.avatar,alt:"employee photo"},n.a.createElement(be.a,{className:a.faceIcon})),n.a.createElement("div",{className:a.textContainer},n.a.createElement("div",{className:a.textHeader},"Employee ID"),n.a.createElement(se.a,{className:a.text,name:"employeeId",onChange:function(t){return e.props.formHandler(t)},disabled:!this.props.hr,defaultValue:r.employee_id,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),n.a.createElement("div",{className:a.textContainerChips},this.props.isHr?n.a.createElement(oa.a,{className:a.chip,icon:n.a.createElement(be.a,null),label:"HR"}):null,this.props.isAdmin?n.a.createElement(oa.a,{className:a.chip,icon:n.a.createElement(be.a,null),label:"Admin"}):null,this.props.isSuperTimesheetApprover?n.a.createElement(oa.a,{className:a.chip,icon:n.a.createElement(be.a,null),label:"Super Timesheet Approver"}):null)):null)}}]),a}(r.Component),la=Object(L.a)((function(){var e;return e={container:{width:"300px",display:"flex",flexDirection:"column",alignItems:"center",padding:"45px"},avatar:{marginTop:30,marginBottom:20,width:100,height:100,margin:"0 auto"},textContainer:{width:"100%",margin:"5px 0 0 0"},textHeader:{color:"gray"},text:{borderBottom:"1px solid lightgray"},chip:{margin:5},textContainerChips:{width:"100%",marginTop:"15px"}},Object(Ne.a)(e,"avatar",{width:100,height:100,margin:"0 auto"}),Object(Ne.a)(e,"faceIcon",{width:"100%",height:"100%"}),e}),{withTheme:!0})(ia),ca=a(987),pa=a(988),ua=a(989),ma=a(990),da=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).handleClickOpen=function(){r.setState({open:!0})},r.handleClose=function(){r.setState({open:!1})},r.state={open:!1,employees:[],searchList:[]},r.handleClickOpen=r.handleClickOpen.bind(Object(m.a)(r)),r.handleClose=r.handleClose.bind(Object(m.a)(r)),r.createData=r.createData.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"createData",value:function(e,t,a,r){return{image:e,id:t,name:a,select:r}}},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,w.getAllEmployees(t);case 3:a=e.sent,this.setState({searchList:a}),a.forEach((function(e){r.state.employees.push(r.createData(n.a.createElement(be.a,null),e.employee_id,e.first_name+" "+e.last_name,n.a.createElement(H.a,{style:{marginLeft:"20px"},variant:"outlined",color:"primary",onClick:function(){r.props.selectSupervisor(e.employee_id,e.first_name,e.last_name),r.handleClose()}}," Select")))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",null,n.a.createElement(H.a,{disabled:!this.props.hr,variant:"outlined",color:"primary",className:e.button,onClick:this.handleClickOpen},"Choose Supervisor"),n.a.createElement(ca.a,{className:e.container,disableBackdropClick:!0,disableEscapeKeyDown:!0,open:this.state.open,onClose:this.handleClose},n.a.createElement(ma.a,null,"Select a Supervisor"),n.a.createElement(ua.a,null,n.a.createElement($t.a,{disableClearable:!0,options:this.state.searchList.map((function(e){return e.first_name+" "+e.last_name})),renderInput:function(e){return n.a.createElement(se.a,Object.assign({},e,{label:"Search for a Supervisor",margin:"normal",variant:"outlined",name:"name",InputProps:Object(kt.a)({},e.InputProps,{type:"search"})}))}}),n.a.createElement(K.a,{className:e.table},n.a.createElement(Z.a,null,n.a.createElement(X.a,null,n.a.createElement(J.a,null," Photo "),n.a.createElement(J.a,null," ID "),n.a.createElement(J.a,null," Name "),n.a.createElement(J.a,null," Select "))),n.a.createElement(q.a,null,this.state.employees.map((function(e,t){return n.a.createElement(X.a,{key:t},n.a.createElement(J.a,{align:"left"},e.image),n.a.createElement(J.a,{align:"left"},e.id),n.a.createElement(J.a,{align:"left"},"".concat(e.name)),n.a.createElement(J.a,{align:"left"},e.select))}))))),n.a.createElement(pa.a,null,n.a.createElement(H.a,{onClick:this.handleClose,color:"primary"},"Cancel"),n.a.createElement(H.a,{onClick:this.handleClose,color:"primary"},"Ok"))))}}]),a}(r.Component),ha=Object(L.a)((function(e){return{container:{height:700,minWidth:350,minHeight:400},button:{marginBottom:10,display:"inline-block",width:210}}}),{withTheme:!0})(da),fa=a(1008),ga=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("div",{className:t.field},n.a.createElement("div",null,n.a.createElement(Ie.a,{className:t.title,variant:"h6"}," Labor Grade "),this.props.marksValue||void 0==this.props.marksValue?n.a.createElement(fa.a,{defaultValue:this.props.hr?0:parseInt(this.props.marksValue),valueLabelFormat:function(t){return e.props.valueLabelFormat(t)},onChange:function(t,a){return e.props.getSliderValue(a)},"aria-labelledby":"discrete-slider-restrict",className:t.slider,step:null,valueLabelDisplay:"auto",marks:this.props.marks,disabled:!this.props.hr,max:7}):n.a.createElement(fe.a,null)))}}]),a}(r.Component),ba=Object(L.a)((function(){return{title:{fontSize:"16px",fontWeight:"bold",margin:"0 0 10px 0"},field:{marginTop:50},slider:{width:"100%"}}}),{withTheme:!0})(ga),va=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(p.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.supervisor;return n.a.createElement(n.a.Fragment,null,r?n.a.createElement("div",{className:a.container},n.a.createElement("div",{className:a.field},n.a.createElement("div",{className:a.title}," Basic Information "),n.a.createElement(se.a,{className:a.input,disabled:!this.props.hr,defaultValue:this.props.loadedUser.first_name,helperText:"First Name",onChange:function(t){return e.props.formHandler(t)},name:"firstName",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(se.a,{className:a.input,disabled:!this.props.hr,defaultValue:this.props.loadedUser.last_name,helperText:"Last Name",name:"lastName",onChange:function(t){return e.props.formHandler(t)},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),n.a.createElement("div",{className:a.field},n.a.createElement(ba,{valueLabelFormat:this.props.valueLabelFormat,getSliderValue:this.props.getSliderValue,marks:this.props.marks,hr:this.props.hr,marksValue:this.props.marksValue})),n.a.createElement("div",{className:a.field},n.a.createElement("div",{className:a.bottomContainer},n.a.createElement("div",{className:a.supervisorContainer},n.a.createElement(ha,{hr:this.props.hr,selectSupervisor:this.props.selectSupervisor})),n.a.createElement("div",null,n.a.createElement(oa.a,{className:a.chip,icon:n.a.createElement(be.a,null),label:this.props.supervisorName})))),n.a.createElement("div",{className:a.field},n.a.createElement("div",{className:a.title},"Vacation Days"),n.a.createElement(se.a,{className:a.input,disabled:!this.props.hr,defaultValue:this.props.loadedUser.vacation,helperText:"Vacation Days",onChange:function(t){return e.props.formHandler(t)},name:"vacation",type:"number",margin:"normal",fullWidth:!0,InputLabelProps:{shrink:!0}}))):null)}}]),a}(r.Component),ja=Object(L.a)((function(){return{container:{width:"350px",padding:"45px"},title:{margin:"40px 0 0 0",fontSize:"16px",fontWeight:"bold"},paper:{},input:{display:"block",width:"100%",margin:"5px 0 0 0"},basicInfoContainer:{marginTop:"50px"},laborGradeContainer:{margin:"25px 0 0 0"},bottomContainer:{display:"flex",flexDirection:"column",alignItems:"center"},supervisorContainer:{margin:"40px 0 0 0"}}}),{withTheme:!0})(va),Ea=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(p.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:t.container},n.a.createElement(St.ValidatorForm,{onSubmit:this.props.handleSubmit},n.a.createElement("div",{className:t.field},n.a.createElement("div",{className:t.title},"Change Password"),this.props.hr?null:n.a.createElement(St.TextValidator,{value:this.props.oldPassword,autoComplete:this.props.oldPassword,className:t.input,name:"oldPassword",type:"password",helperText:"Old Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0},validators:["isPassword"],errorMessages:["Password length has to be greater than 6"]}),n.a.createElement(St.TextValidator,{className:t.input,name:"newPassword",type:"password",helperText:"New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0},value:this.props.newPassword,validators:["isPassword"],errorMessages:["Password length has to be greater than 6"]}),n.a.createElement(St.TextValidator,{className:t.input,name:"confirmPassword",type:"password",helperText:"Confirm New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0},value:this.props.confirmPassword,validators:["isPassword"],errorMessages:["Password length has to be greater than 6"]})),n.a.createElement(H.a,{variant:"contained",color:"primary",className:t.button,onClick:this.props.handleSubmit},"Submit"))))}}]),a}(r.Component),ya=Object(L.a)((function(){return{container:{width:"350px",padding:"45px",display:"flex",flexDirection:"column",alignItems:"center"},input:{width:"100%",margin:"5px 0 0 0"},field:{},button:{width:"60%",marginTop:"35px"},title:{fontSize:"16px",fontWeight:"bold",margin:"35px 0 0 0 !important"}}}),{withTheme:!0})(Ea),ka=a(444),wa=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={loadedUser:null,supervisor:null,isAdmin:!1,isHr:!1,isSuperTimesheetApprover:!1,marks:ka,laborGradeId:"",laborGradeName:"",vacation:"",supervisorSelected:!1,supervisorFirstName:"",supervisorLastName:"",oldPassword:"",newPassword:"",confirmPassword:"",marksValue:0,passwordChange:!1},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r.formHandler=r.formHandler.bind(Object(m.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(m.a)(r)),r.selectSupervisor=r.selectSupervisor.bind(Object(m.a)(r)),r.valueLabelFormat=r.valueLabelFormat.bind(Object(m.a)(r)),r.getSliderValue=r.getSliderValue.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.fetchData(e),this.setState({errorAlert:!1,successAlert:!1,passwordChange:!1}),St.ValidatorForm.addValidationRule("isPassword",(function(e){return!(e.length<6&&e.length>0)}))}},{key:"componentWillUnmount",value:function(){St.ValidatorForm.removeValidationRule("isPassword")}},{key:"valueLabelFormat",value:function(e){return this.state.marks[e].label}},{key:"getSliderValue",value:function(e){this.setState({laborGradeId:this.state.marks[e].label,laborGradeName:this.state.marks[e].name})}},{key:"selectSupervisor",value:function(e,t,a){this.setState({supervisorId:e,supervisorFirstName:t,supervisorLastName:a})}},{key:"formHandler",value:function(e){this.setState(Object(Ne.a)({},e.target.name,e.target.value)),(this.state.newPassword.length>0||this.state.confirmPassword.length>0||this.state.oldPassword.length>0)&&this.setState({passwordChange:!0})}},{key:"handleSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,p,u,m,d,h=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token"),a=this.state.loadedUser,r=this.state,n=r.firstName,s=r.lastName,o=r.laborGradeId,i=r.laborGradeName,c=r.supervisorId,p=r.vacation,u=r.oldPassword,m=r.newPassword,d=r.confirmPassword,e.prev=3,!(u.length>0||m.length>0||d.length>0)){e.next=38;break}if(!this.props.hr){e.next=22;break}if(m===d){e.next=10;break}this.setState({errorAlert:!0}),e.next=20;break;case 10:return a.first_name=n,a.last_name=s,a.labor_grade_id.labor_grade_id=o,a.labor_grade_id.labor_grade_name=i,a.vacation=p,a.supervisor_id=c,a.password=m,e.next=19,w.updateEmployee(this.props.loadedUser.employee_id,t,a);case 19:this.setState({successAlert:!0,errorAlert:!1,passwordChange:!1});case 20:e.next=36;break;case 22:if(u===a.password&&m===d){e.next=26;break}this.setState({errorAlert:!0}),e.next=36;break;case 26:return a.first_name=n,a.last_name=s,a.labor_grade_id.labor_grade_id=o,a.labor_grade_id.labor_grade_name=i,a.vacation=p,a.supervisor_id=c,a.password=m,e.next=35,w.updateEmployee(this.props.loadedUser.employee_id,t,a);case 35:this.setState({successAlert:!0,errorAlert:!1,passwordChange:!1});case 36:e.next=47;break;case 38:return a.first_name=n,a.last_name=s,a.labor_grade_id.labor_grade_id=o,a.labor_grade_id.labor_grade_name=i,a.vacation=p,a.supervisor_id=c,e.next=46,w.updateEmployee(this.props.loadedUser.employee_id,t,a);case 46:this.setState({successAlert:!0,errorAlert:!1});case 47:e.next=52;break;case 49:e.prev=49,e.t0=e.catch(3),this.setState({successAlert:!1,errorAlert:!0});case 52:setTimeout((function(){h.setState({successAlert:!1,errorAlert:!1})}),1e3);case 53:case"end":return e.stop()}}),e,this,[[3,49]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.getEmployeeById(this.props.match.params.id,t);case 3:return a=e.sent,e.next=6,w.getEmployeeById(a.supervisor_id,t);case 6:for(n in r=e.sent,this.setState({loadedUser:a,firstName:a.first_name,lastName:a.last_name,laborGradeId:a.labor_grade_id.labor_grade_id,laborGradeName:a.labor_grade_id.labor_grade_name,supervisorId:a.supervisor_id,isAdmin:a.is_admin,isHr:a.is_hr_staff,vacation:a.vacation,isSuperTimesheetApprover:a.is_super_timesheet_approver,oldPassword:"",newPassword:"",confirmPassword:"",supervisor:r,supervisorFirstName:r.first_name,supervisorLastName:r.last_name,passwordChange:!1}),this.state.marks)this.state.marks[n].label===this.state.laborGradeId&&this.setState({marksValue:n});e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response.status===ke.UNAUTHORIZED&&this.props.sessionLogoutHandler();case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.hr,r=this.state,s=r.loadedUser,o=r.supervisor;return n.a.createElement("div",{className:t.container},n.a.createElement("div",{className:t.root},this.state.errorAlert?n.a.createElement(W,{config:{message:"error",variant:"error"}}):null,this.state.successAlert?n.a.createElement(W,{config:{message:"success",variant:"success"}}):null,s&&o?n.a.createElement(Ut.a,{className:t.paper,elevation:2},n.a.createElement("div",{className:t.employeeFormContainer},n.a.createElement(la,{loadedUser:s,isHr:this.state.isHr,isAdmin:this.state.isAdmin,isSuperTimesheetApprover:this.state.isSuperTimesheetApprover}),n.a.createElement(Pe.a,{className:t.divider}),n.a.createElement(ja,{loadedUser:s,supervisor:o,hr:a,formHandler:this.formHandler,value:this.state.value,selectSupervisor:this.selectSupervisor,supervisorName:"".concat(this.state.supervisorFirstName," ").concat(this.state.supervisorLastName),valueLabelFormat:this.valueLabelFormat,getSliderValue:this.getSliderValue,marks:this.state.marks,marksValue:this.state.marksValue}),n.a.createElement(Pe.a,{className:t.divider}),n.a.createElement(ya,{loadedUser:s,hr:a,formHandler:this.formHandler,handleSubmit:this.handleSubmit,oldPassword:this.state.oldPassword,newPassword:this.state.newPassword,confirmPassword:this.state.confirmPassword}))):n.a.createElement(fe.a,null)))}}]),a}(r.Component),xa=Object(L.a)((function(){return{container:{width:"100%",display:"flex",justifyContent:"center"},root:{width:"1000px"},employeeFormContainer:{display:"flex"},paper:{boxShadow:"none",border:"solid 1px lightgray",borderRadius:"5px",height:"680px"},divider:{height:"630px",width:"1px",margin:"25px 0 0 0"},employeeInfoContainer:{display:"flex"}}}),{withTheme:!0})(wa),Oa=a(999),Na=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:t.container},n.a.createElement(ve.a,{className:t.avatar,alt:"employee photo"},n.a.createElement(be.a,{className:t.faceIcon})),n.a.createElement("div",{className:t.textContainer},n.a.createElement("div",{className:t.textHeader},"Employee ID"),n.a.createElement(se.a,{className:t.text,name:"employeeId",onChange:function(t){return e.props.formHandler(t)},disabled:!0,fullWidth:!0,InputLabelProps:{shrink:!0}})),n.a.createElement("div",{className:t.textContainer},n.a.createElement("div",{className:t.textHeaderRole},"Role"),n.a.createElement("div",{className:t.innerContainer},n.a.createElement("div",{className:t.hrTitle},n.a.createElement("p",null,"Human Resource")),n.a.createElement("div",{className:t.hrCheckBox},n.a.createElement(Oa.a,{checked:this.props.isHr,name:"isHr",color:"primary",onClick:this.props.isHrSwitch})),n.a.createElement("div",{className:t.adminTitle},n.a.createElement("p",null,"Administrator")),n.a.createElement("div",{className:t.adminCheckBox},n.a.createElement(Oa.a,{checked:this.props.isAdmin,name:"isHr",color:"primary",onClick:this.props.isAdminSwitch})),n.a.createElement("div",{className:t.superTimesheetApproverTitle},n.a.createElement("p",null,"Super Timesheet Approver")),n.a.createElement("div",{className:t.superTimesheetApproverCheckbox},n.a.createElement(Oa.a,{checked:this.props.isSuperTimesheetApprover,name:"isHr",color:"primary",onClick:this.props.isSuperTimesheetApproverSwitch}))))))}}]),a}(r.Component),Sa=Object(L.a)((function(){return{container:{display:"flex",width:"300px",flexDirection:"column",alignItems:"center",padding:"45px"},avatar:{width:100,height:100,margin:"10px 0 0"},textContainer:{display:"flex",flexDirection:"column",width:"100%"},textHeader:{color:"black",marginTop:"35px",fontWeight:"bold",fontSize:"16px"},textHeaderRole:{marginTop:"30px",marginBottom:"25px",fontWeight:"bold",fontSize:"16px"},text:{borderBottom:"1px solid lightgray"},faceIcon:{width:"100%",height:"100%"},switch:{color:"green",marginLeft:100},hrTitle:{fontWeight:"bold",fontSize:"16px"},adminTitle:{fontWeight:"bold",fontSize:"16px"},superTimesheetApproverTitle:{fontWeight:"bold",fontSize:"16px"}}}),{withTheme:!0})(Na),_a=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(p.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("div",{className:t.container},n.a.createElement("div",{className:t.field},n.a.createElement("div",{className:t.title},"Basic Information"),n.a.createElement(se.a,{className:t.input,disabled:!this.props.hr,helperText:"First Name",onChange:function(t){return e.props.formHandler(t)},name:"firstName",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(se.a,{className:t.input,disabled:!this.props.hr,helperText:"Middle Name",onChange:function(t){return e.props.formHandler(t)},name:"middleName",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(se.a,{className:t.input,disabled:!this.props.hr,helperText:"Last Name",name:"lastName",onChange:function(t){return e.props.formHandler(t)},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),n.a.createElement("div",{className:t.field},n.a.createElement(ba,{marks:this.props.marks,getSliderValue:this.props.getSliderValue,valueLabelFormat:this.props.valueLabelFormat,hr:this.props.hr})),n.a.createElement("div",{className:t.field},n.a.createElement("div",{className:t.bottomContainer},n.a.createElement("div",null,n.a.createElement(ha,{hr:this.props.hr,selectSupervisor:this.props.selectSupervisor})),n.a.createElement("div",null,this.props.supervisorSelected?n.a.createElement(oa.a,{className:t.chip,icon:n.a.createElement(be.a,null),label:this.props.supervisorName}):null),n.a.createElement("div",{className:t.fieldVacation},n.a.createElement("div",{className:t.title},"Vacation Days"),n.a.createElement(se.a,{className:t.input,helperText:"Vacation Days",type:"number",name:"vacation",onChange:function(t){return e.props.formHandler(t)},disabled:!this.props.hr,fullWidth:!0,InputLabelProps:{shrink:!0}})))))}}]),a}(r.Component),Ca=Object(L.a)((function(){var e;return e={container:{padding:"45px",width:"350px"},field:{},title:{fontSize:"16px",fontWeight:"bold",margin:"20px 0 0 0"},paper:{height:600},input:{display:"inline-block",width:"100%",margin:"10px 0 0 0"}},Object(Ne.a)(e,"field",{marginTop:50}),Object(Ne.a)(e,"fieldVacation",{marginTop:"25px",width:"100%"}),Object(Ne.a)(e,"slider",{width:"100%"}),Object(Ne.a)(e,"supervisorField",{marginTop:20,marginBottom:20}),Object(Ne.a)(e,"supervisorName",{display:"inline"}),Object(Ne.a)(e,"formControl",{width:"50%",marginTop:10}),Object(Ne.a)(e,"bottomContainer",{display:"flex",flexDirection:"column",alignItems:"center"}),e}),{withTheme:!0})(_a),Da=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(p.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("div",{className:t.container},n.a.createElement(St.ValidatorForm,{onSubmit:this.props.handleSubmit},n.a.createElement("div",{className:t.field},n.a.createElement("div",{className:t.title},"Password"),n.a.createElement(St.TextValidator,{className:t.input,name:"newPassword",type:"password",helperText:"New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0},value:this.props.newPassword,validators:["isPassword"],errorMessages:["Password length has to be greater than 6"]}),n.a.createElement(St.TextValidator,{className:t.input,name:"confirmPassword",type:"password",helperText:"Confirm New Password",fullWidth:!0,onChange:function(t){return e.props.formHandler(t)},margin:"normal",InputLabelProps:{shrink:!0},value:this.props.confirmPassword,validators:["isPassword"],errorMessages:["Password length has to be greater than 6"]})),n.a.createElement(H.a,{variant:"contained",color:"primary",className:t.button,onClick:this.props.handleSubmit},"Submit")))}}]),a}(r.Component),Ta=Object(L.a)((function(){return{container:{width:"350px",display:"flex",flexDirection:"column",alignItems:"center",padding:"45px"},title:{fontSize:"16px",fontWeight:"bold",width:"100%"},input:{display:"block",width:"100%",margin:"10px 0 0 0"},field:{marginTop:"50px",width:"100%"},button:{width:"60%",marginTop:"30px"}}}),{withTheme:!0})(Da),Ia=a(444);a(437);var Pa=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={isHr:!1,isAdmin:!1,isSuperTimesheetApprover:!1,vacation:0,supervisorId:"",labelGradeId:"",labelGradeName:"",newPassword:"",confirmPassword:"",supervisorFirstName:"",supervisorLastName:"",supervisorSelected:!1,marks:Ia},r.valueLabelFormat=r.valueLabelFormat.bind(Object(m.a)(r)),r.getSliderValue=r.getSliderValue.bind(Object(m.a)(r)),r.formHandler=r.formHandler.bind(Object(m.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(m.a)(r)),r.isHrSwitch=r.isHrSwitch.bind(Object(m.a)(r)),r.isAdminSwitch=r.isAdminSwitch.bind(Object(m.a)(r)),r.isSuperTimesheetApproverSwitch=r.isSuperTimesheetApproverSwitch.bind(Object(m.a)(r)),r.selectSupervisor=r.selectSupervisor.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setState({firstName:"",middleName:"",lastName:"",supervisorId:"",newPassword:"",confirmPassword:"",isHr:!1,isAdmin:!1,isSuperTimesheetApprover:!1,vacation:0,laborGradeId:Ia[0].label,laborGradeName:"",errorAlert:!1,successAlert:!1,marks:Ia,supervisorSelected:!1,supervisorFirstName:"",supervisorLastName:""}),St.ValidatorForm.addValidationRule("isPassword",(function(e){return!(e.length<6&&e.length>0)}))}},{key:"componentWillUnmount",value:function(){St.ValidatorForm.removeValidationRule("isPassword")}},{key:"valueLabelFormat",value:function(e){return this.state.marks[e].label}},{key:"getSliderValue",value:function(e){this.setState({laborGradeId:this.state.marks[e].label,laborGradeName:this.state.marks[e].name})}},{key:"formHandler",value:function(e){e.preventDefault(),this.setState(Object(Ne.a)({},e.target.name,e.target.value))}},{key:"isHrSwitch",value:function(){this.setState({isHr:!this.state.isHr})}},{key:"isAdminSwitch",value:function(){this.setState({isAdmin:!this.state.isAdmin})}},{key:"isSuperTimesheetApproverSwitch",value:function(){this.setState({isSuperTimesheetApprover:!this.state.isSuperTimesheetApprover})}},{key:"selectSupervisor",value:function(e,t,a){this.setState({supervisorId:e,supervisorFirstName:t,supervisorLastName:a,supervisorSelected:!0})}},{key:"handleSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,p,u,m,d,h,f,g=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),a=this.state,r=a.firstName,n=a.middleName,s=a.lastName,o=a.supervisorId,i=a.laborGradeId,c=a.laborGradeName,p=a.confirmPassword,u=a.isHr,m=a.isAdmin,d=a.isSuperTimesheetApprover,h=a.vacation,f={supervisor_id:o,labor_grade_id:{labor_grade_id:i,labor_grade_name:c},password:p,first_name:r,middle_name:n,last_name:s,start_date:(new Date).getTime(),end_date:null,is_admin:m,is_hr_staff:u,is_super_timesheet_approver:d,is_secondary_approver:!1,vacation:h},e.next=6,w.createEmployee(t,f);case 6:this.setState({successAlert:!0,errorAlert:!1}),setTimeout((function(){g.setState({successAlert:!1,errorAlert:!1})}),1e3),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response.status===ke.UNAUTHORIZED&&this.props.sessionLogoutHandler();case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.hr;return n.a.createElement("div",{className:t.outerContainer},n.a.createElement("div",{className:t.root},this.state.errorAlert?n.a.createElement(W,{config:{message:"Submission Failed",variant:"error"}}):null,this.state.successAlert?n.a.createElement(W,{config:{message:"Submission Success!",variant:"success"}}):null,n.a.createElement(Ut.a,{className:t.paper,elevation:2},n.a.createElement("div",{className:t.container},n.a.createElement(Sa,{hr:a,formHandler:this.formHandler,isHrSwitch:this.isHrSwitch,isHr:this.state.isHr,isAdminSwitch:this.isAdminSwitch,isAdmin:this.state.isAdmin,isSuperTimesheetApproverSwitch:this.isSuperTimesheetApproverSwitch,isSuperTimesheetApprover:this.state.isSuperTimesheetApprover}),n.a.createElement(Pe.a,{orientation:"vertical",flexItem:!0,className:t.divider}),n.a.createElement(Ca,{hr:a,formHandler:this.formHandler,valueLabelFormat:this.valueLabelFormat,marks:this.state.marks,laborGradeId:this.state.laborGradeId,selectSupervisor:this.selectSupervisor,supervisorName:"".concat(this.state.supervisorFirstName," ").concat(this.state.supervisorLastName),supervisorSelected:this.state.supervisorSelected,getSliderValue:this.getSliderValue}),n.a.createElement(Pe.a,{orientation:"vertical",flexItem:!0,className:t.divider}),n.a.createElement(Ta,{hr:a,formHandler:this.formHandler,handleSubmit:this.handleSubmit,newPassword:this.state.newPassword,confirmPassword:this.state.confirmPassword})))))}}]),a}(r.Component),Aa=Object(L.a)((function(){return{outerContainer:{width:"1300px",display:"flex",justifyContent:"center"},root:{width:"1000px"},paper:{height:"780px"},divider:{height:"750px",margin:"15px 0 0 0"},container:{display:"flex"}}}),{withTheme:!0})(Pa),La=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={data:r.props.data,wp:r.props.wp,sumbitAlert:!1,successAlert:!1},r.handleSubmit=r.handleSubmit.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"handleSubmit",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log(this.state.data),t=[],a=[],r=[],this.state.data.forEach((function(e){var n=t.indexOf(e[2]);-1===n?(t.push(e[2]),a.push(parseInt(e[3])),r.push(1)):(a[n]+=parseInt(e[3]),r[n]+=1)})),n=[],s=this.state.wp.workPackagePlanCollection[0],t.forEach((function(e,t){var o={};o.project_code=s.project_code,o.work_package_id=s.work_package_id,o.type="ESTIMATE",o.start_date=(new Date).toISOString().split("T",1)[0],o.end_date=s.end_date,o.revision=i.props.revision,o.labor_grade_id=e,o.quantity=r[t],o.plan_hour=a[t],o.project_wp=s.project_wp,n.push(o)})),console.log(n),o=localStorage.getItem("token"),n.forEach(function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.createNewPlan(t,o);case 3:"exception throw"!=(a=e.sent)&&i.setState({successAlert:!0}),console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),console.log(r),console.log(t),console.log(a)}catch(p){console.error(p),this.setState({sumbitAlert:!0}),this.props.sessionLogoutHandler()}case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{title:"Submit the plan"},n.a.createElement(H.a,{className:e.iconButton,color:"primary",variant:"contained",onClick:this.handleSubmit},"Submit")),this.state.sumbitAlert?n.a.createElement(W,{config:{message:"Submission Failed!",variant:"error"}}):null,this.state.successAlert?n.a.createElement(W,{config:{message:"Submission Successful!",variant:"success"}}):null)}}]),a}(n.a.Component),Ha=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(La),Ma=(a(766),function(e,t){var a=e.history;return{selectableRows:!1,search:!1,print:!1,download:!1,filter:!1,customToolbar:function(){if(t.data.length>0)return n.a.createElement(Ha,{history:a,data:t.data,wp:t.wp,revision:t.revision})}}}),Ra=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).getCustomTheme=function(){return Object(B.a)({overrides:{MUIDataTableHeadCell:{data:{fontSize:"16px",fontWeight:"bold"}},MUIDataTable:{paper:{padding:"45px"}},MUIDataTableToolbar:{titleText:{fontSize:"16px",fontWeight:"bold",margin:"0 0 0 15px"},root:{padding:"0px"}},MUIDataTableBodyCell:{root:{fontSize:"16px"}}}})},r.state={data:[],wp:r.props.location.wp,revision:0,errorAlert:!1,successAlert:!1},r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){try{console.log(this.state.wp);var e=[],t=0;this.state.wp.employees.forEach((function(t){var a=[];a.push(t.employee_id),a.push(t.first_name+" "+t.last_name),a.push(t.labor_grade_id.labor_grade_id),e.push(a)}));var a=!1,r=0;if(this.state.wp.workPackagePlanCollection.forEach((function(t){console.log("WP!"),"ESTIMATE"===t.type&&(a=!0,t.revision>r&&(r=t.revision,e.forEach((function(e){console.log("in here"),e[2]===t.labor_grade_id&&(e[3]=t.plan_hour/t.quantity)}))))})),t=r+1,!a){t=1,console.log("BUDGET");var n=0;this.state.wp.workPackagePlanCollection.forEach((function(t){t.revision>n&&(console.log("Found Revision"),n=t.revision,e.forEach((function(e){console.log("Data"),console.log(e[2]),console.log(t.labor_grade_id),e[2]===t.labor_grade_id&&(console.log(t.plan_hour),e[3]=t.plan_hour/t.quantity)})))}))}this.setState({data:e,revision:t}),console.log(e)}catch(s){console.error(s),this.setState({errorAlert:!0}),this.props.sessionLogoutHandler()}}},{key:"render",value:function(){return n.a.createElement("div",{className:"iterationPlanCreate-container"},n.a.createElement(z.a,{theme:this.getCustomTheme()},this.state.errorAlert?n.a.createElement(W,{config:{message:"WorkPackage API Call Failed",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("div",{className:"iteration-tableTitle"}," Iteration Progress"),options:Ma(this.props,this.state),columns:(e=this,[{name:"empId",label:"Employee ID",className:"column"},{name:"empName",label:"Employee Name",className:"column"},{name:"LG",label:"Labor Grade",className:"column"},{name:"Hours",label:"Hours",className:"column",options:{customBodyRender:function(t,a,r){return n.a.createElement("div",null,n.a.createElement("input",{type:"number",value:e.state.data[a.rowIndex][a.columnIndex],onChange:function(t){var n=e.state.data;n[a.rowIndex][a.columnIndex]=t.target.value,r(t.target.value),e.setState({data:n})}}))}}}]),data:this.state.data})));var e}}]),a}(n.a.Component),Wa=(a(767),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).handleClickOpen=function(){r.setState({setOpen:!0})},r.handleClickClose=function(){r.setState({setOpen:!1})},r.state={setOpen:!1,open:!1,members:[]},r.handleClickOpen=r.handleClickOpen.bind(Object(m.a)(r)),r.handleClickClose=r.handleClickClose.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({members:e.members,setOpen:e.open})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(ca.a,{open:this.state.setOpen,keepMounted:!0,onClose:this.handleClickClose},n.a.createElement(ua.a,{className:"modal-container"},n.a.createElement("div",null,n.a.createElement("p",{className:"modal-title"},"Team Members")),this.state.members.map((function(e){return n.a.createElement(Ze.a,{container:!0,direction:"row",alignItems:"center"},n.a.createElement(Ze.a,{item:!0,className:"projectDetailsMargin2"},n.a.createElement(ve.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},e.first_name.slice(0,1).toUpperCase(),e.last_name.slice(0,1).toUpperCase())),n.a.createElement(Ze.a,{item:!0},n.a.createElement(Ie.a,null,e.first_name+" "+e.last_name)))})))))}}]),a}(r.Component)),Fa=(a(244),["ID","Name","Supervisor","Team"]),Ua=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={wpList:e.wpList,data:[]},r.options={print:!1,responsive:"scroll",selectableRows:!1,onRowClick:function(e,t){console.log(e);var a=null;r.state.wpList.forEach((function(t){t.work_package_id===e[0]&&(a=t)})),r.props.history.push({pathname:"/workpackageDetail",state:{wp:a}})}},r.setData=r.setData.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setData(this.state.wpList)}},{key:"setData",value:function(e){var t,a=[];e.map((function(e){(t=[]).push(e.work_package_id),t.push(e.description.split(":",1)[0]),t.push(e.responsible_person_id.first_name+" "+e.responsible_person_id.last_name),t.push(e.employees.length),a.push(t)})),this.setState({data:a})}},{key:"render",value:function(){return n.a.createElement(P.a,{className:"WorkpackageListDT",title:"Work Packages",columns:Fa,options:this.options,data:this.state.data})}}]),a}(n.a.Component),Ba=a(1001),za=a(1002),Va=a(362),Ga=a.n(Va),Ka=a(507),qa=a.n(Ka),Ja=a(351),Ya=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={wpList:[],data:[]},r.setData=r.setData.bind(Object(m.a)(r)),r.addChildren=r.addChildren.bind(Object(m.a)(r)),r.renderTree=r.renderTree.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentWillReceiveProps",value:function(e){var t=this;console.log("Received props"),this.setState({wpList:e.wpList},(function(){return t.setData(t.state.wpList)}))}},{key:"setData",value:function(e){var t=this,a=[],r="",n="",s=[],o={};e.sort((function(e,t){return parseInt(e.higher_work_package_id)-parseInt(t.higher_work_package_id)})),console.log(e),e.map((function(e){o={},s=[],r=e.work_package_id,n=e.description,o.id=r,o.name=n,o.children=s,"0"===e.higher_work_package_id?a.push(o):t.addChildren(a,e.higher_work_package_id,o)})),this.setState({data:a})}},{key:"addChildren",value:function(e,t,a){for(var r in e){var n=!1;e[r].id===t&&(e[r].children.push(a),n=!0),n||this.addChildren(e[r].children,t,a)}}},{key:"renderLabel",value:function(e){var t=this;return n.a.createElement(Ja.a,{display:"flex",onClick:function(a){var r=null;t.state.wpList.forEach((function(t){t.work_package_id===e.id&&(r=t)})),t.props.history.push({pathname:"/workpackageDetail",state:{wp:r,isPM:!0}}),a.stopPropagation(),a.preventDefault()}},n.a.createElement(Ie.a,null,"WP"+e.id+": "+e.name.split(":",1)[0]))}},{key:"renderTree",value:function(e){var t=this;return console.log(e),n.a.createElement(Ba.a,{key:e.id,nodeId:e.id,label:this.renderLabel(e)},n.a.createElement(Ie.a,{variant:"h5"},Array.isArray(e.children)?e.children.map((function(e){return t.renderTree(e)})):null))}},{key:"handleToggle",value:function(e,t){e.preventDefault(),console.log(t)}},{key:"render",value:function(){var e=this;return n.a.createElement(za.a,{className:"PDWPTreeView",defaultCollapseIcon:n.a.createElement(Ga.a,{className:"wpTree-expandIcon"}),defaultExpandIcon:n.a.createElement(qa.a,{className:"wpTree-chevronRightIcon"})},this.state.data.map((function(t){return e.renderTree(t)})))}}]),a}(n.a.Component),Za=a(54),Xa=(a(205),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={wpList:r.props.wpList,data:[]},r.setData=r.setData.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setData();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(this.props.wpList),t=[],a=[],r=[],this.props.wpList.forEach((function(e){e.work_package_id.includes("L")&&(a.push(e),e.employees.forEach((function(e){-1===t.indexOf(e.employee_id)&&t.push(e.employee_id)})))})),n=[],!(t.length>0)){e.next=11;break}return s=localStorage.getItem("token"),e.next=10,N.getTimesheetsByEmps(t.toString(),s);case 10:n=e.sent;case 11:o={},a.forEach((function(e){(o={}).wp=e.work_package_id,o.employees=[];var t={};e.employees.forEach((function(a){(t={}).id=a.employee_id,t.name=a.first_name+" "+a.last_name,t.hours=0,n.forEach((function(r){r.employee.employee_id===a.employee_id&&r.details.forEach((function(a){a.project_wp===e.project.project_code+"_"+e.work_package_id&&(t.hours+=a.saturday+a.sunday+a.monday+a.tuesday+a.wednesday+a.thursday+a.friday)}))})),o.employees.push(t)})),r.push(o)})),this.setState({data:r}),console.log(n),console.log(a),console.log(t),console.log(r);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Za.e.create({outerContainer:{display:"flex",flexDirection:"column",padding:60},logoContainer:{display:"flex",flexDirection:"row",alignItems:"center"},headerContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:20,marginBottom:20},image:{height:30,width:30},title:{fontSize:16,fontWeight:"bold",marginLeft:6},report:{fontSize:14,textTransform:"uppercase"},date:{fontSize:14},dataContainer:{display:"flex"},workPackageTitle:{},employeesRow:{},margin:{},marginB:{}});return n.a.createElement(Za.a,null,n.a.createElement(Za.d,{style:e.page},n.a.createElement(Za.g,{style:e.outerContainer},n.a.createElement(Za.g,{style:e.logoContainer},n.a.createElement(Za.b,{style:e.image,src:"https://cors-anywhere.herokuapp.com/https://i.imgur.com/zzNGGGB.jpg"}),n.a.createElement(Za.f,{style:e.title},"Timely")),n.a.createElement(Za.g,{style:e.headerContainer},n.a.createElement(Za.f,{style:e.report},"Report for ",this.state.wpList[0].project.project_code),n.a.createElement(Za.f,{style:e.date},(new Date).toDateString())),this.state.data.map((function(t){return n.a.createElement(Za.g,{key:t.wp,style:e.dataContainer},n.a.createElement(Za.f,{style:[e.workPackageTitle,{fontSize:14,marginBottom:5,marginTop:15}]},"Work Package: ",t.wp),n.a.createElement(Za.g,{style:[e.employeesRow,{display:"flex",flexDirection:"row",borderBottom:"2 solid #000",marginBottom:5}]},n.a.createElement(Za.f,{style:[e.margin,{fontSize:11,width:190}]},"Employee ID"),n.a.createElement(Za.f,{style:[e.margin,{fontSize:11,width:190}]},"Employee Name"),n.a.createElement(Za.f,{style:[e.margin,{fontSize:11,width:190}]},"Hours")),t.employees.map((function(t){return n.a.createElement(Za.g,{style:[e.employeesRow,{display:"flex",flexDirection:"row"}]},n.a.createElement(Za.f,{style:[e.marginB,{fontSize:11,width:190}]},t.id),n.a.createElement(Za.f,{style:[e.marginB,{fontSize:11,width:190}]},t.name),n.a.createElement(Za.f,{style:[e.marginB,{fontSize:11,width:190}]},t.hours))})))})))))}}]),a}(n.a.Component)),Qa=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={projectID:r.props.location.state.projectID,project:{},wpList:[],isProjManager:null,openModal:!1},r.openModal=r.openModal.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"openModal",value:function(){this.setState({openModal:!0})}},{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,O.getDetailsById(this.state.projectID,t);case 3:a=e.sent,console.log(a),this.setState({project:a.project,wpList:a.wpList,isProjManager:a.projManager}),console.log(this.state.project.project_manager_id.first_name);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"projectDetailContainer"},n.a.createElement("div",{className:"topMiddleContainer"},n.a.createElement("div",{className:"topInfoContainer"},n.a.createElement("div",{className:"gridBorder"},n.a.createElement("div",{className:"projectDetail-projectTitle"},this.state.project.project_name),n.a.createElement("div",{className:"projectDetail-projectDescription"}," ",this.state.project.description)),this.state.project.hasOwnProperty("project_manager_id")&&n.a.createElement("div",{className:"projectDetail-teamInfoContainer"},n.a.createElement("div",{className:"projectDetail-projectManagerContainer"},n.a.createElement("div",{className:"projectDetail-projectManager"},"Project Manager:"),n.a.createElement("div",{className:"projectDetailMargin"},n.a.createElement(ve.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true",className:"projectDetail-AvatarCircle"},n.a.createElement("div",{className:"projectDetail-avatarInitials"},this.state.project.project_manager_id.first_name.slice(0,1).toUpperCase(),this.state.project.project_manager_id.last_name.slice(0,1).toUpperCase()))),n.a.createElement("div",{className:"projectDetail-projectManager-name"},this.state.project.project_manager_id.first_name+" "+this.state.project.project_manager_id.last_name)),n.a.createElement("div",{className:"projectDetail-teamMemberInfoContainer"},n.a.createElement("div",{className:"projectDetail-teamTitle"},"Team:"),this.state.project.employees.slice(0,5).map((function(e){return n.a.createElement(A.a,{title:e.first_name+" "+e.last_name},n.a.createElement(ve.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true",className:"projectDetail-AvatarCircle"},n.a.createElement("div",{className:"projectDetail-avatarInitials"},e.first_name.slice(0,1).toUpperCase(),e.last_name.slice(0,1).toUpperCase())))})),this.state.project.employees.length>5&&n.a.createElement(n.a.Fragment,null,n.a.createElement(H.a,{onClick:this.openModal},"Show More"),n.a.createElement(Wa,{open:this.state.openModal,members:this.state.project.employees}))))),this.state.isProjManager&&n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement("div",{className:"projectDetail-middleContainer"},n.a.createElement("div",{className:"projectDetail-bugetDateInfoContainer"},n.a.createElement("div",{className:"projectDetail-budgetContainer"},n.a.createElement("div",{className:"projectDetail-budgetTitle"},"Budget:"),n.a.createElement("div",{className:"projectDetail-budgetAmount"},"$",this.state.project.budget_dollar)),n.a.createElement("div",{className:"projectDetail-dateContainer"},n.a.createElement("div",{className:"projectDetail-startDateContainer"},n.a.createElement("div",{className:"projectDetail-startDateTitle"},"Start Date:"),n.a.createElement("div",{className:"projectDetail-startDate"},new Date(this.state.project.start_date).toDateString().split(" ").slice(1).join(" ")," ","\xa0 \xa0")),n.a.createElement("div",{className:"projectDetail-endDateContainer"},n.a.createElement("div",{className:"projectDetail-endDateTitle"},"End Date:"),n.a.createElement("div",{className:"projectDetail-endDate"},new Date(this.state.project.end_date).toDateString().split(" ").slice(1).join(" "))))),n.a.createElement("div",{className:"projectDetail-createWPbuttonContainer"},n.a.createElement(H.a,{variant:"contained",color:"primary",component:D.b,to:{pathname:"/createWorkpackage",project:this.state.project,wpList:this.state.wpList},style:{marginRight:"5%"}},n.a.createElement("b",null,"Create Work Package")))))),n.a.createElement("div",{className:"projectDetail-treeContainer"},!1===this.state.isProjManager?n.a.createElement(Ua,{history:this.props.history,type:this.state.isProjManager?"PM":"Emp",wpList:this.state.wpList}):n.a.createElement(Ze.a,{container:!0,justify:"center",className:"PDWorkpackageTree",direction:"column"},n.a.createElement(Ze.a,{item:!0},n.a.createElement(Ya,{wpList:this.state.wpList,history:this.props.history})),n.a.createElement("br",null),this.state.wpList.length>0&&n.a.createElement(Ze.a,{item:!0},n.a.createElement(Za.c,{document:n.a.createElement(Xa,{wpList:this.state.wpList}),fileName:this.state.projectID+"_report.pdf",style:{textDecoration:"none",padding:"10px",color:"#4a4a4a",backgroundColor:"#f2f2f2",border:"1px solid #4a4a4a"}},(function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Loading document...":"Get Report"}))))))}}]),a}(n.a.Component),$a=(a(945),[{name:"WpId",label:"WorkPackage ID",className:"column"},{name:"PM",label:"Project Manager",className:"column"},{name:"Members",label:"Members",className:"column"}]),er=function(e,t){e.history;return{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,onRowClick:function(a,r){console.log(a);var n=null;t.forEach((function(e){e.work_package_id===a[0]&&(n=e)})),e.history.push({pathname:"/workpackageDetail",state:{wp:n,isPM:!1,isRE:!0}})},textLabels:{body:{noMatch:n.a.createElement("p",null,"Sorry, you are not responsible for any work pacakges.")}}}},tr=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).getCustomTheme=function(){return Object(B.a)({overrides:{MUIDataTableHeadCell:{data:{fontSize:"16px",fontWeight:"bold"}},MUIDataTable:{paper:{padding:"45px"}},MUIDataTableToolbar:{titleText:{fontSize:"16px",fontWeight:"bold",margin:"0 0 0 15px"},root:{padding:"0px"}},MUIDataTableBodyCell:{root:{fontSize:"16px"}}}})},r.state={data:[],token:null,wpList:[],errorAlert:!1},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.setState({token:e}),this.fetchData(e)}},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.props.classes,a=JSON.parse(sessionStorage.getItem("user")),r=a.employee_id,e.next=6,_.getAllWorkpackageFromRE(r,t);case 6:null!=(n=e.sent)&&this.setState({wpList:n}),s=[],n.forEach(function(){var e=Object(c.a)(l.a.mark((function e(t){var a,r,n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.work_package_id,r=t.project.project_manager_id.first_name+" "+t.project.project_manager_id.last_name,n=t.employees.length,o=[],a.endsWith("L")&&(o.push(a),o.push(r),o.push(n),s.push(o));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({data:s}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),this.setState({errorAlert:!0}),this.props.sessionLogoutHandler();case 18:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"leadEngineer-container"},n.a.createElement(z.a,{theme:this.getCustomTheme()},this.state.errorAlert?n.a.createElement(W,{config:{message:"WorkPackage API Call Failed",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:"WorkPackage Reports",options:er(this.props,this.state.wpList),columns:$a,data:this.state.data}))))}}]),a}(r.Component),ar=a(495),rr=a(432),nr=(a(349),function(e){var t=[];e.project.employees.map((function(e){var a={};a.value=e.employee_id,a.label=e.first_name+" "+e.last_name,t.push(a)}));var a=[];return a.push({value:0,label:"Project Level"}),e.wpList.map((function(e){if("L"!==e.work_package_id.substring(e.work_package_id.length-1)){var t={};t.value=e.work_package_id,t.label="WP"+e.work_package_id+": "+e.description,a.push(t)}})),n.a.createElement("form",{autoComplete:"off"},n.a.createElement("div",{className:"wpInfo-container"},n.a.createElement("div",null,n.a.createElement(St.TextValidator,{component:"span",className:"wpInfo-textValidator",label:"Work Package ID",name:"wpID",value:"WP"+e.wpID,onChange:e.handleChange,disabled:!0,validators:["isRequired"],errorMessages:["Input is required."]})),n.a.createElement("div",null,n.a.createElement(rr.a,{control:n.a.createElement(ar.a,{checked:e.checkedLower,onChange:e.handleCheckboxChange,name:"checkedLower",required:!0}),label:"Lowest Work Package"})),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(St.TextValidator,{component:"span",className:"wpInfo-textValidator",label:"Work Package Name",name:"wpName",value:e.wpName,onChange:e.handleChange,validators:["isRequired"],errorMessages:["Input is required."]})),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(St.TextValidator,{select:!0,label:"Responsible Engineer",className:"wpInfo-textValidator",name:"wpRE",value:e.wpRE,onChange:e.handleChange,validators:["isRequired"],errorMessages:["Input is required."]},t.map((function(e){return n.a.createElement(ne.a,{key:e.value,value:e.value},e.label)})))),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(St.TextValidator,{component:"span",className:"wpInfo-textValidator",label:"Parent Project",value:e.project.project_code+": "+e.project.project_name,onChange:e.handleChange,disabled:!0,validators:["isRequired"],errorMessages:["Input is required."]})),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(St.TextValidator,{select:!0,label:"Parent Work Package",className:"wpInfo-textValidator",name:"wpParent",value:e.wpParent,onChange:e.handleChange,validators:["isRequired"],errorMessages:["Input is required."]},a.map((function(e){return n.a.createElement(ne.a,{key:e.value,value:e.value},e.label)}))))))}),sr=function(e){return n.a.createElement($t.a,{multiple:!0,fullWidth:!0,options:e.emps?e.project.employees.filter((function(t){return-1===e.emps.map((function(e){return e.employee_id})).indexOf(t.employee_id)})):e.project.employees,onChange:function(t,a){return e.handleTagsChange(a)},getOptionLabel:function(e){return e.first_name+" "+e.last_name+" ("+e.labor_grade_id.labor_grade_id+")"},disabled:e.isDisabled,renderInput:function(e){return n.a.createElement(se.a,Object.assign({className:"selectEmployee-textfield"},e,{variant:"standard"}))}})},or=Object(wt.a)((function(e){return{container:{width:"100%",display:"flex",justifyContent:"center"},root:{width:"1100px"},backButton:{marginRight:e.spacing(1)},stepper:{padding:"40px 0",border:"1px solid lightgray"},bottomContainer:{display:"flex",flexDirection:"column",alignItems:"center"},instructionContainer:{display:"flex",alignItems:"center",flexDirection:"column"},instructions:{backgroundColor:"white",width:"450px",display:"flex",justifyContent:"center",alignItems:"center",height:"auto",padding:"50px 0 50px 0",borderTop:"3px solid lightgray",margin:"40px 0 0 0",borderRadius:"5px"},backNextButtonContainer:{display:"flex",justifyContent:"center",margin:"20px 0 0 0"}}}));function ir(e){var t=or(),a=(JSON.parse(sessionStorage.getItem("user")),Object(r.useState)({wpID:"",wpName:"",wpRE:"",wpParent:"",Desc:"",cost:"",startDate:new Date,endDate:new Date,checkedLower:!1,wpList:e.location.wpList,project:e.location.project,wpEmps:[]})),s=Object(le.a)(a,2),o=s[0],i=s[1];Object(r.useEffect)((function(){St.ValidatorForm.addValidationRule("isRequired",(function(e){return console.log(e),0===e.length?(y(!1),!1):(y(!0),!0)}))}),[]);var p=n.a.useState(!1),u=Object(le.a)(p,2),m=u[0],d=u[1],h=n.a.useState(!1),f=Object(le.a)(h,2),g=f[0],b=f[1],v=Object(r.useState)(!1),j=Object(le.a)(v,2),E=j[0],y=j[1],k=function(){var t=Object(c.a)(l.a.mark((function t(){var a,r,n,s,i,c,p,u,m,h,f,g,v;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),console.log(a),!o.checkedLower){t.next=20;break}return t.next=5,S.getYearlyRate(a);case 5:for(u in n=t.sent,console.log(n),s=o.cost,i=[],c={},o.wpEmps)c={},m=o.wpEmps[u].labor_grade_id.labor_grade_id,p=!1,i.forEach((function(e){e.id===m&&(e.count++,p=!0)})),p||(c.id=m,c.count=1,n.forEach((function(e){e.labor_grade_id.labor_grade_id===m&&(c.rate=e.charge_rate)})),i.push(c));h=w(s,i),f={},g=[],i.forEach((function(e){(f={}).project_code=o.project.project_code,f.work_package_id=o.wpID,f.type="BUDGET",f.start_date=o.startDate.toISOString().split("T",1)[0],f.end_date=o.endDate.toISOString().split("T",1)[0],f.revision=1,f.labor_grade_id=e.id,f.quantity=e.count,f.plan_hour=h,f.project_wp=o.project.project_code+"_"+o.wpID,g.push(f)})),v=[],o.wpEmps.forEach((function(e){v.push(e)})),r={project:o.project,work_package_id:o.wpID,higher_work_package_id:o.wpParent,responsible_person_id:{employee_id:o.wpRE},is_open:1,description:o.wpName+": "+o.Desc,project_wp:o.project.project_code+"_"+o.wpID,workPackagePlanCollection:g,employees:v},t.next=21;break;case 20:r={project:o.project,work_package_id:o.wpID,higher_work_package_id:o.wpParent,responsible_person_id:{employee_id:o.wpRE},is_open:1,description:o.wpName+": "+o.Desc,project_wp:o.project.project_code+"_"+o.wpID,employees:[]};case 21:return console.log(JSON.stringify(r)),t.prev=22,t.next=25,_.createWorkpackage(r,a);case 25:d(!0),b(!1),t.next=33;break;case 29:t.prev=29,t.t0=t.catch(22),d(!1),b(!1);case 33:setTimeout((function(){b(!1),d(!1),e.history.push("/dashboard/projects")}),1e3);case 34:case"end":return t.stop()}}),t,null,[[22,29]])})));return function(){return t.apply(this,arguments)}}(),w=function(e,t){var a=0,r=0;return t.forEach((function(e){a+=e.rate*e.count,r+=e.count})),a/=r,(parseInt(e)/a/r).toFixed(2)},x=n.a.useState(0),O=Object(le.a)(x,2),N=O[0],C=O[1],D=["Work-Package Information","Work-Package Description","Budget","Schedule","Employees"],T=function(){C((function(e){return e+1})),y(!1)};return n.a.createElement("div",{className:t.container},n.a.createElement("div",{className:t.root},g?n.a.createElement(W,{config:{message:"Work Package Submission Failed",variant:"error"}}):null,m?n.a.createElement(W,{config:{message:"Work Package Submission Successful!",variant:"success"}}):null,n.a.createElement(St.ValidatorForm,{onSubmit:k},n.a.createElement(xt.a,{activeStep:N,className:t.stepper,alternativeLabel:!0},D.map((function(e){return n.a.createElement(Ot.a,{key:e},n.a.createElement(Nt.a,null,e))}))),n.a.createElement("div",null,N===D.length?n.a.createElement("div",{className:t.instructionContainer},n.a.createElement(Ie.a,{component:"span",className:t.instructions},"All steps completed"),n.a.createElement(H.a,{onClick:function(){C(0)}},"Reset")):n.a.createElement("div",{className:t.bottomContainer},n.a.createElement(Ie.a,{component:"span",className:t.instructions},function(e,t,a,r,s,o,i){switch(e){case 0:return n.a.createElement(nr,{wpList:t.wpList,project:t.project,wpID:t.wpID,wpName:t.wpName,wpRE:t.wpRE,wpParent:t.wpParent,checkedLower:t.checkedLower,handleChange:a,handleCheckboxChange:o});case 1:return n.a.createElement(Tt,{Desc:t.Desc,handleChange:a});case 2:return n.a.createElement(Pt,{cost:t.cost,handleChange:a,isDisabled:!t.checkedLower});case 3:return n.a.createElement(Rt,{startDate:t.startDate,endDate:t.endDate,handleStartChange:r,handleEndChange:s,isDisabled:!t.checkedLower});case 4:return n.a.createElement(sr,{handleTagsChange:i,project:t.project,wpEmps:t.wpEmps,isDisabled:!t.checkedLower})}}(N,o,(function(e){var t=e.target,a=t.name,r=t.value;if(i(Object(kt.a)({},o,Object(Ne.a)({},a,r))),console.log(E),"wpParent"===a){var n=-1,s=o.wpList;for(var l in s.sort(),s)s[l].work_package_id.startsWith(r)&&parseInt(s[l].work_package_id).toString().length===r.length+1&&(n=parseInt(s[l].work_package_id)+1);0===r&&s.forEach((function(e){1===parseInt(e.work_package_id).toString().length&&(n=parseInt(e.work_package_id)+1)})),-1===n&&(n=10*parseInt(r)+1),console.log(n);var c=n;c+=o.checkedLower?"L":"",console.log(c),i(Object(kt.a)({},o,{wpID:c,wpParent:""===r?"0":r}))}}),(function(e){i(Object(kt.a)({},o,{startDate:e})),y(!0)}),(function(e){i(Object(kt.a)({},o,{endDate:e})),y(!0)}),(function(e){var t;i(Object(kt.a)({},o,(t={},Object(Ne.a)(t,e.target.name,e.target.checked),Object(Ne.a)(t,"wpID",e.target.checked?o.wpID+"L":o.wpID.replace("L","")),t)))}),(function(e){e.length>0&&y(!0),i(Object(kt.a)({},o,{wpEmps:e}))}))),n.a.createElement("div",null,n.a.createElement(H.a,{disabled:0===N,onClick:function(){C((function(e){return e-1}))},className:t.backButton},"Back"),N===D.length-1&&n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:k,disabled:!E},"Finish"),N!=D.length-1&&n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:T,disabled:!E},"Back"),N===D.length-1&&n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:k},"Finish"),N!=D.length-1&&n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:T},"Next")))))))}var lr=a(191),cr=a.n(lr),pr=(a(947),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={options:{chart:{id:"basic-bar"},title:{text:"Employee hours spent",align:"left",margin:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"16px",color:"#263238"}},tooltip:{enabled:!0,x:{show:!0,formatter:function(e,t){return r.state.emps[t.dataPointIndex]}}},xaxis:{categories:[],axisBorder:{show:!0,color:"#78909C",height:1,width:"100%",offsetX:0,offsetY:0,style:{fontSize:"16px"}},title:{text:"Employees",style:{fontSize:"16px",color:"#263238"}}},yaxis:{axisBorder:{show:!0,color:"#78909C",height:1,offsetX:0,offsetY:0,style:{fontSize:"16px"}},title:{text:"Hours",style:{fontSize:"16px",color:"#263238"}}}},series:[{name:"Hours",data:[]}],emps:[],week:r.props.week},r.handleWeekChange=r.handleWeekChange.bind(Object(m.a)(r)),r.getWeeksMap=r.getWeeksMap.bind(Object(m.a)(r)),r.setGraphValues=r.setGraphValues.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setGraphValues()}},{key:"setGraphValues",value:function(){var e=this,t=[],a=[];this.props.EmpsX.forEach((function(e){t.push(e.employee_id),a.push(e.first_name+" "+e.last_name+" ("+e.labor_grade_id.labor_grade_id+")")}));var r=this.props.wp.project.project_code,n=this.props.wp.work_package_id,s=[];console.log(this.state.week),t.forEach((function(t){var a=0;e.props.EmpsY.forEach((function(s){s.employee.employee_id===t&&s.week===e.state.week&&s.details.forEach((function(e){e.project_code===r&&e.work_package_id===n&&(a+=e.saturday+e.sunday+e.monday+e.tuesday+e.wednesday+e.thursday+e.friday)}))})),s.push(a)})),console.log(s),this.setState((function(e){return{options:Object(kt.a)({},e.options,{xaxis:Object(kt.a)({},e.options.xaxis,{categories:t})}),series:[Object(kt.a)({},e.series,{data:s})],emps:a}}))}},{key:"handleWeekChange",value:function(e){var t=this;console.log(e.target.value),this.setState({week:e.target.value},(function(){return t.setGraphValues()}))}},{key:"getWeeksMap",value:function(){var e=[],t=new Date(this.props.wp.workPackagePlanCollection[0].start_date),a=new Date(this.props.wp.workPackagePlanCollection[0].end_date);console.log(t),console.log(a);var r=t.getDay();r>-1&&r<6&&t.setDate(t.getDate()+(6-r)),a.getDay()<6&&a.setDate(a.getDate()+(6-a.getDay())),console.log(t),console.log(a);for(var n=t;n<=a;)e.push({label:n.toISOString().split("T",1)[0],value:n.getWeek()}),n.setDate(n.getDate()+7);return e}},{key:"render",value:function(){var e=[];return this.props.wp.workPackagePlanCollection.length>0&&(e=this.getWeeksMap()),n.a.createElement("div",{className:"empHours-container"},n.a.createElement("div",{className:"mixed-chart"},n.a.createElement(se.a,{select:!0,label:"Week Ending",className:"WPInfowidth",name:"week",value:this.state.week,onChange:this.handleWeekChange},e.map((function(e){return n.a.createElement(ne.a,{key:e.value,value:e.value},e.label)}))),n.a.createElement(cr.a,{options:this.state.options,series:this.state.series,type:"bar",width:"800"})))}}]),a}(n.a.Component)),ur=a(286),mr=(a(948),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={series:[],options:{chart:{height:350,type:"line",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},colors:["#fc0303","#035efc","#17b309"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},title:{text:"Budget vs Actual hours spent per labor grade",align:"left",offsetX:0,style:{fontSize:"16px",fontWeight:"bold"}},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}},markers:{size:1},xaxis:{categories:[],title:{text:"Labor Grades",style:{fontSize:"16px"}},labels:{style:{fontSize:"16px"}}},yaxis:{title:{text:"Hours",style:{fontSize:"16px"}}},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-30,offsetX:0,fontSize:"16px"}},wp:r.props.wp,tsheets:r.props.tsheets,startDate:"",endDate:""},r.calcValues=r.calcValues.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.calcValues()}},{key:"calcValues",value:function(){var e=this;console.log(this.state.wp);var t=[],a=[],r=[],n=[];this.state.wp.workPackagePlanCollection.forEach((function(e){var r=0;"BUDGET"===e.type?(t.push(e.labor_grade_id),a.push(parseInt(e.plan_hour))):e.revision>r&&(r=e.revision,n[t.indexOf(e.labor_grade_id)]=parseInt(e.plan_hour))}));for(var s=0;s<t.length;s++)r.push(0);console.log(this.state.tsheets),this.state.tsheets.forEach((function(a){a.details.forEach((function(n){console.log(n.project_wp),console.log(e.state.wp.project_wp),n.project_wp===e.state.wp.project_wp&&(r[t.indexOf(a.employee.labor_grade_id.labor_grade_id)]+=parseInt(n.saturday+n.sunday+n.monday+n.tuesday+n.wednesday+n.thursday+n.friday))}))})),console.log(t),console.log(a),console.log(r),console.log(n);var o=new Date(this.state.wp.workPackagePlanCollection[0].start_date).toISOString().split("T",1)[0],i=new Date(this.state.wp.workPackagePlanCollection[0].end_date).toISOString().split("T",1)[0];this.setState((function(e){return{series:[].concat(Object(ur.a)(e.series),[{name:"Budgeted",data:a},{name:"Done",data:r},{name:"Remaining RE estimate",data:n}]),options:Object(kt.a)({},e.options,{xaxis:Object(kt.a)({},e.options.xaxis,{categories:t})}),startDate:o,endDate:i}}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"budgetActual-cotainer"},n.a.createElement("div",{className:"budgetActual-date-container"},n.a.createElement("b",null,"Date:")," "," "+this.state.startDate+" - "+this.state.endDate),n.a.createElement(cr.a,{className:"budgetActual-chart",options:this.state.options,series:this.state.series,type:"line",height:"500",width:"800"}))}}]),a}(n.a.Component)),dr=(a(949),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={series:[],options:{chart:{height:350,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight"},title:{text:"Responsibility Engineer Estimation",align:"left",style:{fontSize:"16px",fontWeight:"bold"}},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{categories:[],title:{text:"Date",style:{fontSize:"16px"}}},yaxis:{title:{text:"Hours",style:{fontSize:"16px"}}},tooltip:{enabled:!0,y:{show:!0,formatter:function(e,t){return e+" hrs "+r.state.graphValueObj[t.dataPointIndex]}}}},wp:r.props.wp,graphValueObj:[]},r.calcGraphValus=r.calcGraphValus.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.calcGraphValus()}},{key:"calcGraphValus",value:function(){var e=[],t=[],a=[],r={};this.state.wp.workPackagePlanCollection.forEach((function(n){if("ESTIMATE"===n.type){r={};var s=new Date(n.start_date).toISOString().split("T",1)[0];-1===e.indexOf(s)&&(e.push(s),t[e.indexOf(s)]=0,a.push([])),t[e.indexOf(s)]+=n.plan_hour,r.id=n.labor_grade_id,r.hours=n.plan_hour,a[e.indexOf(s)].push(r)}}));var n=[];a.forEach((function(e){var t="";e.forEach((function(e){t+=e.id+": "+e.hours})),n.push(t)})),this.setState((function(a){return{series:[].concat(Object(ur.a)(a.series),[{name:"RE estimate",data:t}]),options:Object(kt.a)({},a.options,{xaxis:Object(kt.a)({},a.options.xaxis,{categories:e})}),graphValueObj:n}})),console.log(e),console.log(t),console.log(a)}},{key:"render",value:function(){return n.a.createElement("div",{className:"estimationRE-container"},n.a.createElement(cr.a,{options:this.state.options,series:this.state.series,type:"line",height:"500",width:"800"}))}}]),a}(n.a.Component)),hr=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).handleTagsChange=function(e){console.log(e),r.setState({selectEmps:e},console.log(r.state.selectEmps))},r.state={wp:r.props.location.state.wp,isProjManager:r.props.location.state.isPM,isRE:!!r.props.location.state.isRE&&r.props.location.state.isRE,emps:[],timesheets:[],week:0,openModal:!1,selectDisabled:!0,selectEmps:[]},r.openModal=r.openModal.bind(Object(m.a)(r)),r.calcValuesEmpHours=r.calcValuesEmpHours.bind(Object(m.a)(r)),r.handleTagsChange=r.handleTagsChange.bind(Object(m.a)(r)),r.submitNewEmployees=r.submitNewEmployees.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"openModal",value:function(){this.setState({openModal:!0})}},{key:"componentDidMount",value:function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.wp.work_package_id.includes("L")){e.next=3;break}return e.next=3,this.calcValuesEmpHours();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calcValuesEmpHours",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=[],this.state.wp.employees.forEach((function(e){a.push(e.employee_id)})),e.next=5,N.getTimesheetsByEmps(a.toString(),t);case 5:r=e.sent,n=new Date,s=n.getWeek(),n.getDay()>0&&n.getDay()<6&&s--,this.setState({emps:this.state.wp.employees,week:s,timesheets:r}),console.log(r);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"submitNewEmployees",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SUbmit"),t=this.state.wp,this.state.selectEmps.forEach((function(e){return t.employees.push(e)})),console.log(t),this.setState({wp:t,selectDisabled:!0},console.log(this.state.wp)),a=localStorage.getItem("token"),e.next=8,_.updateWorkpackage(t,a);case 8:r=e.sent,console.log(r);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"projectDetailContainer"},n.a.createElement("div",{className:"wpDetail-innerContainer"},n.a.createElement("div",{className:"wpDetail-top-container"},n.a.createElement("div",{className:"wpDetail-projTitleDesc-container"},n.a.createElement("div",{className:"wpDetail-projectTitle"},this.state.wp.description.split(":",1)[0],this.state.wp.project_name),n.a.createElement("div",{className:"projectDetail-projectDescription"},this.state.wp.description.split(":",2)[1]?this.state.wp.description.split(":",2)[1]:"")),n.a.createElement("div",{className:"wpDetail-teamInfo-container"},n.a.createElement("div",{className:"wpDetail-REInfo"},n.a.createElement("div",{className:"wpDetail-RE-title"},"Responsible Engineer:"),n.a.createElement("div",{className:"wpDetail-avatar-container"},n.a.createElement(ve.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},this.state.wp.responsible_person_id.first_name.slice(0,1).toUpperCase(),this.state.wp.responsible_person_id.last_name.slice(0,1).toUpperCase())),n.a.createElement("div",{className:"wpDetail-RE-name-container"},this.state.wp.responsible_person_id.first_name+" "+this.state.wp.responsible_person_id.last_name)),n.a.createElement("div",{className:"wpDetail-teamTitleAvatar-container"},n.a.createElement("div",{className:"wpDetail-teamTitle"},"Team:"),n.a.createElement("div",{className:"wpDetail-teamMemberAvatar-container"},this.state.wp.employees.slice(0,5).map((function(e){return n.a.createElement("div",{className:"wpDetail-avatar-container"},n.a.createElement(A.a,{title:e.first_name+" "+e.last_name},n.a.createElement(ve.a,{variant:"circle","aria-controls":"simple-menu","aria-haspopup":"true"},e.first_name.slice(0,1).toUpperCase(),e.last_name.slice(0,1).toUpperCase())))})),this.state.wp.employees.length>5&&n.a.createElement(n.a.Fragment,null,n.a.createElement(H.a,{onClick:this.openModal},"Show More"),n.a.createElement(Wa,{open:this.state.openModal,members:this.state.wp.employees})),this.state.selectDisabled&&this.state.isProjManager&&this.state.wp.work_package_id.includes("L")&&n.a.createElement(H.a,{onClick:function(){console.log("clicked"),e.setState({selectDisabled:!1})}},"Assign Employees"),!this.state.selectDisabled&&this.state.isProjManager&&this.state.wp.work_package_id.includes("L")&&n.a.createElement(n.a.Fragment,null,n.a.createElement(sr,{handleTagsChange:this.handleTagsChange,project:this.state.wp.project,isDisabled:!1,emps:this.state.emps}),n.a.createElement(H.a,{onClick:this.submitNewEmployees},"Add")))))),this.state.isProjManager&&this.state.emps.length>0&&this.state.wp.work_package_id.includes("L")&&n.a.createElement(n.a.Fragment,null,n.a.createElement(pr,{EmpsX:this.state.emps,week:this.state.week,EmpsY:this.state.timesheets,wp:this.state.wp}),n.a.createElement("br",null),n.a.createElement(mr,{tsheets:this.state.timesheets,wp:this.state.wp}),n.a.createElement("br",null)),this.state.isRE&&n.a.createElement(n.a.Fragment,null,n.a.createElement(mr,{tsheets:this.state.timesheets,wp:this.state.wp}),n.a.createElement("br",null),n.a.createElement(dr,{wp:this.state.wp}),n.a.createElement("br",null),n.a.createElement("div",{className:"wpDetail-newPlan-container"},n.a.createElement(H.a,{variant:"contained",color:"primary",component:D.b,to:{pathname:"/newIterationPlan",wp:this.state.wp}},"Make New Estimation")))))}}]),a}(n.a.Component),fr=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(p.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).clickAssign=function(){e.props.history.push("/dashboard/tsapprover/assign")},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{title:"Assign an employee to as a timesheet approver"},n.a.createElement(H.a,{className:e.iconButton,onClick:this.clickAssign,color:"primary",variant:"contained"},"Assign or Remove")))}}]),a}(n.a.Component),gr=Object(L.a)({iconButton:{marginLeft:30}},{name:"CustomToolbar"})(fr),br=(a(350),[{name:"employeeId",label:"Employee ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"}]),vr=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).getCustomTheme=function(){return Object(B.a)({overrides:{MUIDataTable:{paper:{padding:"45px"}},MUIDataTableHeadCell:{data:{fontSize:"16px",fontWeight:"bold"}},MUIDataTableBodyCell:{root:{fontSize:"16px"}},MUIDataTableToolbar:{root:{padding:"0"}}}})},r.state={data:[],errorAlert:!1},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getEmployees",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),r=[],!sessionStorage.getItem("is_supervisor")){e.next=16;break}return e.prev=4,e.next=7,w.getEmployeesBySupervisor(a.employee_id,t);case 7:n=e.sent,e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(4),this.setState({errorAlert:!0}),setTimeout((function(){i.setState({errorAlert:!1}),i.props.history.push("/dashboard/".concat(a.employee_id))}),1e3),e.abrupt("return",[]);case 15:for(s=0;s<n.length;s++)r.push(n[s]);case 16:if(1!=a.is_secondary_approver){e.next=29;break}return e.prev=17,e.next=20,w.getEmployeesBySupervisor(a.supervisor_id,t);case 20:o=e.sent,e.next=28;break;case 23:return e.prev=23,e.t1=e.catch(17),this.setState({errorAlert:!0}),setTimeout((function(){i.setState({errorAlert:!1}),i.props.history.push("/dashboard/".concat(a.employee_id))}),1e3),e.abrupt("return",[]);case 28:for(s=0;s<o.length;s++)r.push(o[s]);case 29:return e.abrupt("return",r);case 30:case"end":return e.stop()}}),e,this,[[4,10],[17,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,this.getEmployees();case 3:for(t=e.sent,a=[],r=0;r<t.length;r++)n=t[r].employee_id,s=t[r].first_name,o=t[r].last_name,(i=[]).push(n),i.push(s),i.push(o),a.push(i);this.setState({data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.props.classes;return n.a.createElement("div",{className:"tsApproverPortal-container"},n.a.createElement(z.a,{theme:this.getCustomTheme()},this.state.errorAlert?n.a.createElement(W,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("div",{className:"tsApproverPortal-employeesTitle"},"Employees"),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1,onRowClick:function(t,a){localStorage.setItem("name",t[1]+" "+t[2]),e.props.history.push("/dashboard/tsapprover/".concat(t[0]))},customToolbar:function(){if("true"==sessionStorage.getItem("is_supervisor"))return n.a.createElement(n.a.Fragment,null,n.a.createElement(gr,{history:e.props.history}))}}),columns:br,data:this.state.data})))}}]),a}(r.Component),jr=[{name:"timesheetid",label:"Timesheet ID",className:"column",options:{filter:!1}},{name:"weeknumber",label:"Week Number",className:"column",options:{filter:!1}},{name:"weekending",label:"Week Ending",className:"column",options:{sort:!0,filter:!1}}],Er=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).getCustomTheme=function(){return Object(B.a)({overrides:{MUIDataTable:{paper:{padding:"45px"}},MUIDataTableHeadCell:{data:{fontSize:"16px",fontWeight:"bold"}},MUIDataTableBodyCell:{root:{fontSize:"16px"}},MUIDataTableToolbar:{root:{padding:"0"}}}})},r.state={timesheets:[],loadedUserID:{},errorAlert:!1},r.fetchTimesheets=r.fetchTimesheets.bind(Object(m.a)(r)),r.formatWeekEnding=r.formatWeekEnding.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchTimesheets(),this.formatWeekEnding()}},{key:"fetchTimesheets",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n,s,o,i,c,p,u=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=this.props.match.params.id,e.prev=2,e.next=5,N.getAllCloseTimesheetsByEmp(a,t);case 5:r=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),this.setState({errorAlert:!0}),setTimeout((function(){u.setState({errorAlert:!1}),u.props.history.push("/dashboard/tsapprover/")}),1e3),e.abrupt("return",[]);case 13:if(0!=r.length){for(n=[],s=0;s<r.length;s++)o=r[s].timesheet_id,i=r[s].week,c=this.formatWeekEnding(r[s].week_ending),(p=[]).push(o),p.push(i),p.push(c),n.push(p);n.sort((function(e,t){return t[1]-e[1]})),this.setState({timesheets:n,loadedUserID:a})}else console.log("no timesheets");case 14:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"formatWeekEnding",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}},{key:"render",value:function(){return n.a.createElement("div",{className:"tsToApprove-container"},n.a.createElement(z.a,{theme:this.getCustomTheme()},this.state.errorAlert?n.a.createElement(W,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("div",{className:"tsToApprove-title"},"Timesheets To Approve For ",localStorage.name),options:(e=this.props,this.state,this.fetchTimesheets,{selectableRows:!1,search:!0,print:!1,download:!1,rowHover:!0,onRowClick:function(t){e.history.push("/dashboard/tsapprover/".concat(e.match.params.id,"/").concat(t[0])),localStorage.setItem("timesheetId",t[0])}}),columns:jr,data:this.state.timesheets})));var e}}]),a}(r.Component),yr=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={errorAlert:!1},r.getCurrentDate=r.getCurrentDate.bind(Object(m.a)(r)),r.approveTimesheet=r.approveTimesheet.bind(Object(m.a)(r)),r.rejectTimesheet=r.rejectTimesheet.bind(Object(m.a)(r)),r.errorHandling=r.errorHandling.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"getCurrentDate",value:function(){return(new Date).getTime()}},{key:"errorHandling",value:function(){var e=this;this.setState({errorAlert:!0}),setTimeout((function(){e.setState({errorAlert:!1}),e.props.history.push("/dashboard/tsapprover/".concat(e.props.match.params.id))}),1e3)}},{key:"approveTimesheet",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),r=this.props.match.params,e.prev=3,e.next=6,N.getTimesheetById(r.id,t,r.tsid);case 6:n=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),this.errorHandling(),e.abrupt("return");case 13:return n.status="APPROVED",n.approver_id=a.employee_id,n.approve_date=this.getCurrentDate(),e.prev=16,e.next=19,N.updateTimesheetById(r.id,t,r.tsid,n);case 19:e.next=25;break;case 21:return e.prev=21,e.t1=e.catch(16),this.errorHandling(),e.abrupt("return");case 25:this.props.history.push("/dashboard/tsapprover/".concat(r.id));case 26:case"end":return e.stop()}}),e,this,[[3,9],[16,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"rejectTimesheet",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),r=this.props.match.params,e.prev=3,e.next=6,N.getTimesheetById(r.id,t,r.tsid);case 6:n=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),this.errorHandling(),e.abrupt("return");case 13:return n.status="OPEN",n.approver_id=a.employee_id,n.approve_date=this.getCurrentDate(),e.prev=16,e.next=19,N.updateTimesheetById(r.id,t,r.tsid,n);case 19:e.sent,e.next=26;break;case 22:return e.prev=22,e.t1=e.catch(16),this.errorHandling(),e.abrupt("return");case 26:this.props.history.push("/dashboard/tsapprover/".concat(r.id));case 27:case"end":return e.stop()}}),e,this,[[3,9],[16,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.state.errorAlert?n.a.createElement(W,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,n.a.createElement(ie,Object.assign({loadedUser:this.props.match.params.tsid},this.props)),n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:this.approveTimesheet},"Approve"),n.a.createElement(H.a,{variant:"contained",color:"secondary",onClick:this.rejectTimesheet},"Reject"))}}]),a}(r.Component),kr=[{name:"employeeId",label:"Employee ID",className:"column"},{name:"firstName",label:"First Name",className:"column"},{name:"lastName",label:"Last Name",className:"column"},{name:"approverStatus",label:"Approver Status",className:"column"},{name:"assign",label:"Assign",className:"column"}],wr=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).getCustomTheme=function(){return Object(B.a)({overrides:{MUIDataTable:{paper:{padding:"45px"}},MUIDataTableHeadCell:{data:{fontSize:"16px",fontWeight:"bold"}},MUIDataTableBodyCell:{root:{fontSize:"16px"}},MUIDataTableToolbar:{root:{padding:"0"}}}})},r.state={data:[],errorAlert:!1},r.fetchData=r.fetchData.bind(Object(m.a)(r)),r.errorHandling=r.errorHandling.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"errorHandling",value:function(){var e=this;this.setState({errorAlert:!0}),setTimeout((function(){e.setState({errorAlert:!1}),e.props.history.push("/dashboard/tsapprover/")}),1e3)}},{key:"getEmployees",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),a=JSON.parse(sessionStorage.getItem("user")),e.prev=2,e.next=5,w.getEmployeesBySupervisor(a.employee_id,t);case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),this.errorHandling(),e.abrupt("return",[]);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"setApprover",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.is_secondary_approver=!0,a=localStorage.getItem("token"),e.prev=2,e.next=5,w.updateEmployee(t.employee_id,a,t);case 5:e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),this.errorHandling(),e.abrupt("return");case 12:this.props.history.push("/dashboard/tsapprover/");case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeApprover",value:function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.is_secondary_approver=!1,a=localStorage.getItem("token"),e.prev=2,e.next=5,w.updateEmployee(t.employee_id,a,t);case 5:e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),this.errorHandling(),e.abrupt("return");case 12:this.props.history.push("/dashboard/tsapprover/");case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(c.a)(l.a.mark((function e(){var t,a,r,s,o=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.classes,e.next=3,this.getEmployees();case 3:for(t=e.sent,a=[],r=function(e){var r=t[e].employee_id,s=t[e].first_name,i=t[e].last_name,l=t[e].is_secondary_approver.toString(),c=[];c.push(r),c.push(s),c.push(i),c.push(l),t[e].is_secondary_approver?c.push(n.a.createElement(H.a,{variant:"contained",color:"secondary",onClick:function(){return o.removeApprover(t[e])}},"Remove")):c.push(n.a.createElement(H.a,{variant:"contained",color:"primary",onClick:function(){return o.setApprover(t[e])}},"Assign")),a.push(c)},s=0;s<t.length;s++)r(s);this.setState({data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){this.props.classes;return n.a.createElement("div",{className:"assignApprover-container"},n.a.createElement(z.a,{theme:this.getCustomTheme()},this.state.errorAlert?n.a.createElement(W,{config:{message:"An error has occurred. Please try again.",variant:"error"}}):null,n.a.createElement(P.a,{className:"datatable",title:n.a.createElement("div",{className:"assignApprover-secondaryTsApproverTitle"},"Secondary Timesheet Approver"),options:(this.props,{selectableRows:!1,search:!0,print:!1,download:!1,filter:!1}),columns:kr,data:this.state.data})))}}]),a}(r.Component),xr=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e,t=this;switch(this.props.config.option){case"dashboard":e=n.a.createElement(T.d,null,n.a.createElement(T.b,{path:"/dashboard/timesheet",exact:!0,render:function(e){return n.a.createElement(G,Object.assign({},e,{sessionLogoutHandler:t.props.config.sessionLogoutHandler}))}}),n.a.createElement(T.b,{path:"/dashboard/timesheet/:id",exact:!0,render:function(e){return n.a.createElement(ie,Object.assign({loadedUser:t.props.config.loadedUser,logoutHandler:t.props.logoutHandler,sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/hr",exact:!0,render:function(e){return n.a.createElement(Oe,Object.assign({loadedUser:t.props.config.loadedUser,sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/profile/:id",exact:!0,render:function(e){return n.a.createElement(xa,Object.assign({hr:!1,loadedUser:t.props.config.loadedUser,sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{exact:!0,path:"/dashboard/hr/create",render:function(e){return n.a.createElement(Aa,Object.assign({hr:!0,createEmployee:!0,loadedUser:t.props.config.loadedUser,sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/hr/:id",exact:!0,render:function(e){return n.a.createElement(xa,Object.assign({hr:!0,createEmployee:!1,loadedUser:t.props.config.loadedUser,sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/supervisor",exact:!0,render:function(e){return n.a.createElement(Qt,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/supervisor/remove",exact:!0,render:function(e){return n.a.createElement(ta,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/supervisor/assign",exact:!0,render:function(e){return n.a.createElement(ra,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/supervisor/:id",exact:!0,render:function(e){return n.a.createElement(sa,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/tsapprover",exact:!0,render:function(e){return n.a.createElement(vr,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/tsapprover/assign",exact:!0,render:function(e){return n.a.createElement(wr,e)}}),n.a.createElement(T.b,{path:"/dashboard/tsapprover/:id",exact:!0,render:function(e){return n.a.createElement(Er,e)}}),n.a.createElement(T.b,{path:"/dashboard/tsapprover/:id/:tsid",exact:!0,render:function(e){return n.a.createElement(yr,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/projects",exact:!0,render:function(e){return n.a.createElement(yt,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/createProject",exact:!0,render:function(e){return n.a.createElement(Ft,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/projectDetails",exact:!0,render:function(e){return n.a.createElement(Qa,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/createWorkpackage",exact:!0,render:function(e){return n.a.createElement(ir,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/workpackageDetail",exact:!0,render:function(e){return n.a.createElement(hr,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/newIterationPlan",exact:!0,render:function(e){return n.a.createElement(Ra,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/lead",exact:!0,render:function(e){return n.a.createElement(tr,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler},e))}}),n.a.createElement(T.b,{path:"/dashboard/:id",exact:!0,render:function(e){return n.a.createElement(Kt,Object.assign({sessionLogoutHandler:t.props.config.sessionLogoutHandler,token:t.props.token},e))}}));break;case"login":e=n.a.createElement(T.d,null,n.a.createElement(T.b,{path:"/",exact:!0,render:function(e){return n.a.createElement(Ce,Object.assign({},e,{loginHandler:t.props.config.loginHandler}))}}));break;case"authentication":e=n.a.createElement(T.d,null,n.a.createElement(T.b,{path:"/dashboard",render:function(e){return n.a.createElement(gt,Object.assign({token:t.props.token},e,{sessionLogoutHandler:t.props.config.sessionLogoutHandler,logoutHandler:t.props.config.logoutHandler,loadedUser:t.props.config.loadedUser,breadCrumbs:t.props.config.breadCrumbs}))}}));break;default:e=n.a.createElement(T.d,null,n.a.createElement(T.b,{path:"/",exact:!0,render:function(e){return n.a.createElement(Ce,Object.assign({},e,{loginHandler:t.props.config.loginHandler}))}}))}return n.a.createElement("div",null,e)}}]),a}(r.Component),Or=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={isAuth:!1,loadedUser:null,token:null,errorAlert:!1,successAlert:!1,sessionAlert:!1},r.loginHandler=r.loginHandler.bind(Object(m.a)(r)),r.logoutHandler=r.logoutHandler.bind(Object(m.a)(r)),r.setAutoLogout=r.setAutoLogout.bind(Object(m.a)(r)),r.sessionHandler=r.sessionHandler.bind(Object(m.a)(r)),r.sessionLogoutHandler=r.sessionLogoutHandler.bind(Object(m.a)(r)),r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.sessionHandler()}},{key:"sessionHandler",value:function(){var e=sessionStorage.getItem("logged"),t=localStorage.getItem("token"),a=localStorage.getItem("expiryDate");if(e){if(!t||!a)return this.setState({isAuth:!1}),void this.sessionLogoutHandler();var r=new Date(a).getTime()-(new Date).getTime();this.setAutoLogout(r),this.setState({isAuth:!0,loadedUser:JSON.parse(sessionStorage.getItem("user"))})}else this.logoutHandler()}},{key:"loginHandler",value:function(){var e=Object(c.a)(l.a.mark((function e(t,a){var r,n,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,x.login(a);case 4:r=e.sent,this.setState({isAuth:!0,loadedUser:r.loadedUser,token:r.token,errorAlert:!1,successAlert:!0}),36e5,n=new Date((new Date).getTime()+36e5),localStorage.setItem("expiryDate",n.toISOString()),localStorage.setItem("token",r.token),sessionStorage.setItem("user",JSON.stringify(r.loadedUser)),sessionStorage.setItem("is_supervisor",r.is_supervisor),sessionStorage.setItem("logged",!0),this.setAutoLogout(36e5),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),e.t0.response.status!==ke.BAD_REQUEST&&e.t0.response.status!==ke.UNAUTHORIZED||this.setState({errorAlert:!0,successAlert:!1});case 19:setTimeout((function(){s.setState({successAlert:!1,errorAlert:!1})}),1e3);case 20:case"end":return e.stop()}}),e,this,[[1,16]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"sessionLogoutHandler",value:function(){var e=this;this.setState({isAuth:!1,loadedUser:null,sessionAlert:!0}),localStorage.removeItem("expiryDate"),localStorage.removeItem("token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("logged"),setTimeout((function(){e.setState({sessionAlert:!1,errorAlert:!1})}),1e3)}},{key:"logoutHandler",value:function(){this.setState({isAuth:!1,loadedUser:null}),localStorage.removeItem("expiryDate"),localStorage.removeItem("token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("logged")}},{key:"setAutoLogout",value:function(e){var t=this;setTimeout((function(){t.logoutHandler()}),e)}},{key:"render",value:function(){var e,t=this,a=function(e){return{option:e,loginHandler:t.loginHandler,logoutHandler:t.logoutHandler,loadedUser:t.state.loadedUser,sessionLogoutHandler:t.sessionLogoutHandler}};if(this.state.isAuth){var r=null;r=null==localStorage.getItem("token")?this.state.token:localStorage.getItem("token"),e=n.a.createElement(xr,Object.assign({},this.props,{config:a("authentication"),token:r}))}else e=n.a.createElement(xr,Object.assign({},this.props,{config:a("login")}));return n.a.createElement("div",{className:"App"},this.state.sessionAlert?n.a.createElement(W,{config:{message:"Session Expired",variant:"error"}}):null,this.state.errorAlert?n.a.createElement(W,{config:{message:"Login Failed",variant:"error"}}):null,this.state.successAlert?n.a.createElement(W,{config:{message:"Login Success!",variant:"success"}}):null,n.a.createElement(D.a,null,this.state.isAuth?n.a.createElement(T.a,{to:"/dashboard/".concat(this.state.loadedUser.employee_id)}):n.a.createElement(T.a,{to:"/"}),e))}}]),a}(r.Component);o.a.render(n.a.createElement(Or,null),document.getElementById("root"))}},[[532,1,2]]]);
//# sourceMappingURL=main.a469ae4d.chunk.js.map